(()=>{var G=Object.create;var I=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty;var f=(l,e)=>()=>(l&&(e=l(l=0)),e);var L=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),ee=(l,e)=>{for(var t in e)I(l,t,{get:e[t],enumerable:!0})},te=(l,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Y(e))!X.call(l,n)&&n!==t&&I(l,n,{get:()=>e[n],enumerable:!(a=K(e,n))||a.enumerable});return l};var O=(l,e,t)=>(t=l!=null?G(Z(l)):{},te(e||!l||!l.__esModule?I(t,"default",{value:l,enumerable:!0}):t,l));var z={};ee(z,{renderResults:()=>p});function ne(l){if(!l)return"";if(/^[A-Z][a-z]+ \d{4}$/.test(l))return l;try{let t=new Date(l);if(!isNaN(t.getTime()))return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getFullYear()}`}catch{}return l}function le(l){if(!l.title||!l.summary||!l.liveUrl)return console.warn("Skipping card with missing required fields:",l),null;let e=document.createElement("div");e.className="aikb-search-card";let t=document.createElement("div");t.className="aikb-search-card__inner";let a=document.createElement("div");a.className="aikb-search-card__content";let n=document.createElement("div");n.className="aikb-search-card__text";let o=document.createElement("h3");o.className="aikb-search-card__title",o.textContent=l.title,n.appendChild(o);let s=document.createElement("p");s.className="aikb-search-card__summary",s.textContent=l.summary,n.appendChild(s),a.appendChild(n);let i=l.listMetadata&&l.listMetadata.keyword?l.listMetadata.keyword[0]:null;if(i){let h=document.createElement("div");h.className="aikb-search-card__tags",i.split(",").forEach(E=>{let F=E.trim();if(F){let N=document.createElement("div");N.className="aikb-search-card__tag",N.textContent=F,h.appendChild(N)}}),a.appendChild(h)}t.appendChild(a);let c=document.createElement("div");c.className="aikb-search-card__actions";let d=document.createElement("a");d.href=l.liveUrl,d.className="ntgc-btn ntgc-btn--secondary";let m=document.createElement("span");m.textContent="See more",d.appendChild(m);let g=document.createElement("span");g.className="fal fa-long-arrow-right",g.setAttribute("aria-hidden","true"),d.appendChild(g),c.appendChild(d);let u=document.createElement("div");u.className="aikb-search-card__metadata";let T=l.listMetadata&&l.listMetadata.keyword?l.listMetadata.keyword[1]:null;if(T){let h=document.createElement("div");h.className="aikb-search-card__useful-for";let S=document.createElement("span");S.className="aikb-search-card__useful-label",S.textContent="Useful for: ",h.appendChild(S);let E=document.createElement("span");E.className="aikb-search-card__useful-value",E.textContent=T,h.appendChild(E),u.appendChild(h)}if(l.date){let h=document.createElement("div");h.className="aikb-search-card__date",h.textContent=`Submitted: ${ne(l.date)}`,u.appendChild(h)}return c.appendChild(u),t.appendChild(c),e.appendChild(t),e}function p(l,e="search-results-list"){console.log(`renderResults called with ${l.length} results for container #${e}`);let t=document.getElementById(e);if(console.log(`document.getElementById("${e}"):`,t),!t){let n=window.$?window.$(`#${e}`):null;console.log(`jQuery selector $("#${e}"):`,n),t=n&&n.length>0?n[0]:null}if(!t){console.error(`Container #${e} not found`),console.log("Available elements with id:",Array.from(document.querySelectorAll("[id]")).map(n=>n.id));return}t.innerHTML="";let a=l.map(n=>le(n)).filter(n=>n!==null);if(a.length===0){let n=document.createElement("p");n.textContent="No results found.",n.style.padding="24px 48px",t.appendChild(n);return}a.forEach(n=>t.appendChild(n)),console.log(`Rendered ${a.length} search result cards`)}var w=f(()=>{window.aikbRenderResults=p});function U(l){let e=typeof l=="string"?document.querySelector(l):l;return e?new R(e):(console.warn("Multi-select element not found:",l),null)}var R,B=f(()=>{R=class{constructor(e){this.selectElement=e,this.options=[],this.selectedValues=new Set,this.tempSelectedValues=new Set,this.isOpen=!1,this.container=null,this.displayButton=null,this.dropdownPanel=null,this.init()}init(){this.selectElement.style.display="none",this.createDropdownStructure(),this.bindEvents(),this.container.__multiSelectInstance=this}createDropdownStructure(){this.container=document.createElement("div"),this.container.className="aikb-multiselect-container",this.displayButton=document.createElement("button"),this.displayButton.type="button",this.displayButton.className="aikb-multiselect-button",this.displayButton.innerHTML=`
      <span class="aikb-multiselect-text">Select Options</span>
      <span class="aikb-multiselect-icon"></span>
    `,this.dropdownPanel=document.createElement("div"),this.dropdownPanel.className="aikb-multiselect-panel",this.dropdownPanel.style.display="none";let e=document.createElement("div");e.className="aikb-multiselect-options";let t=this.createOptionItem({value:"_select_all",label:"Select All",isSelectAll:!0});e.appendChild(t),Array.from(this.selectElement.options).forEach(s=>{if(!s.disabled&&s.value){this.options.push({value:s.value,label:s.textContent});let i=this.createOptionItem({value:s.value,label:s.textContent});e.appendChild(i)}});let a=document.createElement("div");a.className="aikb-multiselect-actions";let n=document.createElement("button");n.type="button",n.className="aikb-multiselect-btn aikb-multiselect-btn-ok",n.textContent="OK",n.addEventListener("click",()=>this.handleOk());let o=document.createElement("button");o.type="button",o.className="aikb-multiselect-btn aikb-multiselect-btn-cancel",o.textContent="Cancel",o.addEventListener("click",()=>this.handleCancel()),a.appendChild(n),a.appendChild(o),this.dropdownPanel.appendChild(e),this.dropdownPanel.appendChild(a),this.container.appendChild(this.displayButton),this.container.appendChild(this.dropdownPanel),this.selectElement.parentNode.insertBefore(this.container,this.selectElement.nextSibling)}createOptionItem(e){let t=document.createElement("label");t.className="aikb-multiselect-option",e.isSelectAll&&t.classList.add("aikb-multiselect-option-all");let a=document.createElement("input");a.type="checkbox",a.className="aikb-multiselect-checkbox",a.value=e.value,a.dataset.label=e.label,e.isSelectAll?a.addEventListener("change",o=>this.handleSelectAll(o)):a.addEventListener("change",()=>this.updateSelectAllState());let n=document.createElement("span");return n.className="aikb-multiselect-label",n.textContent=e.label,t.appendChild(a),t.appendChild(n),t}bindEvents(){this.displayButton.addEventListener("click",e=>{e.stopPropagation(),this.toggle()}),document.addEventListener("click",e=>{!this.container.contains(e.target)&&this.isOpen&&this.handleCancel()})}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen=!0,this.dropdownPanel.style.display="block",this.displayButton.classList.add("aikb-multiselect-open"),this.tempSelectedValues=new Set(this.selectedValues),this.updateCheckboxes()}close(){this.isOpen=!1,this.dropdownPanel.style.display="none",this.displayButton.classList.remove("aikb-multiselect-open")}handleOk(){let e=this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])');this.selectedValues.clear(),e.forEach(t=>{t.checked&&this.selectedValues.add(t.value)}),this.syncNativeSelect(),this.updateDisplayText(),this.triggerChange(),this.close()}handleCancel(){this.tempSelectedValues=new Set(this.selectedValues),this.updateCheckboxes(),this.close()}handleSelectAll(e){let t=e.target.checked;this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])').forEach(n=>{n.checked=t})}updateSelectAllState(){let e=this.dropdownPanel.querySelector('.aikb-multiselect-checkbox[value="_select_all"]'),t=this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])'),a=Array.from(t).filter(n=>n.checked).length;e&&(e.checked=a===t.length,e.indeterminate=a>0&&a<t.length)}updateCheckboxes(){this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])').forEach(t=>{t.checked=this.tempSelectedValues.has(t.value)}),this.updateSelectAllState()}updateDisplayText(){let e=this.displayButton.querySelector(".aikb-multiselect-text");if(this.selectedValues.size===0)e.textContent="Select Options",e.classList.remove("aikb-multiselect-has-selection");else if(this.selectedValues.size===this.options.length)e.textContent="All selected",e.classList.add("aikb-multiselect-has-selection");else{let t=Array.from(this.selectedValues).map(a=>{let n=this.options.find(o=>o.value===a);return n?n.label:a});this.selectedValues.size<=2?e.textContent=t.join(", "):e.textContent=`${this.selectedValues.size} selected`,e.classList.add("aikb-multiselect-has-selection")}}triggerChange(){let e=new CustomEvent("multiselect-change",{detail:{values:Array.from(this.selectedValues)}});if(this.container.dispatchEvent(e),this.selectElement){let t=new Event("change",{bubbles:!0});this.selectElement.dispatchEvent(t)}console.log("Multi-select changed:",Array.from(this.selectedValues))}syncNativeSelect(){this.selectElement&&(Array.from(this.selectElement.options).forEach(e=>{e.selected=!1}),Array.from(this.selectElement.options).forEach(e=>{this.selectedValues.has(e.value)&&(e.selected=!0)}))}getSelectedValues(){return Array.from(this.selectedValues)}reset(){this.selectedValues.clear(),this.tempSelectedValues.clear(),this.updateDisplayText(),this.updateCheckboxes()}destroy(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.selectElement&&(this.selectElement.style.display=""),this.container=null,this.displayButton=null,this.dropdownPanel=null,console.log("Multi-select instance destroyed")}}});function ae(l){let e=new Set;return l.forEach(t=>{t.listMetadata&&t.listMetadata.keyword&&t.listMetadata.keyword[0]&&t.listMetadata.keyword[0].split(",").forEach(n=>{let o=n.trim();o&&e.add(o)})}),Array.from(e).sort((t,a)=>t==="All work areas"?-1:a==="All work areas"?1:t.localeCompare(a))}function oe(l){let e=document.getElementById("document_type");if(!e){console.warn("Work area dropdown #document_type not found");return}e.innerHTML="";let t=document.createElement("option");t.value="",t.textContent="Select a work area",t.disabled=!0,t.selected=!0,e.appendChild(t),l.forEach(a=>{let n=document.createElement("option");n.value=a,n.textContent=a,e.appendChild(n)}),console.log(`Populated work area dropdown with ${l.length} options`),x&&(x.destroy(),x=null),(!e.nextElementSibling||!e.nextElementSibling.classList.contains("aikb-multiselect-container"))&&(x=U(e))}function se(){let l=document.getElementById("select-question-3");if(!l){console.warn("Sort dropdown container #select-question-3 not found");return}let e=document.getElementById("owner");if(e)e.innerHTML="";else{let a=l.querySelector("label");if(l.innerHTML="",a)l.appendChild(a);else{let s=document.createElement("label");s.className="ntgc-form-input--label",s.setAttribute("for","select-input-2"),s.textContent="Sort",l.appendChild(s)}let n=document.createElement("div");n.className="aikb-dropdown-wrapper";let o=document.createElement("div");o.className="aikb-dropdown-inner",e=document.createElement("select"),e.name="sort",e.className="ntgc-select ntgc-select--block ntgc-select-input--filter",e.id="owner",o.appendChild(e),n.appendChild(o),l.appendChild(n)}let t=[{value:"relevance",label:"Relevance",selected:!0},{value:"date-newest",label:"Date (newest first)"},{value:"date-oldest",label:"Date (oldest first)"},{value:"title-az",label:"Title (A-Z)"},{value:"title-za",label:"Title (Z-A)"}];t.forEach(a=>{let n=document.createElement("option");n.value=a.value,n.textContent=a.label,a.selected&&(n.selected=!0),e.appendChild(n)}),console.log(`Populated sort dropdown with ${t.length} options`)}function ie(){let l=document.getElementById("document_type");if(l&&!l.parentElement.querySelector(".aikb-dropdown-icon")){let t=document.createElement("div");t.className="aikb-dropdown-icon",t.setAttribute("data-colour","NTG Blue");let a=l.closest(".aikb-dropdown-wrapper");if(a){let n=a.querySelector(".aikb-dropdown-inner");n&&n.appendChild(t)}}let e=document.getElementById("owner");if(e&&!e.parentElement.querySelector(".aikb-dropdown-icon")){let t=document.createElement("div");t.className="aikb-dropdown-icon",t.setAttribute("data-colour","NTG Blue");let a=e.closest(".aikb-dropdown-wrapper");if(a){let n=a.querySelector(".aikb-dropdown-inner");n&&n.appendChild(t)}}}function y(l){console.log("Initializing dropdowns with search data...");let e=ae(l);oe(e),se(),ie(),console.log("Dropdowns initialized successfully")}var x,v=f(()=>{B();x=null});function b(l){P=l,console.log(`Stored ${P.length} results for filtering/sorting`)}function re(l){return!l||l.length===0?P:P.filter(e=>{if(!e.listMetadata||!e.listMetadata.keyword||!e.listMetadata.keyword[0])return!1;let a=e.listMetadata.keyword[0].split(",").map(n=>n.trim());return l.some(n=>a.includes(n))})}function ce(l,e){let t=[...l];switch(e){case"relevance":t.sort((a,n)=>a.rank&&n.rank?a.rank-n.rank:a.score&&n.score?n.score-a.score:0);break;case"date-newest":t.sort((a,n)=>{let o=a.date?new Date(a.date).getTime():0;return(n.date?new Date(n.date).getTime():0)-o});break;case"date-oldest":t.sort((a,n)=>{let o=a.date?new Date(a.date).getTime():0,s=n.date?new Date(n.date).getTime():0;return o-s});break;case"title-az":t.sort((a,n)=>{let o=a.title||"",s=n.title||"";return o.localeCompare(s)});break;case"title-za":t.sort((a,n)=>{let o=a.title||"";return(n.title||"").localeCompare(o)});break;default:break}return t}async function A(){let l=document.getElementById("document_type"),e=document.getElementById("sort")||document.getElementById("owner");if(!l||!e){console.warn("Required dropdowns not found (document_type or sort)");return}let t=[];l&&(t=Array.from(l.selectedOptions||[]).map(c=>c.value).filter(c=>c&&c.trim().length>0));let a=e.value||"relevance";console.log(`Applying filters - Work Areas: [${t.join(", ")}], Sort: "${a}"`);let n=re(t);console.log(`After filtering: ${n.length} results`);let o=ce(n,a);console.log(`After sorting: ${o.length} results`);let{renderResults:s}=await Promise.resolve().then(()=>(w(),z));s(o,"search-results-list")}function k(){let l=document.getElementById("document_type"),e=document.getElementById("sort")||document.getElementById("owner");if(l){l.addEventListener("change",function(){console.log("Work area filter changed"),A()});let t=l.nextElementSibling;t&&t.classList.contains("aikb-multiselect-container")&&t.addEventListener("multiselect-change",()=>{console.log("Work area filter applied via custom multi-select"),A()}),typeof window.$<"u"&&window.$(l).on("sumo:closed",function(){console.log("Work area filter applied via SumoSelect OK"),A()})}e&&e.addEventListener("change",function(){console.log(`Sort changed to: ${this.value}`),A()}),console.log("Filter and sort listeners initialized")}var P,C=f(()=>{P=[]});function _(){if(!document.getElementById("search-results-list")){console.warn("search-results-list container not found on page");return}console.log("Loading initial results (fallback first, then API)..."),fetch("./dist/search.json").then(t=>{if(console.log("Fallback JSON response status:",t.status,t.ok),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>{console.log("Fallback JSON data loaded successfully:",t),V(t,"fallback")}).catch(t=>{console.error("Error loading fallback search.json:",t),console.error("Attempted path: ./dist/search.json")});let e="https://ntgov-search.funnelback.squiz.cloud/s/search.json?collection=ntgov~sp-ntgc-ai-knowledge-base&s=!FunDoesNotExist:PadreNull";fetch(e).then(t=>{if(console.log("Funnelback API response status:",t.status,t.ok),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>{console.log("Funnelback API data loaded successfully, updating results:",t),V(t,"api")}).catch(t=>{if(console.warn("Funnelback API failed:",t),console.warn("API URL:",e),console.warn("Error type:",t.message),!window.aikbSearchCache||window.aikbSearchCache.length===0){let a=document.getElementById("search-results-list");a&&(a.innerHTML='<p class="aikb-error">Search unavailable. Please try again later.</p>')}})}function V(l,e="unknown"){let a=(l.response&&l.response.resultPacket?l.response.resultPacket.results:[]).map(n=>({title:n.title||"",summary:n.summary||"",listMetadata:n.listMetadata||{},date:n.date?new Date(n.date).toLocaleDateString("en-AU",{year:"numeric",month:"long"}):"",liveUrl:n.liveUrl||"",rank:n.rank||0,score:n.score||0}));console.log(`Rendering ${a.length} cards from ${e}`),b(a),window.aikbSearchCache=a,console.log(`Cached ${a.length} results for offline search`),y(a),k(),p(a,"search-results-list")}var D=f(()=>{w();v();C();window.addEventListener("load",function(){console.log("Page load event fired, loading initial results..."),setTimeout(_,200)})});function j(l,e){if(!l||!e||e.length===0)return console.log("Offline search: No keywords or no cached results available"),[];let t=l.toLowerCase().replace(/[^\w\s]/g,"").trim();if(!t)return console.log("Offline search: Keywords empty after normalization"),[];console.log(`Offline search: Searching for "${l}" in ${e.length} cached results`);let a=new RegExp(t,"gi"),o=e.map(s=>{let i=0,c=0,d=0,m=0;if(s.title){let u=s.title.toLowerCase().replace(/[^\w\s]/g,"").match(a);u&&(c=u.length,i+=c*3)}if(s.summary){let u=s.summary.toLowerCase().replace(/[^\w\s]/g,"").match(a);u&&(d=u.length,i+=d*1)}if(s.metadata){let u=s.metadata.toLowerCase().replace(/[^\w\s]/g,"").match(a);u&&(m=u.length,i+=m*2)}return{...s,_offlineScore:i,_offlineMatches:{title:c,summary:d,metadata:m}}}).filter(s=>s._offlineScore>0);return o.sort((s,i)=>i._offlineScore-s._offlineScore),console.log(`Offline search: Found ${o.length} results matching "${l}"`),o.length>0&&(console.log("Offline search: Top results:"),o.slice(0,3).forEach((s,i)=>{console.log(`  ${i+1}. "${s.title}" (score: ${s._offlineScore}, title:${s._offlineMatches.title}, summary:${s._offlineMatches.summary}, metadata:${s._offlineMatches.metadata})`)})),o}function q(){return window.aikbSearchCache&&Array.isArray(window.aikbSearchCache)?(console.log(`Offline search: Retrieved ${window.aikbSearchCache.length} cached results`),window.aikbSearchCache):(console.log("Offline search: No cached data available"),null)}var M=f(()=>{});var H=L(()=>{D();w();M();C();v();(function(){if(typeof window.$>"u"){console.warn("jQuery not loaded; search form handler disabled");return}let e=window.$("#policy-search-form"),t=window.$("#search");if(e.length===0){console.error("Form #policy-search-form not found");return}function a(){return{query:t.val()||"",area:window.$("#document_type").val()||""}}function n(i){i.preventDefault()}function o(){t.val(""),console.log("Search cleared - reloading initial results"),_()}e.on("submit",n),window.$("#clear-input").on("click",o),t.on("input",function(){let i=window.$("#clear-input");window.$(this).val().length>0?i.attr("hidden",!1):i.attr("hidden","")}),t.on("keydown",function(i){if(i.key==="Enter"||i.keyCode===13){i.preventDefault();let c=window.$(this).val();c.trim()?s(c):(console.log("Empty search via Enter - reloading initial results"),_())}});function s(i){if(!i.trim())return;console.log(`Triggered search for: "${i}"`);let c=q();if(c&&c.length>0){console.log("Performing immediate offline search for fast results");let d=j(i,c);b(d),y(d),k(),p(d,"search-results-list"),console.log(`Offline search: Displayed ${d.length} results (will update with API results)`)}else{let d=window.$("#search-results-list");d.length>0&&d.html('<div class="aikb-loading">Searching...</div>')}window.ntgFunnelback&&typeof window.ntgFunnelback.callSearchAPI=="function"?(window.ntgFunnelback.originalterm=i,window.ntgFunnelback.currentPage=1,window.ntgFunnelback.callSearchAPI(i,function(d){if(!c||c.length===0){console.error("Search failed and no cached data available");let m=window.$("#search-results-list");m.length>0&&m.html('<p class="aikb-error">Unable to load search results. Please check your connection and try again.</p>')}else console.log("API failed but offline results already displayed")})):console.warn("Funnelback API not initialized - using offline search only")}console.log("Search form handler initialized")})()});var r,W=f(()=>{w();v();C();r={originalterm:"",filteredterm:"",currentPage:1,defaults:{sourceField:"#search",baseURL:"https://ntgov-search.funnelback.squiz.cloud/s/search.json",collection:"ntgov~sp-ntgc-ai-knowledge-base",defaultQuery:"!FunDoesNotExist:PadreNull",funnelbackParams:{},minChars:3,containerSelector:"#content .inner-page.au-body .container"},noisewords:"a au all am an and any are as at be been but by can cant co com de do eg else etc for from get go had has hasnt have he hence her here hers him his how http https i ie if in is it its la me my nor not now of off on or our ours pm put re she so than that the their them then there these they this those thus to too uk un until up upon us very via was we well were what when where which while who why www you your yours",init:function(l,e,t,a,n=!1){console.log("Init Funnelback Search");let o=new RegExp("[*<>();/&]","gi");l=l.replace(o,""),l!==!1&&l.trim().length>0&&(r.originalterm=l,r.currentPage=1,r.callSearchAPI())},callSearchAPI:function(l,e){l!=null&&(r.originalterm=l),console.log("callSearchAPI called with originalterm:",r.originalterm);let t=document.getElementById("search-results-list");t&&(t.innerHTML='<div class="aikb-loading">Searching...</div>'),r.filterQuery(),console.log("After filterQuery, filteredterm:",r.filteredterm);let a=(r.currentPage-1)*10+1,n=`${r.defaults.baseURL}?collection=${r.defaults.collection}`;if(r.filteredterm&&r.filteredterm.trim().length>0){n+=`&query=${encodeURIComponent(r.filteredterm)}`;let o=new URLSearchParams(window.location.search);o.set("query",r.filteredterm),r.currentPage&&r.currentPage!==1?o.set("page",r.currentPage):o.delete("page");let s=window.location.pathname+(o.toString()?"?"+o.toString():"");window.history.replaceState({},"",s)}else n+=`&s=${encodeURIComponent(r.defaults.defaultQuery)}`;n+=`&num_ranks=10&start_rank=${a}`,console.log("Calling Funnelback API:",n),$.ajax({url:n,dataType:"JSON",type:"GET",success:function(o){r.processResults(o)},error:function(o,s,i){console.warn("Funnelback API error, loading fallback data:",i),$.ajax({url:"src/data/search.json",dataType:"JSON",type:"GET",success:function(c){console.log("Loaded fallback search data"),r.processResults(c)},error:function(){console.error("Failed to load fallback search data"),typeof e=="function"?(console.log("Triggering offline search fallback"),e(new Error("Both API and fallback JSON failed"))):t&&(t.innerHTML="<p>Unable to load search results. Please try again later.</p>")}})}})},filterQuery:function(){if(!r.originalterm||r.originalterm.trim()==="")return r.filteredterm="",!1;let l=r.noisewords.split(" "),e=r.originalterm.trim().split(" ");if(e.length===0)return r.filteredterm="",!1;let t=[];$.each(e,function(o,s){$.inArray(s.toLowerCase(),l)===-1&&t.push(s)});let a=new RegExp("[*<>{}();/&]","gi"),n=t.join(" ");n=n.replace(a,""),r.filteredterm=n},processResults:function(l){let e=l.response&&l.response.resultPacket?l.response.resultPacket.results:[];console.log(`Processing ${e.length} search results`);let t=["https://ntgcentral.nt.gov.au/dev/aikb/configuration/listing/articles/_nocache"],a=e.filter(o=>!t.includes(o.liveUrl));console.log(`After filtering: ${a.length} results (excluded ${e.length-a.length})`);let n=a.map(o=>({title:o.title||"",summary:o.summary||"",listMetadata:o.listMetadata||{},date:o.date||"",liveUrl:o.liveUrl||"",rank:o.rank||0,score:o.score||0}));b(n),y(n),k(),p(n,"search-results-list"),console.log("Funnelback API results rendered (updated from offline/fallback)")}};window.ntgFunnelback=r});var J=L(()=>{var de='div[data-hydration-component="squiz-call-to-action"] a';function Q(l=document){l.querySelectorAll(de).forEach(t=>{t.classList.add("ntgc-btn","ntgc-btn--primary")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Q()):Q()});var ue=L(()=>{var De=O(H());C();w();v();M();W();B();D();var je=O(J());console.log("[aikb] Landing page bundle loaded successfully");console.log("[aikb] jQuery available:",typeof window.jQuery<"u");console.log("[aikb] DOM ready state:",document.readyState)});ue();})();
//# sourceMappingURL=landing-page.min.js.map
