(()=>{var Ie=Object.create;var P=Object.defineProperty;var Pe=Object.getOwnPropertyDescriptor;var Re=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),W=(e,t)=>{for(var s in t)P(e,s,{get:t[s],enumerable:!0})},Oe=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Re(t))!Fe.call(e,n)&&n!==s&&P(e,n,{get:()=>t[n],enumerable:!(a=Pe(t,n))||a.enumerable});return e};var le=(e,t,s)=>(s=e!=null?Ie(We(e)):{},Oe(t||!e||!e.__esModule?P(s,"default",{value:e,enumerable:!0}):s,e));function ie(){return window.location.hostname==="ntgcentral.nt.gov.au"}function x(){return{isProduction:ie(),liveApiUrl:"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/articles/_nocache",fallbackJsonUrl:"./dist/search.json",workAreasUrl:ie()?"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/work-areas/_nocache":"./src/data/work-areas.json"}}function re(){let e=x();return e.isProduction?e.liveApiUrl:e.fallbackJsonUrl}function ce(){let e=x();return e.isProduction?e.fallbackJsonUrl:null}function de(){return x().workAreasUrl}var ue,_=y(()=>{ue=new Set(["a","au","all","am","an","and","any","are","as","at","be","been","but","by","can","cant","co","com","de","do","eg","else","etc","for","from","get","go","had","has","hasnt","have","he","hence","her","here","hers","him","his","how","http","https","i","ie","if","in","is","it","its","la","me","my","nor","not","now","of","off","on","or","our","ours","pm","put","re","she","so","than","that","the","their","them","then","there","these","they","this","those","thus","to","too","uk","un","until","up","upon","us","very","via","was","we","well","were","what","when","where","which","while","who","why","www","you","your","yours"])});function He(e){let t=e.replace(/[^\w\s]/g," ").trim();return t?t.split(/\s+/).filter(n=>n.length>0).filter(n=>{let o=n.toLowerCase();return ue.has(o)?n===n.toUpperCase()&&n.length>=2:!0}).map(n=>n.toLowerCase()):[]}function $e(e){return e?e.toLowerCase().replace(/[^\w\s]/g," "):""}function F(e,t){if(!e||!t)return{fullWordMatches:0,partialMatches:0};let s=$e(e),a=new RegExp(`\\b${t}\\b`,"gi"),n=s.match(a),o=n?n.length:0,l=new RegExp(t,"gi"),i=s.match(l),r=i?i.length:0,c=Math.max(0,r-o);return{fullWordMatches:o,partialMatches:c}}function he(e){let t=[];return e.listMetadata&&(e.listMetadata["Work area"]&&t.push(...e.listMetadata["Work area"]),e.listMetadata.Roles&&t.push(...e.listMetadata.Roles),e.listMetadata.Benefits&&t.push(...e.listMetadata.Benefits)),t.join(" ")}function Ue(e,t){let s=e.title||"",a=e.summary||"",n=he(e),o=F(s,t),l=F(a,t),i=F(n,t),r=o.fullWordMatches*5+o.partialMatches*2,c=l.fullWordMatches*2+l.partialMatches*1,u=i.fullWordMatches*3+i.partialMatches*1.5,d=r+c+u;return{titleTF:o.fullWordMatches+o.partialMatches,titleFullWord:o.fullWordMatches,titlePartial:o.partialMatches,summaryTF:l.fullWordMatches+l.partialMatches,summaryFullWord:l.fullWordMatches,summaryPartial:l.partialMatches,metadataTF:i.fullWordMatches+i.partialMatches,metadataFullWord:i.fullWordMatches,metadataPartial:i.partialMatches,titleScore:r,summaryScore:c,metadataScore:u,totalScore:d,hasMatch:d>0}}function ze(e){let t=(e.title||"").length,s=(e.summary||"").length,a=he(e).length;return t+s+a}function pe(e,t){if(!e||!t||t.length===0)return[];let s=He(e);if(s.length===0)return[];let n=t.map(o=>{let l=0,i=[],r={};s.forEach(d=>{let m=Ue(o,d);m.hasMatch&&(i.push(d),l+=m.totalScore,r[d]=m)});let c=ze(o),u=c>0?l/c*1e3:0;return{...o,_offlineScore:u,_rawScore:l,_matchedTerms:i,_termScores:r,_docLength:c}}).filter(o=>o._matchedTerms.length>0);return n.sort((o,l)=>l._offlineScore-o._offlineScore),n}function me(){return window.aikbSearchCache&&Array.isArray(window.aikbSearchCache)?window.aikbSearchCache:null}var O=y(()=>{_()});var ye={};W(ye,{getCurrentPage:()=>Ve,getCurrentPageResults:()=>ge,getTotalPages:()=>z,initializePagination:()=>qe,updatePagination:()=>Ke});function qe(e,t=10){U=e,B=t,$=e.length,p=1,Ge(),q()}function ge(){let e=(p-1)*B,t=e+B;return U.slice(e,t)}function Ve(){return p}function z(){return Math.ceil($/B)}function Ge(){if(f=document.getElementById("aikb-pagination"),!f){let e=document.getElementById("search-results-list");e&&e.parentNode&&(f=document.createElement("div"),f.id="aikb-pagination",f.className="aikb-pagination",e.parentNode.insertBefore(f,e.nextSibling))}}function q(){if(!f)return;let e=z();if(e<=1){f.innerHTML="",f.style.display="none";return}f.style.display="flex";let t=document.createElement("div");t.className="aikb-pagination__wrapper";let s=fe("Previous",p>1,()=>{p>1&&H(p-1)});t.appendChild(s);let a=je(e);t.appendChild(a);let n=fe("Next",p<e,()=>{p<e&&H(p+1)});t.appendChild(n),f.innerHTML="",f.appendChild(t)}function fe(e,t,s){let a=document.createElement("div");a.className="aikb-pagination__control",t||a.classList.add("aikb-pagination__control--disabled");let n=document.createElement("div");if(n.className="aikb-pagination__icon-label",e==="Previous"){let l=document.createElement("span");l.className="fal fa-chevron-left",l.setAttribute("aria-hidden","true"),n.appendChild(l)}let o=document.createElement("span");if(o.className="aikb-pagination__text",o.textContent=e,n.appendChild(o),e==="Next"){let l=document.createElement("span");l.className="fal fa-chevron-right",l.setAttribute("aria-hidden","true"),n.appendChild(l)}return a.appendChild(n),t&&(a.addEventListener("click",s),a.style.cursor="pointer"),a}function je(e){let t=document.createElement("div");return t.className="aikb-pagination__pages",Je(p,e).forEach(a=>{if(a==="..."){let n=document.createElement("span");n.className="aikb-pagination__ellipsis",n.textContent="...",t.appendChild(n)}else{let n=document.createElement("div");n.className="aikb-pagination__page-number",a===p&&n.classList.add("aikb-pagination__page-number--active");let o=document.createElement("span");o.textContent=a,n.appendChild(o),n.addEventListener("click",()=>H(a)),n.style.cursor="pointer",t.appendChild(n)}}),t}function Je(e,t){if(t<=7)return Array.from({length:t},(o,l)=>l+1);let s=[];s.push(1),e>3&&s.push("...");let a=Math.max(2,e-1),n=Math.min(t-1,e+1);for(let o=a;o<=n;o++)s.push(o);return e<t-2&&s.push("..."),s.push(t),s}function H(e){let t=z();if(e<1||e>t||e===p)return;p=e,q();let s=new CustomEvent("aikb-pagination-change",{detail:{page:p,results:ge()}});document.dispatchEvent(s);let a=document.getElementById("search-results-list");if(a){let o=a.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:o,behavior:"smooth"})}}function Ke(e){U=e,$=e.length,p=1,q()}var p,B,$,U,f,V=y(()=>{p=1,B=10,$=0,U=[],f=null});var ke={};W(ke,{renderResults:()=>M});function Qe(e){if(!e)return"";if(/^[A-Z][a-z]+ \d{4}$/.test(e))return e;try{let s=new Date(e);if(!isNaN(s.getTime()))return`${["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]} ${s.getFullYear()}`}catch{}return e}function G(e,t){if(!e||!t||t.length===0)return e;let s=e;return[...t].sort((n,o)=>o.length-n.length).forEach(n=>{let o=new RegExp(`(?!<mark[^>]*>)(${n})(?![^<]*</mark>)`,"gi");s=s.replace(o,"<mark>$1</mark>")}),s}function j(e,t){e.innerHTML="";let a=new DOMParser().parseFromString(t,"text/html");Array.from(a.body.childNodes).forEach(n=>{e.appendChild(n.cloneNode(!0))})}function J(e){if(!e.title||!e.summary||!e.liveUrl)return null;let t=document.createElement("div");t.className="aikb-search-card";let s=e._offlineScore||(e.rank?-e.rank:e.score||0);t.setAttribute("data-sort-relevance",s),t.setAttribute("data-sort-title",e.title);let a=e.dateTimestamp||0;t.setAttribute("data-sort-date",a);let n=document.createElement("div");n.className="aikb-search-card__inner";let o=document.createElement("div");o.className="aikb-search-card__content";let l=document.createElement("div");l.className="aikb-search-card__text";let i=document.createElement("h3");if(i.className="aikb-search-card__title",e._matchedTerms&&e._matchedTerms.length>0){let h=G(e.title,e._matchedTerms);j(i,h)}else i.textContent=e.title;l.appendChild(i);let r=document.createElement("p");if(r.className="aikb-search-card__summary",e._matchedTerms&&e._matchedTerms.length>0){let h=G(e.summary,e._matchedTerms);j(r,h)}else r.textContent=e.summary;l.appendChild(r),o.appendChild(l);let c=e.listMetadata&&e.listMetadata["Work area"]?e.listMetadata["Work area"]:[];if(c&&c.length>0){let h=document.createElement("div");h.className="aikb-search-card__tags",c.forEach(g=>{if(g&&g.trim()){let k=document.createElement("div");k.className="aikb-search-card__tag",k.textContent=g.trim(),h.appendChild(k)}}),h.children.length>0&&o.appendChild(h)}n.appendChild(o);let u=document.createElement("div");u.className="aikb-search-card__actions";let d=document.createElement("a");d.href=e.liveUrl,d.className="ntgc-btn ntgc-btn--secondary";let m=document.createElement("span");m.textContent="See more",d.appendChild(m);let C=document.createElement("span");C.className="fal fa-long-arrow-right",C.setAttribute("aria-hidden","true"),d.appendChild(C),u.appendChild(d);let v=document.createElement("div");v.className="aikb-search-card__metadata";let D=e.listMetadata&&e.listMetadata.Roles?e.listMetadata.Roles:[];if(D&&D.length>0){let h=document.createElement("div");h.className="aikb-search-card__useful-for";let g=document.createElement("span");g.className="aikb-search-card__useful-value";let k=document.createElement("strong");k.textContent="Good for: ",g.appendChild(k);let se=D.join(", ");if(e._matchedTerms&&e._matchedTerms.length>0){let I=G(se,e._matchedTerms),oe=document.createElement("span");j(oe,I),Array.from(oe.childNodes).forEach(De=>{g.appendChild(De)})}else{let I=document.createTextNode(se);g.appendChild(I)}h.appendChild(g),v.appendChild(h)}if(e.date){let h=document.createElement("div");h.className="aikb-search-card__date",h.textContent=`Last updated: ${Qe(e.date)}`,v.appendChild(h)}return u.appendChild(v),n.appendChild(u),t.appendChild(n),t}function M(e,t="search-results-list",s=!0){let a=document.getElementById(t);if(!a){let n=window.$?window.$(`#${t}`):null;a=n&&n.length>0?n[0]:null}if(a){if(a.innerHTML="",e.length===0){let n=document.createElement("p");n.textContent="No results found.",n.style.padding="24px 48px",a.appendChild(n);return}s?Promise.resolve().then(()=>(V(),ye)).then(({initializePagination:n,getCurrentPageResults:o})=>{n(e,10),o().map(r=>J(r)).filter(r=>r!==null).forEach(r=>a.appendChild(r))}):e.map(o=>J(o)).filter(o=>o!==null).forEach(o=>a.appendChild(o))}}var be,A=y(()=>{window.aikbRenderResults=M;be=!1;be||(document.addEventListener("aikb-pagination-change",e=>{let{results:t}=e.detail,s=document.getElementById("search-results-list");s&&t&&(s.innerHTML="",t.map(n=>J(n)).filter(n=>n!==null).forEach(n=>s.appendChild(n)))}),be=!0)});function we(e){let t=typeof e=="string"?document.querySelector(e):e;return t?new K(t):null}var K,Q=y(()=>{K=class{constructor(t){this.selectElement=t,this.options=[],this.selectedValues=new Set,this.tempSelectedValues=new Set,this.isOpen=!1,this.container=null,this.displayButton=null,this.dropdownPanel=null,this._boundHandlers={},this.init()}init(){this.selectElement.style.display="none",this.createDropdownStructure(),this.selectAllByDefault(),this.bindEvents(),this.container.__multiSelectInstance=this}selectAllByDefault(){this.options.forEach(t=>{let s=Array.from(this.selectElement.options).find(a=>a.value===t.value);s&&!s.disabled&&this.selectedValues.add(t.value)}),this.syncNativeSelect(),this.updateDisplayText(),this.tempSelectedValues=new Set(this.selectedValues)}createDropdownStructure(){this.container=document.createElement("div"),this.container.className="aikb-multiselect-container",this.displayButton=document.createElement("button"),this.displayButton.type="button",this.displayButton.className="aikb-multiselect-button",this.displayButton.innerHTML=`
      <span class="aikb-multiselect-text">Select Options</span>
      <span class="aikb-multiselect-icon"></span>
    `,this.dropdownPanel=document.createElement("div"),this.dropdownPanel.className="aikb-multiselect-panel",this.dropdownPanel.style.display="none";let t=document.createElement("div");t.className="aikb-multiselect-options";let s=this.createOptionItem({value:"_select_all",label:"Select All",isSelectAll:!0});t.appendChild(s),Array.from(this.selectElement.options).forEach(l=>{if(!l.disabled&&l.value){this.options.push({value:l.value,label:l.textContent});let i=this.createOptionItem({value:l.value,label:l.textContent});t.appendChild(i)}});let a=document.createElement("div");a.className="aikb-multiselect-actions";let n=document.createElement("button");n.type="button",n.className="aikb-multiselect-btn aikb-multiselect-btn-ok",n.textContent="OK",this._boundHandlers.okClick=()=>this.handleOk(),n.addEventListener("click",this._boundHandlers.okClick);let o=document.createElement("button");o.type="button",o.className="aikb-multiselect-btn aikb-multiselect-btn-cancel",o.textContent="Cancel",this._boundHandlers.cancelClick=()=>this.handleCancel(),o.addEventListener("click",this._boundHandlers.cancelClick),a.appendChild(n),a.appendChild(o),this.dropdownPanel.appendChild(t),this.dropdownPanel.appendChild(a),this._boundHandlers.checkboxChange=l=>{l.target.classList.contains("aikb-multiselect-checkbox")&&(l.target.value==="_select_all"?this.handleSelectAll(l):this.updateSelectAllState())},this.dropdownPanel.addEventListener("change",this._boundHandlers.checkboxChange),this.container.appendChild(this.displayButton),this.container.appendChild(this.dropdownPanel),this.selectElement.parentNode.insertBefore(this.container,this.selectElement.nextSibling)}createOptionItem(t){let s=document.createElement("label");s.className="aikb-multiselect-option",t.isSelectAll&&s.classList.add("aikb-multiselect-option-all");let a=document.createElement("input");a.type="checkbox",a.className="aikb-multiselect-checkbox",a.value=t.value,a.dataset.label=t.label;let n=document.createElement("span");return n.className="aikb-multiselect-label",n.textContent=t.label,s.appendChild(a),s.appendChild(n),s}bindEvents(){this._boundHandlers.displayClick=t=>{t.stopPropagation(),this.toggle()},this.displayButton.addEventListener("click",this._boundHandlers.displayClick),this._boundHandlers.documentClick=t=>{this.container&&!this.container.contains(t.target)&&this.isOpen&&this.handleCancel()},document.addEventListener("click",this._boundHandlers.documentClick)}toggle(){!this.container||!this.dropdownPanel||(this.isOpen?this.close():this.open())}open(){!this.container||!this.dropdownPanel||(this.isOpen=!0,this.dropdownPanel.style.display="block",this.displayButton.classList.add("aikb-multiselect-open"),this.tempSelectedValues=new Set(this.selectedValues),this.updateCheckboxes())}close(){!this.container||!this.dropdownPanel||(this.isOpen=!1,this.dropdownPanel.style.display="none",this.displayButton.classList.remove("aikb-multiselect-open"))}handleOk(){if(!this.container||!this.dropdownPanel)return;let t=this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])');this.selectedValues.clear(),t.forEach(s=>{s.checked&&this.selectedValues.add(s.value)}),this.syncNativeSelect(),this.updateDisplayText(),this.triggerChange(),this.close()}handleCancel(){!this.container||!this.dropdownPanel||(this.tempSelectedValues=new Set(this.selectedValues),this.updateCheckboxes(),this.close())}handleSelectAll(t){if(!this.container||!this.dropdownPanel)return;let s=t.target.checked;this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])').forEach(n=>{n.disabled||(n.checked=s)})}updateSelectAllState(){if(!this.container||!this.dropdownPanel)return;let t=this.dropdownPanel.querySelector('.aikb-multiselect-checkbox[value="_select_all"]'),s=this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])'),a=Array.from(s).filter(o=>!o.disabled),n=a.filter(o=>o.checked).length;t&&(t.checked=a.length>0&&n===a.length,t.indeterminate=n>0&&n<a.length)}updateCheckboxes(){if(!this.container||!this.dropdownPanel)return;this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])').forEach(s=>{s.checked=this.tempSelectedValues.has(s.value)}),this.updateSelectAllState()}updateDisplayText(){if(!this.container||!this.dropdownPanel)return;let t=this.displayButton.querySelector(".aikb-multiselect-text");if(this.selectedValues.size===0)t.textContent="Select Options",t.classList.remove("aikb-multiselect-has-selection");else if(this.selectedValues.size===this.options.length)t.textContent="All selected",t.classList.add("aikb-multiselect-has-selection");else if(this.selectedValues.size===1){let s=Array.from(this.selectedValues).map(a=>{let n=this.options.find(o=>o.value===a);return n?n.label:a});t.textContent=s[0],t.classList.add("aikb-multiselect-has-selection")}else t.textContent=`${this.selectedValues.size} selected`,t.classList.add("aikb-multiselect-has-selection")}triggerChange(){if(!this.container||!this.dropdownPanel)return;let t=new CustomEvent("multiselect-change",{detail:{values:Array.from(this.selectedValues)}});if(this.container.dispatchEvent(t),this.selectElement){let s=new Event("change",{bubbles:!0});this.selectElement.dispatchEvent(s)}}syncNativeSelect(){this.selectElement&&(Array.from(this.selectElement.options).forEach(t=>{t.selected=!1}),Array.from(this.selectElement.options).forEach(t=>{this.selectedValues.has(t.value)&&(t.selected=!0)}))}getSelectedValues(){return Array.from(this.selectedValues)}reset(){this.selectedValues.clear(),this.tempSelectedValues.clear(),this.updateDisplayText(),this.updateCheckboxes()}updateCounts(t){if(!this.container||!this.dropdownPanel)return;Array.from(this.selectElement.options).forEach(a=>{if(a.value&&t.has(a.value)){let n=t.get(a.value),o=a.textContent.replace(/\s*\(\d+\)\s*$/,"");n>0?(a.textContent=`${o} (${n})`,a.disabled=!1):(a.textContent=o,a.disabled=!0,a.selected=!1)}}),this.dropdownPanel.querySelectorAll('.aikb-multiselect-checkbox:not([value="_select_all"])').forEach(a=>{let n=a.value;if(t.has(n)){let o=t.get(n),l=a.parentElement,i=l.querySelector(".aikb-multiselect-label");if(i){let r=i.querySelector(".aikb-count-badge");r&&r.remove();let c=i.textContent.replace(/\s*\(\d+\)\s*$/,"").trim();i.textContent=c;let u=document.createElement("span");if(u.className="aikb-count-badge",u.textContent=o.toString(),i.appendChild(u),o===0){a.disabled=!0,a.checked=!1,l.classList.add("aikb-multiselect-option-disabled"),this.selectedValues.delete(n),this.tempSelectedValues.delete(n);let d=this.options.findIndex(m=>m.value===n);d!==-1&&(this.options[d].label=`${c} (${o})`)}else{a.disabled=!1,l.classList.remove("aikb-multiselect-option-disabled");let d=this.options.findIndex(m=>m.value===n);d!==-1&&(this.options[d].label=`${c} (${o})`)}}}}),this.syncNativeSelect(),this.updateDisplayText()}destroy(){this._boundHandlers&&(this._boundHandlers.documentClick&&document.removeEventListener("click",this._boundHandlers.documentClick),this.displayButton&&this._boundHandlers.displayClick&&this.displayButton.removeEventListener("click",this._boundHandlers.displayClick),this.dropdownPanel&&this._boundHandlers.checkboxChange&&this.dropdownPanel.removeEventListener("change",this._boundHandlers.checkboxChange)),this.isOpen=!1,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.selectElement&&(this.selectElement.style.display=""),this.container=null,this.displayButton=null,this.dropdownPanel=null,this._boundHandlers=null}}});function Ze(e){let t=new Set;return e.forEach(s=>{if(s.listMetadata&&s.listMetadata["Work area"]){let a=s.listMetadata["Work area"];Array.isArray(a)&&a.forEach(n=>{let o=n.trim();o&&t.add(o)})}}),Array.from(t).sort((s,a)=>s.localeCompare(a))}function Ye(e,t){let s=new Map;return e.forEach(a=>{s.set(a,0)}),t.forEach(a=>{if(a.listMetadata&&a.listMetadata["Work area"]){let n=a.listMetadata["Work area"];Array.isArray(n)&&n.forEach(o=>{let l=o.trim();l&&s.has(l)&&s.set(l,s.get(l)+1)})}}),s}function Ee(e){Z=e}function Xe(e){let t=document.getElementById("document_type");if(!t)return;t.innerHTML="";let s=document.createElement("option");s.value="",s.textContent="Select a work area",s.disabled=!0,s.selected=!0,t.appendChild(s),e.forEach(a=>{let n=document.createElement("option");n.value=a,n.textContent=a,t.appendChild(n)}),w&&(w.destroy(),w=null),(!t.nextElementSibling||!t.nextElementSibling.classList.contains("aikb-multiselect-container"))&&(w=we(t))}function et(){let e=document.getElementById("select-question-3");if(!e)return;let t=document.getElementById("owner");if(t)t.innerHTML="";else{let a=e.querySelector("label");if(e.innerHTML="",a)e.appendChild(a);else{let l=document.createElement("label");l.className="ntgc-form-input--label",l.setAttribute("for","select-input-2"),l.textContent="Sort",e.appendChild(l)}let n=document.createElement("div");n.className="aikb-dropdown-wrapper";let o=document.createElement("div");o.className="aikb-dropdown-inner",t=document.createElement("select"),t.name="sort",t.className="ntgc-select ntgc-select--block ntgc-select-input--filter",t.id="owner",o.appendChild(t),n.appendChild(o),e.appendChild(n)}[{value:"relevance",label:"Relevance",selected:!0},{value:"date-newest",label:"Date (newest first)"},{value:"date-oldest",label:"Date (oldest first)"},{value:"title-az",label:"Title (A-Z)"},{value:"title-za",label:"Title (Z-A)"}].forEach(a=>{let n=document.createElement("option");n.value=a.value,n.textContent=a.label,a.selected&&(n.selected=!0),t.appendChild(n)})}function tt(){let e=document.getElementById("document_type");if(e&&!e.parentElement.querySelector(".aikb-dropdown-icon")){let s=document.createElement("div");s.className="aikb-dropdown-icon",s.setAttribute("data-colour","NTG Blue");let a=e.closest(".aikb-dropdown-wrapper");if(a){let n=a.querySelector(".aikb-dropdown-inner");n&&n.appendChild(s)}}let t=document.getElementById("owner");if(t&&!t.parentElement.querySelector(".aikb-dropdown-icon")){let s=document.createElement("div");s.className="aikb-dropdown-icon",s.setAttribute("data-colour","NTG Blue");let a=t.closest(".aikb-dropdown-wrapper");if(a){let n=a.querySelector(".aikb-dropdown-inner");n&&n.appendChild(s)}}}function Ce(e,t=null){let s;t&&t.length>0?s=t:Z.length>0?s=Z:s=Ze(e),Xe(s);let a=Ye(s,e);w&&w.updateCounts(a),et(),tt()}var w,Z,Y=y(()=>{Q();w=null,Z=[]});function X(e){let t=document.getElementById("appliedFiltersSection"),s=document.getElementById("appliedFilters"),a=document.getElementById("clearAllBtn");if(!t||!s)return;s.innerHTML="";let n=!1;if(e.searchQuery&&e.searchQuery.trim()){n=!0;let o=ve("Search",e.searchQuery,"bg-success","search");s.appendChild(o)}e.workAreas&&e.workAreas.length>0&&(nt(e.workAreas)||(n=!0,e.workAreas.forEach(l=>{let i=ve("Work area",l,"bg-primary","work-area",l);s.appendChild(i)}))),a&&(a.style.display=n?"inline-flex":"none",a.style.marginLeft="8px",a.style.verticalAlign="middle",a.style.alignItems="center",s.appendChild(a)),t.style.display=n?"block":"none"}function nt(e){let t=document.getElementById("document_type");if(!t)return!1;let s=Array.from(t.options).filter(a=>!a.disabled&&a.value).length;return e.length===s}function ve(e,t,s,a,n){let o=document.createElement("span");o.className=`badge ${s} filter-pill d-inline-flex align-items-center`;let l=document.createElement("span");l.className="pill-label",l.textContent=`${e}:`;let i=document.createElement("span");i.className="pill-value",i.textContent=t;let r=document.createElement("button");r.type="button",r.className="pill-remove",r.title=`Remove ${e}: ${t}`,r.setAttribute("data-filter-type",a),n&&r.setAttribute("data-filter-value",n);let c=document.createElement("span");return c.className="fas fa-times",r.appendChild(c),r.addEventListener("click",u=>{u.preventDefault(),at(a,n)}),o.appendChild(l),o.appendChild(i),o.appendChild(r),o}async function at(e,t){switch(e){case"search":let s=document.getElementById("search");if(s){s.value="";let n=ee();X(n);let{loadInitialResults:o}=await Promise.resolve().then(()=>(S(),ne));o()}break;case"work-area":let a=document.getElementById("document_type");if(a&&t){let n=Array.from(a.options).find(i=>i.value===t);n&&(n.selected=!1);let o=new Event("change",{bubbles:!0});a.dispatchEvent(o);let l=a.nextElementSibling;if(l&&l.classList.contains("aikb-multiselect-container")){let i=l.__multiSelectInstance;i&&(i.selectedValues.delete(t),i.syncNativeSelect(),i.updateDisplayText(),i.triggerChange())}}break}}async function st(){let e=document.getElementById("search");e&&(e.value="");let t=document.getElementById("document_type");if(t){Array.from(t.options).forEach(o=>{!o.disabled&&o.value&&(o.selected=!0)});let n=t.nextElementSibling;if(n&&n.classList.contains("aikb-multiselect-container")){let o=n.__multiSelectInstance;o&&typeof o.selectAllByDefault=="function"&&(o.selectAllByDefault(),o.triggerChange())}}let s=document.getElementById("appliedFiltersSection");s&&(s.style.display="none");let{loadInitialResults:a}=await Promise.resolve().then(()=>(S(),ne));a()}function xe(){let e=document.getElementById("clearAllBtn");e&&e.addEventListener("click",t=>{t.preventDefault(),st()})}function ee(){let e=document.getElementById("search"),t=document.getElementById("document_type"),s=document.getElementById("sort")||document.getElementById("owner"),a={searchQuery:e?e.value:"",workAreas:[],sort:s?s.value:"relevance"};if(t){let n=Array.from(t.selectedOptions||[]);a.workAreas=n.map(o=>o.value).filter(o=>o&&o.trim().length>0)}return a}var te=y(()=>{});function L(e){let t=new Set,s=[];e.forEach((a,n)=>{let o=a.liveUrl||a.url||a.title||JSON.stringify(a)+n;t.has(o)||(t.add(o),s.push(a))}),b=s,console.log("[DEBUG] storeResults called, stored",b.length,"results")}function ot(e){if(console.log("[DEBUG] filterByWorkArea called with:",e,"allResults count:",b.length),!e||e.length===0)return console.log("[DEBUG] No filters selected, returning all results"),b;let t=new Set;if(b.forEach(n=>{if(n.listMetadata&&n.listMetadata["Work area"]){let o=n.listMetadata["Work area"];Array.isArray(o)&&o.forEach(l=>t.add(l))}}),e.length>=t.size)return console.log("[DEBUG] All work areas selected, returning all results"),b;let s=new Set,a=[];return b.forEach((n,o)=>{if(!n.listMetadata||!n.listMetadata["Work area"])return;let l=n.listMetadata["Work area"];if(!Array.isArray(l))return;if(e.every(r=>l.includes(r))){let r=n.liveUrl||n.url||n.title||JSON.stringify(n)+o;s.has(r)||(s.add(r),a.push(n))}}),a}function lt(e,t){let s=[...e];switch(t){case"relevance":s.sort((a,n)=>a.rank&&n.rank?a.rank-n.rank:a.score&&n.score?n.score-a.score:0);break;case"date-newest":s.sort((a,n)=>{let o=a.dateTimestamp||0;return(n.dateTimestamp||0)-o});break;case"date-oldest":s.sort((a,n)=>{let o=a.dateTimestamp||0,l=n.dateTimestamp||0;return o-l});break;case"title-az":s.sort((a,n)=>{let o=a.title||"",l=n.title||"";return o.localeCompare(l)});break;case"title-za":s.sort((a,n)=>{let o=a.title||"";return(n.title||"").localeCompare(o)});break;default:break}return s}function it(e){let t=document.getElementById("search-results-list");if(!t)return;let s=Array.from(t.querySelectorAll(".aikb-search-card"));s.sort((a,n)=>{switch(e){case"relevance":let o=parseFloat(a.getAttribute("data-sort-relevance"))||0;return(parseFloat(n.getAttribute("data-sort-relevance"))||0)-o;case"date-newest":let i=parseFloat(a.getAttribute("data-sort-date"))||0;return(parseFloat(n.getAttribute("data-sort-date"))||0)-i;case"date-oldest":let c=parseFloat(a.getAttribute("data-sort-date"))||0,u=parseFloat(n.getAttribute("data-sort-date"))||0;return c-u;case"title-az":let d=a.getAttribute("data-sort-title")||"",m=n.getAttribute("data-sort-title")||"";return d.localeCompare(m);case"title-za":let C=a.getAttribute("data-sort-title")||"";return(n.getAttribute("data-sort-title")||"").localeCompare(C);default:return 0}}),s.forEach(a=>t.appendChild(a))}async function E(){if(console.log("[DEBUG] applyFiltersAndSort called"),ae){console.log("[DEBUG] Already applying, skipping");return}ae=!0;try{let e=document.getElementById("document_type"),t=document.getElementById("sort")||document.getElementById("owner");if(console.log("[DEBUG] Dropdowns found:",{workAreaDropdown:!!e,sortDropdown:!!t}),!e||!t){console.log("[DEBUG] Missing dropdown, exiting");return}let s=[];e&&(s=Array.from(e.selectedOptions||[]).map(c=>c.value).filter(c=>c&&c.trim().length>0));let a=t.value||"relevance";console.log("[DEBUG] Selections:",{selectedWorkAreas:s,selectedSort:a});let n=ot(s);console.log("[DEBUG] After filtering:",n.length,"results");let o=lt(n,a);console.log("[DEBUG] After sorting:",o.length,"results");let{renderResults:l}=await Promise.resolve().then(()=>(A(),ke));l(o,"search-results-list"),console.log("[DEBUG] Rendered results"),it(a);let i=ee();X(i)}finally{ae=!1}}function Se(){if(Ae)return;let e=document.getElementById("document_type"),t=document.getElementById("sort")||document.getElementById("owner");if(e){e.addEventListener("change",function(){E()});let s=e.nextElementSibling;s&&s.classList.contains("aikb-multiselect-container")&&s.addEventListener("multiselect-change",()=>{E()}),typeof window.$<"u"&&window.$(e).on("sumo:closed",function(){E()})}t&&t.addEventListener("change",function(){E()}),Ae=!0}var b,ae,Ae,N=y(()=>{te();b=[];ae=!1;Ae=!1});var ne={};W(ne,{loadInitialResults:()=>T});async function rt(){let e=de();try{let t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let s=await t.json();return Array.isArray(s)?s:[]}catch{return null}}function T(){if(!document.getElementById("search-results-list"))return;let t=x(),s=re(),a=ce();rt().then(n=>{n&&(Me=n,Ee(n))}),fetch(s).then(n=>{if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()}).then(n=>{Be(n,t.isProduction?"live-api":"local")}).catch(n=>{a?fetch(a).then(o=>{if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}).then(o=>{Be(o,"fallback")}).catch(o=>{_e()}):_e()})}function _e(){let e=document.getElementById("search-results-list");e&&(e.innerHTML='<p class="aikb-error">Unable to load search results. Please check your connection and try again later.</p>')}function Be(e,t="unknown"){let a=(Array.isArray(e)?e:[]).map(l=>{let i=l["last-updated"]?new Date(l["last-updated"]).getTime():0;return{title:l.title||"",summary:l.description||l.summary||"",listMetadata:{"Work area":l["work-area"]||[],Roles:l.roles||[],Benefits:l.benefits||[]},date:l["last-updated"]?new Date(l["last-updated"]).toLocaleDateString("en-AU",{year:"numeric",month:"long"}):"",dateTimestamp:i,liveUrl:l.url||l.liveUrl||"",submittedBy:l["submitted-by"]||"",rank:l.rank||0,score:l.score||0}}),n=new Set,o=[];a.forEach((l,i)=>{let r=l.liveUrl||l.url||l.title||JSON.stringify(l)+i;n.has(r)||(n.add(r),o.push(l))}),L(o),window.aikbSearchCache=o,Ce(o,Me),Se(),M(o,"search-results-list")}var Me,S=y(()=>{A();Y();N();_();Me=null;window.addEventListener("load",function(){setTimeout(T,200)})});var Le=R(()=>{O();S();A();N();window.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("search");e&&e.addEventListener("keydown",function(t){if(t.key==="Enter"){t.preventDefault();let s=e.value.trim();if(s==="")T();else{let a=me();if(a&&a.length>0){let n=pe(s,a);L(n),E()}else{let n=window.$("#search-results-list");n&&n.length>0&&n.html('<p class="aikb-error">Unable to load search results. Please check your connection and try again.</p>')}}}})})});var Te=R(()=>{var ct='div[data-hydration-component="squiz-call-to-action"] a';function Ne(e=document){e.querySelectorAll(ct).forEach(s=>{s.classList.add("ntgc-btn","ntgc-btn--primary")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Ne()):Ne()});var dt=R(()=>{_();var Pt=le(Le());N();A();Y();O();Q();S();var Ut=le(Te());V();te();window.addEventListener("load",function(){xe()})});dt();})();
//# sourceMappingURL=landing-page.min.js.map
