(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __esm = (fn, res) => function __init() {
    return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // src/js/copy-to-clipboard.js
  var require_copy_to_clipboard = __commonJS({
    "src/js/copy-to-clipboard.js"() {
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("pre").forEach((pre) => {
          pre.classList.add("copyable");
          let heading = pre.previousElementSibling;
          if (heading && /^H[2-6]$/.test(heading.tagName)) {
            if (!heading.parentElement.classList.contains("copy-pre-btn-wrapper")) {
              const wrapper = document.createElement("div");
              wrapper.className = "copy-pre-btn-wrapper";
              wrapper.style.position = "relative";
              wrapper.style.width = "100%";
              heading.parentNode.insertBefore(wrapper, heading);
              wrapper.appendChild(heading);
              wrapper.appendChild(pre);
              addCopyButton(wrapper, pre);
            }
          } else if (!pre.parentElement.classList.contains("copy-pre-btn-wrapper")) {
            const wrapper = document.createElement("div");
            wrapper.className = "copy-pre-btn-wrapper";
            wrapper.style.position = "relative";
            wrapper.style.width = "100%";
            pre.parentNode.insertBefore(wrapper, pre);
            wrapper.appendChild(pre);
            addCopyButton(wrapper, pre);
          }
        });
      });
      function addCopyButton(wrapper, pre) {
        if (wrapper.querySelector(".copy-pre-btn")) return;
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "copy-pre-btn";
        btn.textContent = "Copy";
        btn.setAttribute("aria-label", "Copy code block to clipboard");
        btn.style.position = "absolute";
        btn.style.top = "8px";
        btn.style.right = "8px";
        wrapper.appendChild(btn);
        btn.addEventListener("click", async (e) => {
          e.preventDefault();
          const text = pre.textContent;
          if (navigator.clipboard && window.isSecureContext) {
            try {
              await navigator.clipboard.writeText(text);
              showCopiedState(btn);
            } catch (err) {
              console.error("Clipboard API failed:", err);
              showError();
            }
            return;
          }
          try {
            fallbackCopy(text);
            showCopiedState(btn);
          } catch (err) {
            console.error("Fallback copy failed:", err);
            showError();
          }
        });
      }
      function fallbackCopy(text) {
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.setAttribute("readonly", "");
        ta.style.position = "fixed";
        ta.style.top = "-1000px";
        document.body.appendChild(ta);
        ta.focus();
        ta.select();
        const ok = document.execCommand("copy");
        document.body.removeChild(ta);
        if (!ok) throw new Error("execCommand copy failed");
      }
      function showCopiedState(btn) {
        if (btn._copyResetTimer) {
          clearTimeout(btn._copyResetTimer);
        }
        btn.textContent = "Copied";
        btn.classList.add("is-copied");
        btn.setAttribute("aria-label", "Copied to clipboard");
        btn._copyResetTimer = setTimeout(() => {
          btn.textContent = "Copy";
          btn.classList.remove("is-copied");
          btn.setAttribute("aria-label", "Copy code block to clipboard");
        }, 1600);
      }
      function showError() {
        alert("Failed to copy.");
      }
    }
  });

  // src/js/wrap-pre-blocks.js
  function wrapPreBlocks(main) {
    main = main || document.getElementById("aikb-main-content") || document.body;
    const headingSelector = "h2, h3, h4, h5, h6";
    const headings = main.querySelectorAll(headingSelector);
    headings.forEach((heading) => {
      const next = heading.nextElementSibling;
      if (next && next.tagName === "PRE" && !heading.parentElement.classList.contains("aikb-pre-block")) {
        const wrapper = document.createElement("div");
        wrapper.className = "aikb-pre-block";
        heading.parentNode.insertBefore(wrapper, heading);
        wrapper.appendChild(heading);
        wrapper.appendChild(next);
      }
    });
    main.querySelectorAll("pre").forEach((pre) => {
      if (!pre.parentElement.classList.contains("aikb-pre-block")) {
        const wrapper = document.createElement("div");
        wrapper.className = "aikb-pre-block";
        pre.parentNode.insertBefore(wrapper, pre);
        wrapper.appendChild(pre);
      }
    });
  }
  var init_wrap_pre_blocks = __esm({
    "src/js/wrap-pre-blocks.js"() {
    }
  });

  // src/js/content-page.js
  var require_content_page = __commonJS({
    "src/js/content-page.js"() {
      var import_copy_to_clipboard = __toESM(require_copy_to_clipboard());
      init_wrap_pre_blocks();
      document.addEventListener("DOMContentLoaded", () => {
        wrapPreBlocks();
      });
    }
  });
  require_content_page();
})();
//# sourceMappingURL=content-page.min.js.map
