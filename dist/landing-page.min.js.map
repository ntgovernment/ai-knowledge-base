{
  "version": 3,
  "sources": ["../src/js/config.js", "../src/js/pagination.js", "../src/js/search-card-template.js", "../src/js/multi-select-dropdown.js", "../src/js/populate-dropdowns.js", "../src/js/applied-filters.js", "../src/js/search-filters.js", "../src/js/load-initial-results.js", "../src/js/offline-search.js", "../src/js/search-form-handler.js", "../src/js/cta-button-alias.js", "../src/js/landing-page.js"],
  "sourcesContent": ["/**\r\n * Configuration Module\r\n * Centralized environment detection and API endpoint configuration\r\n */\r\n\r\n/**\r\n * Detect if the application is running in production environment\r\n * @returns {boolean} True if running on ntgcentral.nt.gov.au\r\n */\r\nexport function isProduction() {\r\n  return window.location.hostname === \"ntgcentral.nt.gov.au\";\r\n}\r\n\r\n/**\r\n * Get the appropriate data source URL based on environment\r\n * @returns {Object} Configuration object with data source URLs\r\n */\r\nexport function getConfig() {\r\n  const config = {\r\n    isProduction: isProduction(),\r\n    liveApiUrl:\r\n      \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/articles/_nocache\",\r\n    fallbackJsonUrl: \"./dist/search.json\",\r\n    workAreasUrl: isProduction()\r\n      ? \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/work-areas/_nocache\"\r\n      : \"./src/data/work-areas.json\",\r\n  };\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get the primary data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The primary data source URL\r\n */\r\nexport function getPrimaryDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.liveApiUrl : config.fallbackJsonUrl;\r\n}\r\n\r\n/**\r\n * Get the fallback data source URL\r\n * Only used in production when live API fails\r\n * @returns {string|null} The fallback URL or null for dev environment\r\n */\r\nexport function getFallbackDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.fallbackJsonUrl : null;\r\n}\r\n\r\n/**\r\n * Get the work areas data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The work areas data source URL\r\n */\r\nexport function getWorkAreasDataSource() {\r\n  const config = getConfig();\r\n  return config.workAreasUrl;\r\n}\r\n", "// Pagination component for search results\r\n\r\nlet currentPage = 1;\r\nlet itemsPerPage = 10;\r\nlet totalItems = 0;\r\nlet allResults = [];\r\nlet paginationContainer = null;\r\n\r\n/**\r\n * Initialize pagination\r\n * @param {Array} results - All search results\r\n * @param {number} perPage - Items per page (default: 10)\r\n */\r\nexport function initializePagination(results, perPage = 10) {\r\n  allResults = results;\r\n  itemsPerPage = perPage;\r\n  totalItems = results.length;\r\n  currentPage = 1;\r\n\r\n  // Find or create pagination container\r\n  ensurePaginationContainer();\r\n\r\n  // Render pagination controls\r\n  renderPaginationControls();\r\n}\r\n\r\n/**\r\n * Get current page of results\r\n * @returns {Array} - Results for current page\r\n */\r\nexport function getCurrentPageResults() {\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  return allResults.slice(startIndex, endIndex);\r\n}\r\n\r\n/**\r\n * Get current page number\r\n * @returns {number}\r\n */\r\nexport function getCurrentPage() {\r\n  return currentPage;\r\n}\r\n\r\n/**\r\n * Get total number of pages\r\n * @returns {number}\r\n */\r\nexport function getTotalPages() {\r\n  return Math.ceil(totalItems / itemsPerPage);\r\n}\r\n\r\n/**\r\n * Ensure pagination container exists in DOM\r\n */\r\nfunction ensurePaginationContainer() {\r\n  paginationContainer = document.getElementById(\"aikb-pagination\");\r\n\r\n  if (!paginationContainer) {\r\n    // Create pagination container after search results\r\n    const searchResultsContainer = document.getElementById(\r\n      \"search-results-list\"\r\n    );\r\n    if (searchResultsContainer && searchResultsContainer.parentNode) {\r\n      paginationContainer = document.createElement(\"div\");\r\n      paginationContainer.id = \"aikb-pagination\";\r\n      paginationContainer.className = \"aikb-pagination\";\r\n      searchResultsContainer.parentNode.insertBefore(\r\n        paginationContainer,\r\n        searchResultsContainer.nextSibling\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Render pagination controls\r\n */\r\nfunction renderPaginationControls() {\r\n  if (!paginationContainer) return;\r\n\r\n  const totalPages = getTotalPages();\r\n\r\n  // Hide pagination if only 1 page or no results\r\n  if (totalPages <= 1) {\r\n    paginationContainer.innerHTML = \"\";\r\n    paginationContainer.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  paginationContainer.style.display = \"flex\";\r\n\r\n  // Create pagination wrapper\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.className = \"aikb-pagination__wrapper\";\r\n\r\n  // Previous button\r\n  const prevButton = createControlButton(\"Previous\", currentPage > 1, () => {\r\n    if (currentPage > 1) {\r\n      goToPage(currentPage - 1);\r\n    }\r\n  });\r\n  wrapper.appendChild(prevButton);\r\n\r\n  // Page numbers\r\n  const pageNumbers = createPageNumbers(totalPages);\r\n  wrapper.appendChild(pageNumbers);\r\n\r\n  // Next button\r\n  const nextButton = createControlButton(\r\n    \"Next\",\r\n    currentPage < totalPages,\r\n    () => {\r\n      if (currentPage < totalPages) {\r\n        goToPage(currentPage + 1);\r\n      }\r\n    }\r\n  );\r\n  wrapper.appendChild(nextButton);\r\n\r\n  // Clear and update\r\n  paginationContainer.innerHTML = \"\";\r\n  paginationContainer.appendChild(wrapper);\r\n}\r\n\r\n/**\r\n * Create Previous/Next control button\r\n * @param {string} label - Button label\r\n * @param {boolean} enabled - Whether button is enabled\r\n * @param {Function} onClick - Click handler\r\n * @returns {HTMLElement}\r\n */\r\nfunction createControlButton(label, enabled, onClick) {\r\n  const button = document.createElement(\"div\");\r\n  button.className = \"aikb-pagination__control\";\r\n  if (!enabled) {\r\n    button.classList.add(\"aikb-pagination__control--disabled\");\r\n  }\r\n\r\n  const iconLabel = document.createElement(\"div\");\r\n  iconLabel.className = \"aikb-pagination__icon-label\";\r\n\r\n  if (label === \"Previous\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-left\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  const text = document.createElement(\"span\");\r\n  text.className = \"aikb-pagination__text\";\r\n  text.textContent = label;\r\n  iconLabel.appendChild(text);\r\n\r\n  if (label === \"Next\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-right\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  button.appendChild(iconLabel);\r\n\r\n  if (enabled) {\r\n    button.addEventListener(\"click\", onClick);\r\n    button.style.cursor = \"pointer\";\r\n  }\r\n\r\n  return button;\r\n}\r\n\r\n/**\r\n * Create page number buttons\r\n * @param {number} totalPages - Total number of pages\r\n * @returns {HTMLElement}\r\n */\r\nfunction createPageNumbers(totalPages) {\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"aikb-pagination__pages\";\r\n\r\n  const pages = calculatePageRange(currentPage, totalPages);\r\n\r\n  pages.forEach((page) => {\r\n    if (page === \"...\") {\r\n      const ellipsis = document.createElement(\"span\");\r\n      ellipsis.className = \"aikb-pagination__ellipsis\";\r\n      ellipsis.textContent = \"...\";\r\n      container.appendChild(ellipsis);\r\n    } else {\r\n      const pageButton = document.createElement(\"div\");\r\n      pageButton.className = \"aikb-pagination__page-number\";\r\n\r\n      if (page === currentPage) {\r\n        pageButton.classList.add(\"aikb-pagination__page-number--active\");\r\n      }\r\n\r\n      const pageText = document.createElement(\"span\");\r\n      pageText.textContent = page;\r\n      pageButton.appendChild(pageText);\r\n\r\n      pageButton.addEventListener(\"click\", () => goToPage(page));\r\n      pageButton.style.cursor = \"pointer\";\r\n\r\n      container.appendChild(pageButton);\r\n    }\r\n  });\r\n\r\n  return container;\r\n}\r\n\r\n/**\r\n * Calculate which page numbers to display\r\n * @param {number} current - Current page\r\n * @param {number} total - Total pages\r\n * @returns {Array} - Array of page numbers and ellipsis\r\n */\r\nfunction calculatePageRange(current, total) {\r\n  if (total <= 7) {\r\n    // Show all pages if 7 or fewer\r\n    return Array.from({ length: total }, (_, i) => i + 1);\r\n  }\r\n\r\n  const pages = [];\r\n\r\n  // Always show first page\r\n  pages.push(1);\r\n\r\n  if (current > 3) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Show pages around current\r\n  const start = Math.max(2, current - 1);\r\n  const end = Math.min(total - 1, current + 1);\r\n\r\n  for (let i = start; i <= end; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  if (current < total - 2) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Always show last page\r\n  pages.push(total);\r\n\r\n  return pages;\r\n}\r\n\r\n/**\r\n * Navigate to specific page\r\n * @param {number} page - Page number to navigate to\r\n */\r\nfunction goToPage(page) {\r\n  const totalPages = getTotalPages();\r\n\r\n  if (page < 1 || page > totalPages || page === currentPage) {\r\n    return;\r\n  }\r\n\r\n  currentPage = page;\r\n\r\n  // Re-render pagination controls\r\n  renderPaginationControls();\r\n\r\n  // Trigger custom event for page change\r\n  const event = new CustomEvent(\"aikb-pagination-change\", {\r\n    detail: {\r\n      page: currentPage,\r\n      results: getCurrentPageResults(),\r\n    },\r\n  });\r\n  document.dispatchEvent(event);\r\n\r\n  // Scroll to top of results\r\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\r\n  if (searchResultsContainer) {\r\n    const offset = 100; // Offset for fixed header\r\n    const top =\r\n      searchResultsContainer.getBoundingClientRect().top +\r\n      window.pageYOffset -\r\n      offset;\r\n    window.scrollTo({ top, behavior: \"smooth\" });\r\n  }\r\n}\r\n\r\n/**\r\n * Update pagination with new results\r\n * @param {Array} results - New results array\r\n */\r\nexport function updatePagination(results) {\r\n  allResults = results;\r\n  totalItems = results.length;\r\n  currentPage = 1; // Reset to first page\r\n\r\n  renderPaginationControls();\r\n}\r\n", "// Search card template generator for AI Knowledge Base results\r\n\r\n/**\r\n * Parse date string and extract \"Month YYYY\" format\r\n * @param {string} dateStr - Raw date string (e.g., \"December 2025\")\r\n * @returns {string} Formatted date or original string if parsing fails\r\n */\r\nfunction formatDate(dateStr) {\r\n  if (!dateStr) return \"\";\r\n\r\n  // If already in \"Month YYYY\" format, return as-is\r\n  const monthYearPattern = /^[A-Z][a-z]+ \\d{4}$/;\r\n  if (monthYearPattern.test(dateStr)) {\r\n    return dateStr;\r\n  }\r\n\r\n  // Try to parse as Date object\r\n  try {\r\n    const date = new Date(dateStr);\r\n    if (!isNaN(date.getTime())) {\r\n      const months = [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\",\r\n      ];\r\n      return `${months[date.getMonth()]} ${date.getFullYear()}`;\r\n    }\r\n  } catch (e) {\r\n    // Fall through to return original\r\n  }\r\n\r\n  return dateStr;\r\n}\r\n\r\n/**\r\n * Create a search result card DOM element\r\n * @param {Object} result - Result data object\r\n * @param {string} result.title - Card title\r\n * @param {string} result.summary - Card summary/description\r\n * @param {Object} result.listMetadata - Metadata object\r\n * @param {Array<string>} result.listMetadata[\"Work area\"] - Array of work area tags\r\n * @param {Array<string>} result.listMetadata[\"Roles\"] - Array of roles for \"Good for\"\r\n * @param {string} result.date - Submission date\r\n * @param {string} result.liveUrl - URL for \"See more\" button\r\n * @param {string} result.submittedBy - Person who submitted\r\n * @returns {HTMLElement|null} Card element or null if required fields missing\r\n */\r\nfunction createSearchCard(result) {\r\n  // Validate required fields\r\n  if (!result.title || !result.summary || !result.liveUrl) {\r\n    console.warn(\"Skipping card with missing required fields:\", result);\r\n    return null;\r\n  }\r\n\r\n  // Create card container\r\n  const card = document.createElement(\"div\");\r\n  card.className = \"aikb-search-card\";\r\n\r\n  // Create inner wrapper\r\n  const inner = document.createElement(\"div\");\r\n  inner.className = \"aikb-search-card__inner\";\r\n\r\n  // Create content section\r\n  const content = document.createElement(\"div\");\r\n  content.className = \"aikb-search-card__content\";\r\n\r\n  // Text section\r\n  const textSection = document.createElement(\"div\");\r\n  textSection.className = \"aikb-search-card__text\";\r\n\r\n  // Title\r\n  const title = document.createElement(\"h3\");\r\n  title.className = \"aikb-search-card__title\";\r\n  title.textContent = result.title;\r\n  textSection.appendChild(title);\r\n\r\n  // Summary\r\n  const summary = document.createElement(\"p\");\r\n  summary.className = \"aikb-search-card__summary\";\r\n  summary.textContent = result.summary;\r\n  textSection.appendChild(summary);\r\n\r\n  content.appendChild(textSection);\r\n\r\n  // Tags section (work areas from JSON payload)\r\n  const workAreas =\r\n    result.listMetadata && result.listMetadata[\"Work area\"]\r\n      ? result.listMetadata[\"Work area\"]\r\n      : [];\r\n  if (workAreas && workAreas.length > 0) {\r\n    const tagsContainer = document.createElement(\"div\");\r\n    tagsContainer.className = \"aikb-search-card__tags\";\r\n\r\n    // Create a tag for each work area\r\n    workAreas.forEach((workArea) => {\r\n      if (workArea && workArea.trim()) {\r\n        const tag = document.createElement(\"div\");\r\n        tag.className = \"aikb-search-card__tag\";\r\n        tag.textContent = workArea.trim();\r\n        tagsContainer.appendChild(tag);\r\n      }\r\n    });\r\n\r\n    if (tagsContainer.children.length > 0) {\r\n      content.appendChild(tagsContainer);\r\n    }\r\n  }\r\n\r\n  inner.appendChild(content);\r\n\r\n  // Actions section\r\n  const actions = document.createElement(\"div\");\r\n  actions.className = \"aikb-search-card__actions\";\r\n\r\n  // \"See more\" button\r\n  const button = document.createElement(\"a\");\r\n  button.href = result.liveUrl;\r\n  button.className = \"ntgc-btn ntgc-btn--secondary\";\r\n\r\n  const buttonText = document.createElement(\"span\");\r\n  buttonText.textContent = \"See more\";\r\n  button.appendChild(buttonText);\r\n\r\n  const icon = document.createElement(\"span\");\r\n  icon.className = \"fal fa-long-arrow-right\";\r\n  icon.setAttribute(\"aria-hidden\", \"true\");\r\n  button.appendChild(icon);\r\n\r\n  actions.appendChild(button);\r\n\r\n  // Metadata section\r\n  const metadata = document.createElement(\"div\");\r\n  metadata.className = \"aikb-search-card__metadata\";\r\n\r\n  // \"Good for\" row (roles from JSON payload)\r\n  const roles =\r\n    result.listMetadata && result.listMetadata[\"Roles\"]\r\n      ? result.listMetadata[\"Roles\"]\r\n      : [];\r\n  if (roles && roles.length > 0) {\r\n    const usefulRow = document.createElement(\"div\");\r\n    usefulRow.className = \"aikb-search-card__useful-for\";\r\n\r\n    const value = document.createElement(\"span\");\r\n    value.className = \"aikb-search-card__useful-value\";\r\n\r\n    const label = document.createElement(\"strong\");\r\n    label.textContent = \"Good for: \";\r\n    value.appendChild(label);\r\n\r\n    const text = document.createTextNode(roles.join(\", \"));\r\n    value.appendChild(text);\r\n\r\n    usefulRow.appendChild(value);\r\n\r\n    metadata.appendChild(usefulRow);\r\n  }\r\n\r\n  // Last updated date\r\n  if (result.date) {\r\n    const dateEl = document.createElement(\"div\");\r\n    dateEl.className = \"aikb-search-card__date\";\r\n    dateEl.textContent = `Last updated: ${formatDate(result.date)}`;\r\n    metadata.appendChild(dateEl);\r\n  }\r\n\r\n  actions.appendChild(metadata);\r\n  inner.appendChild(actions);\r\n\r\n  card.appendChild(inner);\r\n\r\n  return card;\r\n}\r\n\r\n/**\r\n * Render search results to the container\r\n * @param {Array<Object>} results - Array of result objects\r\n * @param {string} containerId - ID of the container element (default: \"search-results-list\")\r\n * @param {boolean} usePagination - Whether to use pagination (default: true)\r\n */\r\nexport function renderResults(\r\n  results,\r\n  containerId = \"search-results-list\",\r\n  usePagination = true,\r\n) {\r\n  console.log(\r\n    `renderResults called with ${results.length} results for container #${containerId}`,\r\n  );\r\n\r\n  // Try multiple selection methods\r\n  let container = document.getElementById(containerId);\r\n  console.log(`document.getElementById(\"${containerId}\"):`, container);\r\n\r\n  if (!container) {\r\n    // Try jQuery selector as fallback\r\n    const $container = window.$ ? window.$(`#${containerId}`) : null;\r\n    console.log(`jQuery selector $(\"#${containerId}\"):`, $container);\r\n    container = $container && $container.length > 0 ? $container[0] : null;\r\n  }\r\n\r\n  if (!container) {\r\n    console.error(`Container #${containerId} not found`);\r\n    console.log(\r\n      \"Available elements with id:\",\r\n      Array.from(document.querySelectorAll(\"[id]\")).map((el) => el.id),\r\n    );\r\n    return;\r\n  }\r\n\r\n  // Clear existing content\r\n  container.innerHTML = \"\";\r\n\r\n  if (results.length === 0) {\r\n    const noResults = document.createElement(\"p\");\r\n    noResults.textContent = \"No results found.\";\r\n    noResults.style.padding = \"24px 48px\";\r\n    container.appendChild(noResults);\r\n    return;\r\n  }\r\n\r\n  // Initialize or update pagination\r\n  if (usePagination) {\r\n    // Dynamic import to avoid circular dependencies\r\n    import(\"./pagination.js\").then(\r\n      ({ initializePagination, getCurrentPageResults }) => {\r\n        initializePagination(results, 10);\r\n        const pageResults = getCurrentPageResults();\r\n\r\n        // Render cards for current page\r\n        const cards = pageResults\r\n          .map((result) => createSearchCard(result))\r\n          .filter((card) => card !== null);\r\n\r\n        cards.forEach((card) => container.appendChild(card));\r\n        console.log(\r\n          `Rendered ${cards.length} of ${results.length} search result cards (page 1)`,\r\n        );\r\n      },\r\n    );\r\n  } else {\r\n    // Render all cards without pagination\r\n    const cards = results\r\n      .map((result) => createSearchCard(result))\r\n      .filter((card) => card !== null);\r\n\r\n    cards.forEach((card) => container.appendChild(card));\r\n    console.log(`Rendered ${cards.length} search result cards`);\r\n  }\r\n}\r\n\r\n// Expose globally for legacy usage\r\nwindow.aikbRenderResults = renderResults;\r\n\r\n// Listen for pagination page changes\r\ndocument.addEventListener(\"aikb-pagination-change\", (event) => {\r\n  const { results } = event.detail;\r\n  const container = document.getElementById(\"search-results-list\");\r\n\r\n  if (container && results) {\r\n    container.innerHTML = \"\";\r\n\r\n    const cards = results\r\n      .map((result) => createSearchCard(result))\r\n      .filter((card) => card !== null);\r\n\r\n    cards.forEach((card) => container.appendChild(card));\r\n    console.log(`Rendered ${cards.length} cards for page ${event.detail.page}`);\r\n  }\r\n});\r\n", "/**\r\n * Custom Multi-Select Dropdown Component\r\n * Replaces the work area filter with a multi-select dropdown with OK/Cancel buttons\r\n */\r\n\r\nexport class MultiSelectDropdown {\r\n  constructor(selectElement) {\r\n    this.selectElement = selectElement;\r\n    this.options = [];\r\n    this.selectedValues = new Set();\r\n    this.tempSelectedValues = new Set();\r\n    this.isOpen = false;\r\n\r\n    this.container = null;\r\n    this.displayButton = null;\r\n    this.dropdownPanel = null;\r\n\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    // Hide original select element\r\n    this.selectElement.style.display = \"none\";\r\n\r\n    // Create custom dropdown structure\r\n    this.createDropdownStructure();\r\n\r\n    // Select all options by default\r\n    this.selectAllByDefault();\r\n\r\n    // Bind event listeners\r\n    this.bindEvents();\r\n\r\n    // Store instance reference on container for external access\r\n    this.container.__multiSelectInstance = this;\r\n  }\r\n\r\n  selectAllByDefault() {\r\n    // Add all option values to selectedValues\r\n    this.options.forEach((option) => {\r\n      this.selectedValues.add(option.value);\r\n    });\r\n\r\n    // Sync with native select\r\n    this.syncNativeSelect();\r\n\r\n    // Update display text\r\n    this.updateDisplayText();\r\n\r\n    // Update checkboxes\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n  }\r\n\r\n  createDropdownStructure() {\r\n    // Main container\r\n    this.container = document.createElement(\"div\");\r\n    this.container.className = \"aikb-multiselect-container\";\r\n\r\n    // Display button (shows selected items)\r\n    this.displayButton = document.createElement(\"button\");\r\n    this.displayButton.type = \"button\";\r\n    this.displayButton.className = \"aikb-multiselect-button\";\r\n    this.displayButton.innerHTML = `\r\n      <span class=\"aikb-multiselect-text\">Select Options</span>\r\n      <span class=\"aikb-multiselect-icon\"></span>\r\n    `;\r\n\r\n    // Dropdown panel\r\n    this.dropdownPanel = document.createElement(\"div\");\r\n    this.dropdownPanel.className = \"aikb-multiselect-panel\";\r\n    this.dropdownPanel.style.display = \"none\";\r\n\r\n    // Options list\r\n    const optionsList = document.createElement(\"div\");\r\n    optionsList.className = \"aikb-multiselect-options\";\r\n\r\n    // Add \"Select All\" option\r\n    const selectAllItem = this.createOptionItem({\r\n      value: \"_select_all\",\r\n      label: \"Select All\",\r\n      isSelectAll: true,\r\n    });\r\n    optionsList.appendChild(selectAllItem);\r\n\r\n    // Get options from original select element\r\n    Array.from(this.selectElement.options).forEach((option) => {\r\n      if (!option.disabled && option.value) {\r\n        this.options.push({\r\n          value: option.value,\r\n          label: option.textContent,\r\n        });\r\n\r\n        const optionItem = this.createOptionItem({\r\n          value: option.value,\r\n          label: option.textContent,\r\n        });\r\n        optionsList.appendChild(optionItem);\r\n      }\r\n    });\r\n\r\n    // Action buttons\r\n    const actionsContainer = document.createElement(\"div\");\r\n    actionsContainer.className = \"aikb-multiselect-actions\";\r\n\r\n    const okButton = document.createElement(\"button\");\r\n    okButton.type = \"button\";\r\n    okButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-ok\";\r\n    okButton.textContent = \"OK\";\r\n    okButton.addEventListener(\"click\", () => this.handleOk());\r\n\r\n    const cancelButton = document.createElement(\"button\");\r\n    cancelButton.type = \"button\";\r\n    cancelButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-cancel\";\r\n    cancelButton.textContent = \"Cancel\";\r\n    cancelButton.addEventListener(\"click\", () => this.handleCancel());\r\n\r\n    actionsContainer.appendChild(okButton);\r\n    actionsContainer.appendChild(cancelButton);\r\n\r\n    // Assemble dropdown panel\r\n    this.dropdownPanel.appendChild(optionsList);\r\n    this.dropdownPanel.appendChild(actionsContainer);\r\n\r\n    // Assemble container\r\n    this.container.appendChild(this.displayButton);\r\n    this.container.appendChild(this.dropdownPanel);\r\n\r\n    // Insert after original select\r\n    this.selectElement.parentNode.insertBefore(\r\n      this.container,\r\n      this.selectElement.nextSibling,\r\n    );\r\n  }\r\n\r\n  createOptionItem(option) {\r\n    const item = document.createElement(\"label\");\r\n    item.className = \"aikb-multiselect-option\";\r\n    if (option.isSelectAll) {\r\n      item.classList.add(\"aikb-multiselect-option-all\");\r\n    }\r\n\r\n    const checkbox = document.createElement(\"input\");\r\n    checkbox.type = \"checkbox\";\r\n    checkbox.className = \"aikb-multiselect-checkbox\";\r\n    checkbox.value = option.value;\r\n    checkbox.dataset.label = option.label;\r\n\r\n    if (option.isSelectAll) {\r\n      checkbox.addEventListener(\"change\", (e) => this.handleSelectAll(e));\r\n    } else {\r\n      checkbox.addEventListener(\"change\", () => this.updateSelectAllState());\r\n    }\r\n\r\n    const labelText = document.createElement(\"span\");\r\n    labelText.className = \"aikb-multiselect-label\";\r\n    labelText.textContent = option.label;\r\n\r\n    item.appendChild(checkbox);\r\n    item.appendChild(labelText);\r\n\r\n    return item;\r\n  }\r\n\r\n  bindEvents() {\r\n    // Toggle dropdown on button click\r\n    this.displayButton.addEventListener(\"click\", (e) => {\r\n      e.stopPropagation();\r\n      this.toggle();\r\n    });\r\n\r\n    // Close dropdown when clicking outside\r\n    document.addEventListener(\"click\", (e) => {\r\n      if (!this.container.contains(e.target) && this.isOpen) {\r\n        this.handleCancel();\r\n      }\r\n    });\r\n  }\r\n\r\n  toggle() {\r\n    if (this.isOpen) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  }\r\n\r\n  open() {\r\n    this.isOpen = true;\r\n    this.dropdownPanel.style.display = \"block\";\r\n    this.displayButton.classList.add(\"aikb-multiselect-open\");\r\n\r\n    // Copy current selections to temp\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n\r\n    // Update checkboxes to match temp selections\r\n    this.updateCheckboxes();\r\n  }\r\n\r\n  close() {\r\n    this.isOpen = false;\r\n    this.dropdownPanel.style.display = \"none\";\r\n    this.displayButton.classList.remove(\"aikb-multiselect-open\");\r\n  }\r\n\r\n  handleOk() {\r\n    // Get checked values\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n    this.selectedValues.clear();\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      if (checkbox.checked) {\r\n        this.selectedValues.add(checkbox.value);\r\n      }\r\n    });\r\n\r\n    // Sync the hidden native select so downstream code sees selectedOptions\r\n    this.syncNativeSelect();\r\n\r\n    // Update display text\r\n    this.updateDisplayText();\r\n\r\n    // Trigger change event\r\n    this.triggerChange();\r\n\r\n    // Close dropdown\r\n    this.close();\r\n  }\r\n\r\n  handleCancel() {\r\n    // Revert to previous selections\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n    this.updateCheckboxes();\r\n\r\n    // Close dropdown\r\n    this.close();\r\n  }\r\n\r\n  handleSelectAll(e) {\r\n    const isChecked = e.target.checked;\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      checkbox.checked = isChecked;\r\n    });\r\n  }\r\n\r\n  updateSelectAllState() {\r\n    const selectAllCheckbox = this.dropdownPanel.querySelector(\r\n      '.aikb-multiselect-checkbox[value=\"_select_all\"]',\r\n    );\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n    const checkedCount = Array.from(checkboxes).filter(\r\n      (cb) => cb.checked,\r\n    ).length;\r\n\r\n    if (selectAllCheckbox) {\r\n      selectAllCheckbox.checked = checkedCount === checkboxes.length;\r\n      selectAllCheckbox.indeterminate =\r\n        checkedCount > 0 && checkedCount < checkboxes.length;\r\n    }\r\n  }\r\n\r\n  updateCheckboxes() {\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      checkbox.checked = this.tempSelectedValues.has(checkbox.value);\r\n    });\r\n\r\n    this.updateSelectAllState();\r\n  }\r\n\r\n  updateDisplayText() {\r\n    const textElement = this.displayButton.querySelector(\r\n      \".aikb-multiselect-text\",\r\n    );\r\n\r\n    if (this.selectedValues.size === 0) {\r\n      textElement.textContent = \"Select Options\";\r\n      textElement.classList.remove(\"aikb-multiselect-has-selection\");\r\n    } else if (this.selectedValues.size === this.options.length) {\r\n      textElement.textContent = \"All selected\";\r\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\r\n    } else {\r\n      const selectedLabels = Array.from(this.selectedValues).map((value) => {\r\n        const option = this.options.find((opt) => opt.value === value);\r\n        return option ? option.label : value;\r\n      });\r\n\r\n      if (this.selectedValues.size <= 2) {\r\n        textElement.textContent = selectedLabels.join(\", \");\r\n      } else {\r\n        textElement.textContent = `${this.selectedValues.size} selected`;\r\n      }\r\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\r\n    }\r\n  }\r\n\r\n  triggerChange() {\r\n    // Dispatch custom event\r\n    const event = new CustomEvent(\"multiselect-change\", {\r\n      detail: {\r\n        values: Array.from(this.selectedValues),\r\n      },\r\n    });\r\n    this.container.dispatchEvent(event);\r\n\r\n    // Also emit a native change event on the original select so listeners fire\r\n    if (this.selectElement) {\r\n      const changeEvent = new Event(\"change\", { bubbles: true });\r\n      this.selectElement.dispatchEvent(changeEvent);\r\n    }\r\n\r\n    console.log(\"Multi-select changed:\", Array.from(this.selectedValues));\r\n  }\r\n\r\n  syncNativeSelect() {\r\n    if (!this.selectElement) return;\r\n\r\n    // Clear existing selection\r\n    Array.from(this.selectElement.options).forEach((opt) => {\r\n      opt.selected = false;\r\n    });\r\n\r\n    // Apply new selections\r\n    Array.from(this.selectElement.options).forEach((opt) => {\r\n      if (this.selectedValues.has(opt.value)) {\r\n        opt.selected = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  getSelectedValues() {\r\n    return Array.from(this.selectedValues);\r\n  }\r\n\r\n  reset() {\r\n    this.selectedValues.clear();\r\n    this.tempSelectedValues.clear();\r\n    this.updateDisplayText();\r\n    this.updateCheckboxes();\r\n  }\r\n\r\n  /**\r\n   * Update option labels with counts\r\n   * @param {Map<string, number>} countsMap - Map of option values to counts\r\n   */\r\n  updateCounts(countsMap) {\r\n    // Update native select options\r\n    Array.from(this.selectElement.options).forEach((option) => {\r\n      if (!option.disabled && option.value && countsMap.has(option.value)) {\r\n        const count = countsMap.get(option.value);\r\n        const baseLabel = option.textContent.replace(/\\s*\\(\\d+\\)\\s*$/, \"\"); // Remove existing count\r\n\r\n        // Only add count suffix if count > 0\r\n        if (count > 0) {\r\n          option.textContent = `${baseLabel} (${count})`;\r\n        } else {\r\n          option.textContent = baseLabel;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Update custom dropdown labels\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      const value = checkbox.value;\r\n      if (countsMap.has(value)) {\r\n        const count = countsMap.get(value);\r\n        const labelSpan = checkbox.parentElement.querySelector(\r\n          \".aikb-multiselect-label\",\r\n        );\r\n        if (labelSpan) {\r\n          // Remove existing badge or count text\r\n          const existingBadge = labelSpan.querySelector(\".aikb-count-badge\");\r\n          if (existingBadge) {\r\n            existingBadge.remove();\r\n          }\r\n          \r\n          // Get base label text without count\r\n          let baseLabel = labelSpan.textContent.replace(/\\s*\\(\\d+\\)\\s*$/, \"\").trim();\r\n          \r\n          // Clear and rebuild label content\r\n          labelSpan.textContent = baseLabel;\r\n\r\n          // Only add count badge if count > 0\r\n          if (count > 0) {\r\n            const badge = document.createElement(\"span\");\r\n            badge.className = \"aikb-count-badge\";\r\n            badge.textContent = count.toString();\r\n            labelSpan.appendChild(badge);\r\n            \r\n            // Update option in this.options array for display text calculation\r\n            const optionIndex = this.options.findIndex(\r\n              (opt) => opt.value === value,\r\n            );\r\n            if (optionIndex !== -1) {\r\n              this.options[optionIndex].label = `${baseLabel} (${count})`;\r\n            }\r\n          } else {\r\n            // Update option in this.options array without count\r\n            const optionIndex = this.options.findIndex(\r\n              (opt) => opt.value === value,\r\n            );\r\n            if (optionIndex !== -1) {\r\n              this.options[optionIndex].label = baseLabel;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Update display text to reflect new labels\r\n    this.updateDisplayText();\r\n\r\n    console.log(\"Multi-select counts updated\");\r\n  }\r\n\r\n  destroy() {\r\n    // Remove the custom dropdown container from DOM\r\n    if (this.container && this.container.parentNode) {\r\n      this.container.parentNode.removeChild(this.container);\r\n    }\r\n\r\n    // Show the original select element\r\n    if (this.selectElement) {\r\n      this.selectElement.style.display = \"\";\r\n    }\r\n\r\n    // Clear references\r\n    this.container = null;\r\n    this.displayButton = null;\r\n    this.dropdownPanel = null;\r\n\r\n    console.log(\"Multi-select instance destroyed\");\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize multi-select dropdown on a select element\r\n * @param {string|HTMLElement} selector - CSS selector or DOM element\r\n * @returns {MultiSelectDropdown} - MultiSelectDropdown instance\r\n */\r\nexport function initMultiSelect(selector) {\r\n  const element =\r\n    typeof selector === \"string\" ? document.querySelector(selector) : selector;\r\n\r\n  if (!element) {\r\n    console.warn(\"Multi-select element not found:\", selector);\r\n    return null;\r\n  }\r\n\r\n  return new MultiSelectDropdown(element);\r\n}\r\n", "/**\r\n * Dynamically create the search input and icon to match the attached design\r\n */\r\nexport function populateSearchInput() {\r\n  const container = document.getElementById(\"search-container\");\r\n  if (!container) return;\r\n  container.innerHTML = \"\";\r\n\r\n  // Outer wrapper\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.style.width = \"100%\";\r\n  wrapper.style.height = \"100%\";\r\n  wrapper.style.padding = \"24px\";\r\n  wrapper.style.background = \"var(--clr-surface-primary, white)\";\r\n  wrapper.style.overflow = \"hidden\";\r\n  wrapper.style.outline = \"1px var(--clr-stroke-default, #AFB5BF) solid\";\r\n  wrapper.style.outlineOffset = \"-1px\";\r\n  wrapper.style.justifyContent = \"flex-start\";\r\n  wrapper.style.alignItems = \"center\";\r\n  wrapper.style.gap = \"10px\";\r\n  wrapper.style.display = \"inline-flex\";\r\n\r\n  // Inner flex\r\n  const inner = document.createElement(\"div\");\r\n  inner.style.flex = \"1 1 0\";\r\n  inner.style.justifyContent = \"space-between\";\r\n  inner.style.alignItems = \"center\";\r\n  inner.style.display = \"flex\";\r\n\r\n  // Placeholder text\r\n  const placeholder = document.createElement(\"div\");\r\n  placeholder.textContent = \"Search for a AI prompt or use case...\";\r\n  placeholder.style.color = \"var(--clr-text-helper, #606A80)\";\r\n  placeholder.style.fontSize = \"16px\";\r\n  placeholder.style.fontFamily = \"Roboto\";\r\n  placeholder.style.fontWeight = \"400\";\r\n  placeholder.style.lineHeight = \"24px\";\r\n  placeholder.style.wordWrap = \"break-word\";\r\n\r\n  // Icon container\r\n  const iconContainer = document.createElement(\"div\");\r\n  iconContainer.setAttribute(\"data-colour\", \"NTGC blue\");\r\n  iconContainer.style.width = \"24px\";\r\n  iconContainer.style.height = \"24px\";\r\n  iconContainer.style.position = \"relative\";\r\n  iconContainer.style.overflow = \"hidden\";\r\n\r\n  // Icon (small colored div)\r\n  const icon = document.createElement(\"div\");\r\n  icon.style.width = \"20px\";\r\n  icon.style.height = \"20px\";\r\n  icon.style.left = \"2px\";\r\n  icon.style.top = \"2px\";\r\n  icon.style.position = \"absolute\";\r\n  icon.style.background = \"var(--clr-icon-subtle, #878F9F)\";\r\n\r\n  iconContainer.appendChild(icon);\r\n  inner.appendChild(placeholder);\r\n  inner.appendChild(iconContainer);\r\n  wrapper.appendChild(inner);\r\n  container.appendChild(wrapper);\r\n}\r\n// Dynamically populate work area and sort dropdowns from search data\r\nimport { initMultiSelect } from \"./multi-select-dropdown.js\";\r\n\r\nlet multiSelectInstance = null;\r\nlet staticWorkAreas = [];\r\n\r\n/**\r\n * Extract unique work areas from search results (used as fallback if static fetch fails)\r\n * @param {Array} results - Array of search result objects\r\n * @returns {Array<string>} - Sorted array of unique work area values\r\n */\r\nfunction extractWorkAreas(results) {\r\n  const workAreaSet = new Set();\r\n\r\n  results.forEach((result) => {\r\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\r\n      const workAreas = result.listMetadata[\"Work area\"];\r\n      // Work areas is already an array\r\n      if (Array.isArray(workAreas)) {\r\n        workAreas.forEach((area) => {\r\n          const trimmed = area.trim();\r\n          if (trimmed) {\r\n            workAreaSet.add(trimmed);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // Convert to array and sort alphabetically\r\n  return Array.from(workAreaSet).sort((a, b) => {\r\n    // Put \"All work areas\" first if it exists\r\n    if (a === \"All work areas\") return -1;\r\n    if (b === \"All work areas\") return 1;\r\n    return a.localeCompare(b);\r\n  });\r\n}\r\n\r\n/**\r\n * Calculate counts for each work area from search results\r\n * @param {Array<string>} workAreas - Array of work area names\r\n * @param {Array} results - Array of search result objects\r\n * @returns {Map<string, number>} Map of work area names to counts\r\n */\r\nexport function calculateWorkAreaCounts(workAreas, results) {\r\n  const counts = new Map();\r\n\r\n  // Initialize all work areas with 0 count\r\n  workAreas.forEach((workArea) => {\r\n    counts.set(workArea, 0);\r\n  });\r\n\r\n  // Count occurrences in results\r\n  results.forEach((result) => {\r\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\r\n      const resultWorkAreas = result.listMetadata[\"Work area\"];\r\n      if (Array.isArray(resultWorkAreas)) {\r\n        resultWorkAreas.forEach((area) => {\r\n          const trimmed = area.trim();\r\n          if (trimmed && counts.has(trimmed)) {\r\n            counts.set(trimmed, counts.get(trimmed) + 1);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // Set count for \"All work areas\" to total results\r\n  if (counts.has(\"All work areas\")) {\r\n    counts.set(\"All work areas\", results.length);\r\n  }\r\n\r\n  return counts;\r\n}\r\n\r\n/**\r\n * Store static work areas list for later use\r\n * @param {Array<string>} workAreas - Array of work area names from static source\r\n */\r\nexport function setStaticWorkAreas(workAreas) {\r\n  staticWorkAreas = workAreas;\r\n  console.log(`Stored ${workAreas.length} static work areas`);\r\n}\r\n\r\n/**\r\n * Populate work area dropdown with dynamic options\r\n * @param {Array<string>} workAreas - Array of work area values\r\n */\r\nfunction populateWorkAreaDropdown(workAreas) {\r\n  const dropdown = document.getElementById(\"document_type\");\r\n  if (!dropdown) {\r\n    console.warn(\"Work area dropdown #document_type not found\");\r\n    return;\r\n  }\r\n\r\n  // Clear existing options\r\n  dropdown.innerHTML = \"\";\r\n\r\n  // Add default \"Select a work area\" option\r\n  const defaultOption = document.createElement(\"option\");\r\n  defaultOption.value = \"\";\r\n  defaultOption.textContent = \"Select a work area\";\r\n  defaultOption.disabled = true;\r\n  defaultOption.selected = true;\r\n  dropdown.appendChild(defaultOption);\r\n\r\n  // Add work area options\r\n  workAreas.forEach((workArea) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = workArea;\r\n    option.textContent = workArea;\r\n    dropdown.appendChild(option);\r\n  });\r\n\r\n  console.log(`Populated work area dropdown with ${workAreas.length} options`);\r\n\r\n  // Initialize multi-select after populating options\r\n  if (multiSelectInstance) {\r\n    // Destroy previous instance if exists\r\n    multiSelectInstance.destroy();\r\n    multiSelectInstance = null;\r\n  }\r\n\r\n  // Only initialize if not already initialized\r\n  if (\r\n    !dropdown.nextElementSibling ||\r\n    !dropdown.nextElementSibling.classList.contains(\r\n      \"aikb-multiselect-container\",\r\n    )\r\n  ) {\r\n    multiSelectInstance = initMultiSelect(dropdown);\r\n  }\r\n}\r\n\r\n/**\r\n * Populate sort dropdown with sort options\r\n */\r\nfunction populateSortDropdown() {\r\n  const container = document.getElementById(\"select-question-3\");\r\n  if (!container) {\r\n    console.warn(\"Sort dropdown container #select-question-3 not found\");\r\n    return;\r\n  }\r\n\r\n  // Check if dropdown already exists\r\n  let dropdown = document.getElementById(\"owner\");\r\n\r\n  // If dropdown doesn't exist, create the entire structure\r\n  if (!dropdown) {\r\n    // Clear container content (except label)\r\n    const label = container.querySelector(\"label\");\r\n    container.innerHTML = \"\";\r\n    if (label) {\r\n      container.appendChild(label);\r\n    } else {\r\n      // Create label if it doesn't exist\r\n      const newLabel = document.createElement(\"label\");\r\n      newLabel.className = \"ntgc-form-input--label\";\r\n      newLabel.setAttribute(\"for\", \"select-input-2\");\r\n      newLabel.textContent = \"Sort\";\r\n      container.appendChild(newLabel);\r\n    }\r\n\r\n    // Create dropdown wrapper\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.className = \"aikb-dropdown-wrapper\";\r\n\r\n    // Create inner wrapper\r\n    const inner = document.createElement(\"div\");\r\n    inner.className = \"aikb-dropdown-inner\";\r\n\r\n    // Create select element\r\n    dropdown = document.createElement(\"select\");\r\n    dropdown.name = \"sort\";\r\n    dropdown.className =\r\n      \"ntgc-select ntgc-select--block ntgc-select-input--filter\";\r\n    dropdown.id = \"owner\";\r\n\r\n    // Append elements\r\n    inner.appendChild(dropdown);\r\n    wrapper.appendChild(inner);\r\n    container.appendChild(wrapper);\r\n  } else {\r\n    // Clear existing options if dropdown exists\r\n    dropdown.innerHTML = \"\";\r\n  }\r\n\r\n  // Define sort options\r\n  const sortOptions = [\r\n    { value: \"relevance\", label: \"Relevance\", selected: true },\r\n    { value: \"date-newest\", label: \"Date (newest first)\" },\r\n    { value: \"date-oldest\", label: \"Date (oldest first)\" },\r\n    { value: \"title-az\", label: \"Title (A-Z)\" },\r\n    { value: \"title-za\", label: \"Title (Z-A)\" },\r\n  ];\r\n\r\n  // Add options to dropdown\r\n  sortOptions.forEach((opt) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = opt.value;\r\n    option.textContent = opt.label;\r\n    if (opt.selected) option.selected = true;\r\n    dropdown.appendChild(option);\r\n  });\r\n\r\n  console.log(`Populated sort dropdown with ${sortOptions.length} options`);\r\n}\r\n\r\n/**\r\n * Add chevron-down icons to dropdowns\r\n * Icons are displayed via CSS ::before pseudo-elements\r\n */\r\nfunction addDropdownIcons() {\r\n  // Add icon to work area dropdown\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  if (\r\n    workAreaDropdown &&\r\n    !workAreaDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\r\n  ) {\r\n    const icon = document.createElement(\"div\");\r\n    icon.className = \"aikb-dropdown-icon\";\r\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\r\n\r\n    const wrapper = workAreaDropdown.closest(\".aikb-dropdown-wrapper\");\r\n    if (wrapper) {\r\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\r\n      if (inner) {\r\n        inner.appendChild(icon);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add icon to sort dropdown\r\n  const sortDropdown = document.getElementById(\"owner\");\r\n  if (\r\n    sortDropdown &&\r\n    !sortDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\r\n  ) {\r\n    const icon = document.createElement(\"div\");\r\n    icon.className = \"aikb-dropdown-icon\";\r\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\r\n\r\n    const wrapper = sortDropdown.closest(\".aikb-dropdown-wrapper\");\r\n    if (wrapper) {\r\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\r\n      if (inner) {\r\n        inner.appendChild(icon);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize dropdowns with data from search results\r\n * @param {Array} results - Array of search result objects\r\n * @param {Array<string>} workAreasFromFetch - Optional pre-fetched work areas list\r\n */\r\nexport function initializeDropdowns(results, workAreasFromFetch = null) {\r\n  console.log(\"Initializing dropdowns with search data...\");\r\n\r\n  // Use static work areas if available, otherwise extract from results\r\n  let workAreas;\r\n  if (workAreasFromFetch && workAreasFromFetch.length > 0) {\r\n    workAreas = workAreasFromFetch;\r\n    console.log(\"Using pre-fetched static work areas list\");\r\n  } else if (staticWorkAreas.length > 0) {\r\n    workAreas = staticWorkAreas;\r\n    console.log(\"Using stored static work areas list\");\r\n  } else {\r\n    workAreas = extractWorkAreas(results);\r\n    console.log(\"Extracted work areas from results (fallback)\");\r\n  }\r\n\r\n  populateWorkAreaDropdown(workAreas);\r\n\r\n  // Calculate and apply counts\r\n  const counts = calculateWorkAreaCounts(workAreas, results);\r\n  if (multiSelectInstance) {\r\n    multiSelectInstance.updateCounts(counts);\r\n  }\r\n\r\n  // Populate sort options\r\n  populateSortDropdown();\r\n\r\n  // Add chevron icons\r\n  addDropdownIcons();\r\n\r\n  console.log(\"Dropdowns initialized successfully\");\r\n}\r\n\r\n/**\r\n * Get the current multi-select instance\r\n * @returns {object|null} The multi-select instance or null\r\n */\r\nexport function getMultiSelectInstance() {\r\n  return multiSelectInstance;\r\n}\r\n\r\n/**\r\n * Initialize on page load with empty state\r\n */\r\nexport function initializeEmptyDropdowns() {\r\n  console.log(\"Initializing dropdowns with default state...\");\r\n\r\n  // Dynamically create the search input and icon\r\n  populateSearchInput();\r\n\r\n  // Populate sort options (not data-dependent)\r\n  populateSortDropdown();\r\n\r\n  // Add default \"Select a work area\" to work area dropdown\r\n  populateWorkAreaDropdown([]);\r\n\r\n  // Add chevron icons\r\n  addDropdownIcons();\r\n\r\n  console.log(\"Empty dropdowns initialized\");\r\n}\r\n", "/**\r\n * Applied Filters Display Module\r\n * Manages the display and interaction of applied filter pills\r\n */\r\n\r\n/**\r\n * Display applied filters as pills\r\n * @param {Object} filters - Object containing active filters\r\n */\r\nexport function displayAppliedFilters(filters) {\r\n  const section = document.getElementById(\"appliedFiltersSection\");\r\n  const container = document.getElementById(\"appliedFilters\");\r\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\r\n\r\n  if (!section || !container) {\r\n    console.warn(\"Applied filters section not found\");\r\n    return;\r\n  }\r\n\r\n  // Clear existing pills\r\n  container.innerHTML = \"\";\r\n\r\n  let hasFilters = false;\r\n\r\n  // Add search query pill (green)\r\n  if (filters.searchQuery && filters.searchQuery.trim()) {\r\n    hasFilters = true;\r\n    const pill = createFilterPill(\r\n      \"Search\",\r\n      filters.searchQuery,\r\n      \"bg-success\",\r\n      \"search\"\r\n    );\r\n    container.appendChild(pill);\r\n  }\r\n\r\n  // Add work area pills (primary blue)\r\n  if (filters.workAreas && filters.workAreas.length > 0) {\r\n    // Don't show pills if all work areas are selected\r\n    const allWorkAreasSelected = isAllWorkAreasSelected(filters.workAreas);\r\n\r\n    if (!allWorkAreasSelected) {\r\n      hasFilters = true;\r\n      filters.workAreas.forEach((workArea) => {\r\n        const pill = createFilterPill(\r\n          \"Work area\",\r\n          workArea,\r\n          \"bg-primary\",\r\n          \"work-area\",\r\n          workArea\r\n        );\r\n        container.appendChild(pill);\r\n      });\r\n    }\r\n  }\r\n\r\n  // Do not add sort pill\r\n\r\n  // Always show Clear All button when any filter is active\r\n  if (clearAllBtn) {\r\n    clearAllBtn.style.display = hasFilters ? \"inline-flex\" : \"none\";\r\n    clearAllBtn.style.marginLeft = \"8px\";\r\n    clearAllBtn.style.verticalAlign = \"middle\";\r\n    clearAllBtn.style.alignItems = \"center\";\r\n    container.appendChild(clearAllBtn);\r\n  }\r\n\r\n  // Show/hide section based on whether filters are active\r\n  section.style.display = hasFilters ? \"block\" : \"none\";\r\n}\r\n\r\n/**\r\n * Check if all work areas are selected\r\n * @param {Array} selectedWorkAreas - Currently selected work areas\r\n * @returns {boolean}\r\n */\r\nfunction isAllWorkAreasSelected(selectedWorkAreas) {\r\n  const dropdown = document.getElementById(\"document_type\");\r\n  if (!dropdown) return false;\r\n\r\n  const totalOptions = Array.from(dropdown.options).filter(\r\n    (opt) => !opt.disabled && opt.value\r\n  ).length;\r\n\r\n  return selectedWorkAreas.length === totalOptions;\r\n}\r\n\r\n/**\r\n * Get user-friendly label for sort option\r\n * @param {string} sortValue - Sort value\r\n * @returns {string} - User-friendly label\r\n */\r\nfunction getSortLabel(sortValue) {\r\n  const sortLabels = {\r\n    relevance: \"Relevance\",\r\n    \"date-newest\": \"Date (newest first)\",\r\n    \"date-oldest\": \"Date (oldest first)\",\r\n    \"title-az\": \"Title (A-Z)\",\r\n    \"title-za\": \"Title (Z-A)\",\r\n  };\r\n  return sortLabels[sortValue] || sortValue;\r\n}\r\n\r\n/**\r\n * Create a filter pill element\r\n * @param {string} label - Filter category label\r\n * @param {string} value - Filter value\r\n * @param {string} badgeClass - Bootstrap badge class (bg-success, bg-primary, etc.)\r\n * @param {string} filterType - Type of filter for removal\r\n * @param {string} filterValue - Specific value to remove (for multi-value filters)\r\n * @returns {HTMLElement} - Filter pill element\r\n */\r\nfunction createFilterPill(label, value, badgeClass, filterType, filterValue) {\r\n  const pill = document.createElement(\"span\");\r\n  pill.className = `badge ${badgeClass} filter-pill d-inline-flex align-items-center`;\r\n\r\n  const pillLabel = document.createElement(\"span\");\r\n  pillLabel.className = \"pill-label\";\r\n  pillLabel.textContent = `${label}:`;\r\n\r\n  const pillValue = document.createElement(\"span\");\r\n  pillValue.className = \"pill-value\";\r\n  pillValue.textContent = value;\r\n\r\n  const removeButton = document.createElement(\"button\");\r\n  removeButton.type = \"button\";\r\n  removeButton.className = \"pill-remove\";\r\n  removeButton.title = `Remove ${label}: ${value}`;\r\n  removeButton.setAttribute(\"data-filter-type\", filterType);\r\n  if (filterValue) {\r\n    removeButton.setAttribute(\"data-filter-value\", filterValue);\r\n  }\r\n\r\n  const icon = document.createElement(\"span\");\r\n  icon.className = \"fas fa-times\";\r\n\r\n  removeButton.appendChild(icon);\r\n\r\n  // Add click handler\r\n  removeButton.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    removeFilter(filterType, filterValue);\r\n  });\r\n\r\n  pill.appendChild(pillLabel);\r\n  pill.appendChild(pillValue);\r\n  pill.appendChild(removeButton);\r\n\r\n  return pill;\r\n}\r\n\r\n/**\r\n * Remove a specific filter\r\n * @param {string} filterType - Type of filter to remove\r\n * @param {string} filterValue - Specific value to remove (optional)\r\n */\r\nasync function removeFilter(filterType, filterValue) {\r\n  console.log(`Removing filter: ${filterType}`, filterValue);\r\n\r\n  switch (filterType) {\r\n    case \"search\":\r\n      // Clear search input\r\n      const searchInput = document.getElementById(\"search\");\r\n      if (searchInput) {\r\n        searchInput.value = \"\";\r\n        // Trigger reload of initial results\r\n        const { loadInitialResults } = await import(\r\n          \"./load-initial-results.js\"\r\n        );\r\n        loadInitialResults();\r\n      }\r\n      break;\r\n\r\n    case \"work-area\":\r\n      // Unselect specific work area from multi-select\r\n      const workAreaDropdown = document.getElementById(\"document_type\");\r\n      if (workAreaDropdown && filterValue) {\r\n        const option = Array.from(workAreaDropdown.options).find(\r\n          (opt) => opt.value === filterValue\r\n        );\r\n        if (option) {\r\n          option.selected = false;\r\n        }\r\n\r\n        // Trigger change event to reapply filters\r\n        const changeEvent = new Event(\"change\", { bubbles: true });\r\n        workAreaDropdown.dispatchEvent(changeEvent);\r\n\r\n        // Also trigger for multi-select component if it exists\r\n        const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n        if (\r\n          multiSelectContainer &&\r\n          multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n        ) {\r\n          const instance = multiSelectContainer.__multiSelectInstance;\r\n          if (instance) {\r\n            instance.selectedValues.delete(filterValue);\r\n            instance.syncNativeSelect();\r\n            instance.updateDisplayText();\r\n            instance.triggerChange();\r\n          }\r\n        }\r\n      }\r\n      break;\r\n\r\n    // ...existing code...\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all filters\r\n */\r\nexport async function clearAllFilters() {\r\n  console.log(\"Clearing all filters\");\r\n\r\n  // Clear search input\r\n  const searchInput = document.getElementById(\"search\");\r\n  if (searchInput) {\r\n    searchInput.value = \"\";\r\n  }\r\n\r\n  // Reset work area dropdown to all selected\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  if (workAreaDropdown) {\r\n    Array.from(workAreaDropdown.options).forEach((opt) => {\r\n      if (!opt.disabled && opt.value) {\r\n        opt.selected = true;\r\n      }\r\n    });\r\n\r\n    // Update multi-select component if it exists\r\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n    if (\r\n      multiSelectContainer &&\r\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n    ) {\r\n      const instance = multiSelectContainer.__multiSelectInstance;\r\n      if (instance && typeof instance.selectAllByDefault === \"function\") {\r\n        instance.selectAllByDefault();\r\n        instance.triggerChange();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Hide applied filters section\r\n  const section = document.getElementById(\"appliedFiltersSection\");\r\n  if (section) {\r\n    section.style.display = \"none\";\r\n  }\r\n\r\n  // Reload initial results\r\n  const { loadInitialResults } = await import(\"./load-initial-results.js\");\r\n  loadInitialResults();\r\n}\r\n\r\n/**\r\n * Initialize \"Clear All\" button\r\n */\r\nexport function initClearAllButton() {\r\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\r\n  if (clearAllBtn) {\r\n    clearAllBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      clearAllFilters();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Get current filter state\r\n * @returns {Object} - Current filter state\r\n */\r\nexport function getCurrentFilters() {\r\n  const searchInput = document.getElementById(\"search\");\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  const sortDropdown =\r\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n  const filters = {\r\n    searchQuery: searchInput ? searchInput.value : \"\",\r\n    workAreas: [],\r\n    sort: sortDropdown ? sortDropdown.value : \"relevance\",\r\n  };\r\n\r\n  if (workAreaDropdown) {\r\n    const selectedOptions = Array.from(workAreaDropdown.selectedOptions || []);\r\n    filters.workAreas = selectedOptions\r\n      .map((opt) => opt.value)\r\n      .filter((val) => val && val.trim().length > 0);\r\n  }\r\n\r\n  return filters;\r\n}\r\n", "// Client-side filtering and sorting for search results\r\nimport { displayAppliedFilters, getCurrentFilters } from \"./applied-filters.js\";\r\n\r\nlet allResults = []; // Store all results for filtering/sorting\r\n\r\n/**\r\n * Store search results for filtering and sorting\r\n * @param {Array} results - Array of search result objects\r\n */\r\nexport function storeResults(results) {\r\n  allResults = results;\r\n  console.log(`Stored ${allResults.length} results for filtering/sorting`);\r\n}\r\n\r\n/**\r\n * Filter results by work area\r\n * @param {Array} selectedWorkAreas - Selected work area values\r\n * @returns {Array} - Filtered results\r\n */\r\nfunction filterByWorkArea(selectedWorkAreas) {\r\n  if (!selectedWorkAreas || selectedWorkAreas.length === 0) {\r\n    return allResults; // Return all if no filter selected\r\n  }\r\n\r\n  return allResults.filter((result) => {\r\n    if (!result.listMetadata || !result.listMetadata[\"Work area\"]) {\r\n      return false;\r\n    }\r\n\r\n    const resultWorkAreas = result.listMetadata[\"Work area\"];\r\n\r\n    // If result has \"All work areas\", it appears in all filtered views\r\n    if (resultWorkAreas.includes(\"All work areas\")) {\r\n      return true;\r\n    }\r\n\r\n    // Check if any selected work area matches\r\n    return selectedWorkAreas.some((selectedArea) =>\r\n      resultWorkAreas.includes(selectedArea)\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * Sort results by selected criteria\r\n * @param {Array} results - Results to sort\r\n * @param {string} sortBy - Sort criteria (relevance, date-newest, date-oldest, title-az, title-za)\r\n * @returns {Array} - Sorted results\r\n */\r\nfunction sortResults(results, sortBy) {\r\n  const sorted = [...results]; // Create copy to avoid mutating original\r\n\r\n  switch (sortBy) {\r\n    case \"relevance\":\r\n      // Sort by rank (lower is better) or score (higher is better)\r\n      sorted.sort((a, b) => {\r\n        if (a.rank && b.rank) {\r\n          return a.rank - b.rank;\r\n        }\r\n        if (a.score && b.score) {\r\n          return b.score - a.score;\r\n        }\r\n        return 0;\r\n      });\r\n      break;\r\n\r\n    case \"date-newest\":\r\n      sorted.sort((a, b) => {\r\n        const dateA = a.date ? new Date(a.date).getTime() : 0;\r\n        const dateB = b.date ? new Date(b.date).getTime() : 0;\r\n        return dateB - dateA; // Newest first\r\n      });\r\n      break;\r\n\r\n    case \"date-oldest\":\r\n      sorted.sort((a, b) => {\r\n        const dateA = a.date ? new Date(a.date).getTime() : 0;\r\n        const dateB = b.date ? new Date(b.date).getTime() : 0;\r\n        return dateA - dateB; // Oldest first\r\n      });\r\n      break;\r\n\r\n    case \"title-az\":\r\n      sorted.sort((a, b) => {\r\n        const titleA = a.title || \"\";\r\n        const titleB = b.title || \"\";\r\n        return titleA.localeCompare(titleB);\r\n      });\r\n      break;\r\n\r\n    case \"title-za\":\r\n      sorted.sort((a, b) => {\r\n        const titleA = a.title || \"\";\r\n        const titleB = b.title || \"\";\r\n        return titleB.localeCompare(titleA);\r\n      });\r\n      break;\r\n\r\n    default:\r\n      // No sorting or unknown sort option\r\n      break;\r\n  }\r\n\r\n  return sorted;\r\n}\r\n\r\n/**\r\n * Apply filters and sorting, then render results\r\n */\r\nasync function applyFiltersAndSort() {\r\n  // Get work area dropdown (may be multi-select)\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  // Support both legacy id=\"owner\" and current id=\"sort\"\r\n  const sortDropdown =\r\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n  if (!workAreaDropdown || !sortDropdown) {\r\n    console.warn(\"Required dropdowns not found (document_type or sort)\");\r\n    return;\r\n  }\r\n\r\n  // Get selected work areas\r\n  let selectedWorkAreas = [];\r\n  if (workAreaDropdown) {\r\n    const selectedOptions = Array.from(workAreaDropdown.selectedOptions || []);\r\n    // Remove empty/default values so an unselected state returns all results\r\n    selectedWorkAreas = selectedOptions\r\n      .map((opt) => opt.value)\r\n      .filter((val) => val && val.trim().length > 0);\r\n  }\r\n\r\n  const selectedSort = sortDropdown.value || \"relevance\";\r\n\r\n  console.log(\r\n    `Applying filters - Work Areas: [${selectedWorkAreas.join(\r\n      \", \"\r\n    )}], Sort: \"${selectedSort}\"`\r\n  );\r\n\r\n  // Filter by work areas\r\n  let filtered = filterByWorkArea(selectedWorkAreas);\r\n  console.log(`After filtering: ${filtered.length} results`);\r\n\r\n  // Sort results\r\n  let sorted = sortResults(filtered, selectedSort);\r\n  console.log(`After sorting: ${sorted.length} results`);\r\n\r\n  // Render filtered and sorted results\r\n  const { renderResults } = await import(\"./search-card-template.js\");\r\n  renderResults(sorted, \"search-results-list\");\r\n\r\n  // Display applied filters\r\n  const currentFilters = getCurrentFilters();\r\n  displayAppliedFilters(currentFilters);\r\n}\r\n\r\n/**\r\n * Initialize filter and sort listeners\r\n */\r\nexport function initializeFiltersAndSort() {\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  // Support both legacy id=\"owner\" and current id=\"sort\"\r\n  const sortDropdown =\r\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n  if (workAreaDropdown) {\r\n    workAreaDropdown.addEventListener(\"change\", function () {\r\n      console.log(\"Work area filter changed\");\r\n      applyFiltersAndSort();\r\n    });\r\n\r\n    // Listen for custom multi-select events (our custom component) to reapply filters\r\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n    if (\r\n      multiSelectContainer &&\r\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n    ) {\r\n      multiSelectContainer.addEventListener(\"multiselect-change\", () => {\r\n        console.log(\"Work area filter applied via custom multi-select\");\r\n        applyFiltersAndSort();\r\n      });\r\n    }\r\n\r\n    // Legacy SumoSelect support: trigger filtering when the OK button is clicked/closed\r\n    if (typeof window.$ !== \"undefined\") {\r\n      window.$(workAreaDropdown).on(\"sumo:closed\", function () {\r\n        console.log(\"Work area filter applied via SumoSelect OK\");\r\n        applyFiltersAndSort();\r\n      });\r\n    }\r\n  }\r\n\r\n  if (sortDropdown) {\r\n    sortDropdown.addEventListener(\"change\", function () {\r\n      console.log(`Sort changed to: ${this.value}`);\r\n      applyFiltersAndSort();\r\n    });\r\n  }\r\n\r\n  console.log(\"Filter and sort listeners initialized\");\r\n}\r\n", "// Load initial search results from local search or live API on page load\r\nimport { renderResults } from \"./search-card-template.js\";\r\nimport {\r\n  initializeDropdowns,\r\n  setStaticWorkAreas,\r\n} from \"./populate-dropdowns.js\";\r\nimport { storeResults, initializeFiltersAndSort } from \"./search-filters.js\";\r\nimport {\r\n  getPrimaryDataSource,\r\n  getFallbackDataSource,\r\n  getWorkAreasDataSource,\r\n  getConfig,\r\n} from \"./config.js\";\r\n\r\nlet fetchedWorkAreas = null;\r\n\r\n/**\r\n * Fetch work areas list from static source\r\n * @returns {Promise<Array<string>>} Promise that resolves to array of work areas\r\n */\r\nasync function fetchWorkAreasList() {\r\n  const workAreasSource = getWorkAreasDataSource();\r\n  console.log(`Fetching work areas from ${workAreasSource}...`);\r\n\r\n  try {\r\n    const response = await fetch(workAreasSource);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log(`Work areas loaded successfully:`, data);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(`Error fetching work areas from ${workAreasSource}:`, error);\r\n    return null; // Will fall back to extracting from results\r\n  }\r\n}\r\n\r\n// Export for use in search-form-handler\r\nexport function loadInitialResults() {\r\n  // Check if we're on a page with search results container\r\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\r\n  if (!searchResultsContainer) {\r\n    console.warn(\"search-results-list container not found on page\");\r\n    return; // Not on search results page\r\n  }\r\n\r\n  const config = getConfig();\r\n  const primarySource = getPrimaryDataSource();\r\n  const fallbackSource = getFallbackDataSource();\r\n\r\n  console.log(\r\n    `Loading initial results from ${\r\n      config.isProduction ? \"live API\" : \"local JSON\"\r\n    }...`,\r\n  );\r\n\r\n  // Fetch work areas list first (parallel with results loading)\r\n  fetchWorkAreasList().then((workAreas) => {\r\n    if (workAreas) {\r\n      fetchedWorkAreas = workAreas;\r\n      setStaticWorkAreas(workAreas);\r\n    }\r\n  });\r\n\r\n  // Fetch from primary data source\r\n  fetch(primarySource)\r\n    .then((response) => {\r\n      console.log(\r\n        `Primary source (${primarySource}) response status:`,\r\n        response.status,\r\n        response.ok,\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      console.log(\r\n        `Primary source data loaded successfully (${\r\n          config.isProduction ? \"live API\" : \"local JSON\"\r\n        }):`,\r\n        data,\r\n      );\r\n      processAndRenderResults(data, config.isProduction ? \"live-api\" : \"local\");\r\n    })\r\n    .catch((primaryError) => {\r\n      console.error(\r\n        `Error loading from primary source (${primarySource}):`,\r\n        primaryError,\r\n      );\r\n\r\n      // Only try fallback if in production\r\n      if (fallbackSource) {\r\n        console.log(\"Attempting fallback to local JSON...\");\r\n        fetch(fallbackSource)\r\n          .then((response) => {\r\n            console.log(\r\n              \"Fallback JSON response status:\",\r\n              response.status,\r\n              response.ok,\r\n            );\r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            console.log(\"Fallback JSON data loaded successfully:\", data);\r\n            processAndRenderResults(data, \"fallback\");\r\n          })\r\n          .catch((fallbackError) => {\r\n            console.error(\"Error loading fallback search.json:\", fallbackError);\r\n            displayErrorMessage();\r\n          });\r\n      } else {\r\n        // Local dev with no fallback - show error\r\n        displayErrorMessage();\r\n      }\r\n    });\r\n}\r\n\r\nfunction displayErrorMessage() {\r\n  const container = document.getElementById(\"search-results-list\");\r\n  if (container) {\r\n    container.innerHTML =\r\n      '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again later.</p>';\r\n  }\r\n}\r\n\r\nfunction processAndRenderResults(data, source = \"unknown\") {\r\n  // Handle array data directly (local JSON format)\r\n  const results = Array.isArray(data) ? data : [];\r\n\r\n  // Map to card template format\r\n  const mappedResults = results.map((result) => ({\r\n    title: result.title || \"\",\r\n    summary: result.description || result.summary || \"\",\r\n    listMetadata: {\r\n      \"Work area\": result[\"work-area\"] || [],\r\n      Roles: result.roles || [],\r\n      Benefits: result.benefits || [],\r\n    },\r\n    date: result[\"last-updated\"]\r\n      ? new Date(result[\"last-updated\"]).toLocaleDateString(\"en-AU\", {\r\n          year: \"numeric\",\r\n          month: \"long\",\r\n        })\r\n      : \"\",\r\n    liveUrl: result.url || result.liveUrl || \"\",\r\n    submittedBy: result[\"submitted-by\"] || \"\",\r\n  }));\r\n\r\n  console.log(`Rendering ${mappedResults.length} cards from ${source}`);\r\n\r\n  // Store results for filtering/sorting\r\n  storeResults(mappedResults);\r\n\r\n  // Cache results for offline search\r\n  window.aikbSearchCache = mappedResults;\r\n  console.log(`Cached ${mappedResults.length} results for offline search`);\r\n\r\n  // Initialize dropdowns with work area data\r\n  // Pass fetched work areas if available\r\n  initializeDropdowns(mappedResults, fetchedWorkAreas);\r\n\r\n  // Initialize filter and sort listeners after each results update\r\n  initializeFiltersAndSort();\r\n\r\n  // Render cards using the template\r\n  renderResults(mappedResults, \"search-results-list\");\r\n}\r\n\r\n// Wait for complete page load (not just DOM ready)\r\nwindow.addEventListener(\"load\", function () {\r\n  console.log(\"Page load event fired, loading initial results...\");\r\n  // Extra delay after full page load to ensure all scripts initialized\r\n  setTimeout(loadInitialResults, 200);\r\n});\r\n", "/**\r\n * Offline Search Module\r\n *\r\n * Provides client-side search functionality when Funnelback API is unavailable.\r\n * Uses cached search results stored in window.aikbSearchCache.\r\n */\r\n\r\n/**\r\n * Search through locally cached data using keywords\r\n *\r\n * Scoring algorithm:\r\n * - Title matches: 3 points per occurrence (prioritized)\r\n * - Summary matches: 1 point per occurrence\r\n * - Metadata matches: 2 points per keyword match\r\n *\r\n * @param {string} keywords - Search keywords entered by user\r\n * @param {Array} results - Cached search results to filter\r\n * @returns {Array} Filtered and scored results, sorted by relevance\r\n */\r\nexport function searchLocalData(keywords, results) {\r\n  if (!keywords || !results || results.length === 0) {\r\n    console.log(\"Offline search: No keywords or no cached results available\");\r\n    return [];\r\n  }\r\n\r\n  // Normalize keywords for matching\r\n  const normalizedKeywords = keywords\r\n    .toLowerCase()\r\n    .replace(/[^\\w\\s]/g, \"\") // Remove special characters\r\n    .trim();\r\n\r\n  if (!normalizedKeywords) {\r\n    console.log(\"Offline search: Keywords empty after normalization\");\r\n    return [];\r\n  }\r\n\r\n  console.log(\r\n    `Offline search: Searching for \"${keywords}\" in ${results.length} cached results`\r\n  );\r\n\r\n  // Create regex pattern for matching\r\n  const keywordPattern = new RegExp(normalizedKeywords, \"gi\");\r\n\r\n  // Score each result\r\n  const scoredResults = results.map((result) => {\r\n    let score = 0;\r\n    let titleMatches = 0;\r\n    let summaryMatches = 0;\r\n    let metadataMatches = 0;\r\n\r\n    // Score title matches (weight: 3)\r\n    if (result.title) {\r\n      const titleText = result.title.toLowerCase().replace(/[^\\w\\s]/g, \"\");\r\n      const matches = titleText.match(keywordPattern);\r\n      if (matches) {\r\n        titleMatches = matches.length;\r\n        score += titleMatches * 3;\r\n      }\r\n    }\r\n\r\n    // Score summary matches (weight: 1)\r\n    if (result.summary) {\r\n      const summaryText = result.summary.toLowerCase().replace(/[^\\w\\s]/g, \"\");\r\n      const matches = summaryText.match(keywordPattern);\r\n      if (matches) {\r\n        summaryMatches = matches.length;\r\n        score += summaryMatches * 1;\r\n      }\r\n    }\r\n\r\n    // Score metadata matches (weight: 2)\r\n    if (result.metadata) {\r\n      const metadataText = result.metadata\r\n        .toLowerCase()\r\n        .replace(/[^\\w\\s]/g, \"\");\r\n      const matches = metadataText.match(keywordPattern);\r\n      if (matches) {\r\n        metadataMatches = matches.length;\r\n        score += metadataMatches * 2;\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...result,\r\n      _offlineScore: score,\r\n      _offlineMatches: {\r\n        title: titleMatches,\r\n        summary: summaryMatches,\r\n        metadata: metadataMatches,\r\n      },\r\n    };\r\n  });\r\n\r\n  // Filter out results with no matches (score = 0)\r\n  const matchedResults = scoredResults.filter(\r\n    (result) => result._offlineScore > 0\r\n  );\r\n\r\n  // Sort by score descending (highest score first)\r\n  matchedResults.sort((a, b) => b._offlineScore - a._offlineScore);\r\n\r\n  console.log(\r\n    `Offline search: Found ${matchedResults.length} results matching \"${keywords}\"`\r\n  );\r\n\r\n  // Log top 3 results for debugging\r\n  if (matchedResults.length > 0) {\r\n    console.log(\"Offline search: Top results:\");\r\n    matchedResults.slice(0, 3).forEach((result, index) => {\r\n      console.log(\r\n        `  ${index + 1}. \"${result.title}\" (score: ${\r\n          result._offlineScore\r\n        }, title:${result._offlineMatches.title}, summary:${\r\n          result._offlineMatches.summary\r\n        }, metadata:${result._offlineMatches.metadata})`\r\n      );\r\n    });\r\n  }\r\n\r\n  return matchedResults;\r\n}\r\n\r\n/**\r\n * Get cached search data from global scope\r\n *\r\n * @returns {Array|null} Cached results or null if not available\r\n */\r\nexport function getCachedData() {\r\n  if (window.aikbSearchCache && Array.isArray(window.aikbSearchCache)) {\r\n    console.log(\r\n      `Offline search: Retrieved ${window.aikbSearchCache.length} cached results`\r\n    );\r\n    return window.aikbSearchCache;\r\n  }\r\n\r\n  console.log(\"Offline search: No cached data available\");\r\n  return null;\r\n}\r\n", "/**\r\n * Search Form Handler\r\n * Wires the #policy-search-form submission to trigger Funnelback API calls\r\n * and populate #search-results-list with results\r\n */\r\n\r\nimport { loadInitialResults } from \"./load-initial-results.js\";\r\nimport { renderResults } from \"./search-card-template.js\";\r\nimport { searchLocalData, getCachedData } from \"./offline-search.js\";\r\nimport { storeResults, initializeFiltersAndSort } from \"./search-filters.js\";\r\nimport { initializeDropdowns } from \"./populate-dropdowns.js\";\r\nimport { displayAppliedFilters, getCurrentFilters } from \"./applied-filters.js\";\r\n\r\n// Initialize search form handler\r\n(function initSearchForm() {\r\n  // Only initialize if jQuery is available\r\n  if (typeof window.$ === \"undefined\") {\r\n    console.warn(\"jQuery not loaded; search form handler disabled\");\r\n    return;\r\n  }\r\n\r\n  const $form = window.$(\"#policy-search-form\");\r\n  const $searchInput = window.$(\"#search\");\r\n\r\n  if ($form.length === 0) {\r\n    console.error(\"Form #policy-search-form not found\");\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Extract search parameters from form\r\n   * @returns {Object} Search parameters {query, area, ...}\r\n   */\r\n  function getSearchParams() {\r\n    return {\r\n      query: $searchInput.val() || \"\",\r\n      area: window.$(\"#document_type\").val() || \"\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Prevent form submission (search is triggered by Enter key only)\r\n   */\r\n  function handleFormSubmit(event) {\r\n    event.preventDefault();\r\n    // Form submission prevented - search only happens on Enter key press\r\n  }\r\n\r\n  /**\r\n   * Handle clear input button click\r\n   * Clear the search field and reload initial results\r\n   */\r\n  function handleClearInput() {\r\n    $searchInput.val(\"\");\r\n    console.log(\"Search cleared - reloading initial results\");\r\n    loadInitialResults();\r\n  }\r\n\r\n  // Attach form submission handler\r\n  $form.on(\"submit\", handleFormSubmit);\r\n\r\n  // Attach clear input handler\r\n  window.$(\"#clear-input\").on(\"click\", handleClearInput);\r\n\r\n  // Show/hide clear button based on input state (but don't search yet)\r\n  $searchInput.on(\"input\", function () {\r\n    const $clearBtn = window.$(\"#clear-input\");\r\n    if (window.$(this).val().length > 0) {\r\n      $clearBtn.attr(\"hidden\", false);\r\n    } else {\r\n      $clearBtn.attr(\"hidden\", \"\");\r\n    }\r\n  });\r\n\r\n  // Trigger search when user presses Enter in the search input\r\n  $searchInput.on(\"keydown\", function (event) {\r\n    if (event.key === \"Enter\" || event.keyCode === 13) {\r\n      event.preventDefault();\r\n      const searchText = window.$(this).val();\r\n      if (searchText.trim()) {\r\n        triggerSearch(searchText);\r\n      } else {\r\n        console.log(\"Empty search via Enter - reloading initial results\");\r\n        loadInitialResults();\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Trigger search with the given query text\r\n   * @param {string} queryText - The search query from the input field\r\n   */\r\n  function triggerSearch(queryText) {\r\n    if (!queryText.trim()) {\r\n      return; // Don't search for empty text\r\n    }\r\n\r\n    console.log(`Triggered search for: \"${queryText}\"`);\r\n\r\n    // Perform local/offline search\r\n    const cachedData = getCachedData();\r\n    if (cachedData && cachedData.length > 0) {\r\n      console.log(\"Performing local search\");\r\n      const localResults = searchLocalData(queryText, cachedData);\r\n\r\n      // Store and render local search results\r\n      storeResults(localResults);\r\n      initializeDropdowns(localResults);\r\n      initializeFiltersAndSort();\r\n      renderResults(localResults, \"search-results-list\");\r\n\r\n      // Display applied filters\r\n      const currentFilters = getCurrentFilters();\r\n      displayAppliedFilters(currentFilters);\r\n\r\n      console.log(`Local search: Displayed ${localResults.length} results`);\r\n    } else {\r\n      // No cached data - show error\r\n      console.error(\"No cached data available for search\");\r\n      const $container = window.$(\"#search-results-list\");\r\n      if ($container.length > 0) {\r\n        $container.html(\r\n          '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again.</p>'\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(\"Search form handler initialized\");\r\n})();\r\n", "// Alias CTA anchors to reuse NTGC primary button styling\r\nconst CTA_SELECTOR = 'div[data-hydration-component=\"squiz-call-to-action\"] a';\r\n\r\nfunction applyCtaButtonAlias(root = document) {\r\n  const anchors = root.querySelectorAll(CTA_SELECTOR);\r\n  anchors.forEach((anchor) => {\r\n    anchor.classList.add(\"ntgc-btn\", \"ntgc-btn--primary\");\r\n  });\r\n}\r\n\r\nif (document.readyState === \"loading\") {\r\n  document.addEventListener(\"DOMContentLoaded\", () => applyCtaButtonAlias());\r\n} else {\r\n  applyCtaButtonAlias();\r\n}\r\n", "// Import all JS modules for landing page bundle (except content-page.js)\r\nimport \"./config.js\";\r\nimport \"./search-form-handler.js\";\r\nimport \"./search-filters.js\";\r\nimport \"./search-card-template.js\";\r\nimport \"./populate-dropdowns.js\";\r\nimport \"./offline-search.js\";\r\nimport \"./multi-select-dropdown.js\";\r\nimport \"./load-initial-results.js\";\r\nimport \"./cta-button-alias.js\";\r\nimport \"./pagination.js\";\r\nimport { initClearAllButton } from \"./applied-filters.js\";\r\n\r\n// Confirm bundle loaded successfully\r\nconsole.log(\"[aikb] Landing page bundle loaded successfully\");\r\nconsole.log(\"[aikb] jQuery available:\", typeof window.jQuery !== \"undefined\");\r\nconsole.log(\"[aikb] DOM ready state:\", document.readyState);\r\n\r\n// Initialize clear all button after page loads\r\nwindow.addEventListener(\"load\", function () {\r\n  initClearAllButton();\r\n  console.log(\"[aikb] Applied filters initialized\");\r\n});\r\n"],
  "mappings": "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",
  "names": ["isProduction", "getConfig", "getPrimaryDataSource", "config", "getFallbackDataSource", "getWorkAreasDataSource", "init_config", "__esmMin", "pagination_exports", "__export", "getCurrentPage", "getCurrentPageResults", "getTotalPages", "initializePagination", "updatePagination", "results", "perPage", "allResults", "itemsPerPage", "totalItems", "currentPage", "ensurePaginationContainer", "renderPaginationControls", "startIndex", "endIndex", "paginationContainer", "searchResultsContainer", "totalPages", "wrapper", "prevButton", "createControlButton", "goToPage", "pageNumbers", "createPageNumbers", "nextButton", "label", "enabled", "onClick", "button", "iconLabel", "icon", "text", "container", "calculatePageRange", "page", "ellipsis", "pageButton", "pageText", "current", "total", "_", "i", "pages", "start", "end", "event", "top", "init_pagination", "__esmMin", "search_card_template_exports", "__export", "renderResults", "formatDate", "dateStr", "date", "createSearchCard", "result", "card", "inner", "content", "textSection", "title", "summary", "workAreas", "tagsContainer", "workArea", "tag", "actions", "button", "buttonText", "icon", "metadata", "roles", "usefulRow", "value", "label", "text", "dateEl", "results", "containerId", "usePagination", "container", "$container", "el", "noResults", "initializePagination", "getCurrentPageResults", "cards", "init_search_card_template", "__esmMin", "event", "initMultiSelect", "selector", "element", "MultiSelectDropdown", "init_multi_select_dropdown", "__esmMin", "selectElement", "option", "optionsList", "selectAllItem", "optionItem", "actionsContainer", "okButton", "cancelButton", "item", "checkbox", "e", "labelText", "checkboxes", "isChecked", "selectAllCheckbox", "checkedCount", "cb", "textElement", "selectedLabels", "value", "opt", "event", "changeEvent", "countsMap", "count", "baseLabel", "labelSpan", "existingBadge", "badge", "optionIndex", "extractWorkAreas", "results", "workAreaSet", "result", "workAreas", "area", "trimmed", "a", "b", "calculateWorkAreaCounts", "counts", "workArea", "resultWorkAreas", "setStaticWorkAreas", "staticWorkAreas", "populateWorkAreaDropdown", "dropdown", "defaultOption", "option", "multiSelectInstance", "initMultiSelect", "populateSortDropdown", "container", "label", "newLabel", "wrapper", "inner", "sortOptions", "opt", "addDropdownIcons", "workAreaDropdown", "icon", "sortDropdown", "initializeDropdowns", "workAreasFromFetch", "init_populate_dropdowns", "__esmMin", "init_multi_select_dropdown", "displayAppliedFilters", "filters", "section", "container", "clearAllBtn", "hasFilters", "pill", "createFilterPill", "isAllWorkAreasSelected", "workArea", "selectedWorkAreas", "dropdown", "totalOptions", "opt", "label", "value", "badgeClass", "filterType", "filterValue", "pillLabel", "pillValue", "removeButton", "icon", "e", "removeFilter", "searchInput", "loadInitialResults", "workAreaDropdown", "option", "changeEvent", "multiSelectContainer", "instance", "clearAllFilters", "initClearAllButton", "getCurrentFilters", "sortDropdown", "selectedOptions", "val", "init_applied_filters", "__esmMin", "storeResults", "results", "allResults", "filterByWorkArea", "selectedWorkAreas", "result", "resultWorkAreas", "selectedArea", "sortResults", "sortBy", "sorted", "b", "dateA", "dateB", "titleA", "titleB", "applyFiltersAndSort", "workAreaDropdown", "sortDropdown", "opt", "val", "selectedSort", "filtered", "renderResults", "currentFilters", "getCurrentFilters", "displayAppliedFilters", "initializeFiltersAndSort", "multiSelectContainer", "init_search_filters", "__esmMin", "init_applied_filters", "load_initial_results_exports", "__export", "loadInitialResults", "fetchWorkAreasList", "workAreasSource", "getWorkAreasDataSource", "response", "data", "error", "config", "getConfig", "primarySource", "getPrimaryDataSource", "fallbackSource", "getFallbackDataSource", "workAreas", "fetchedWorkAreas", "setStaticWorkAreas", "processAndRenderResults", "primaryError", "fallbackError", "displayErrorMessage", "container", "source", "mappedResults", "result", "storeResults", "initializeDropdowns", "initializeFiltersAndSort", "renderResults", "init_load_initial_results", "__esmMin", "init_search_card_template", "init_populate_dropdowns", "init_search_filters", "init_config", "searchLocalData", "keywords", "results", "normalizedKeywords", "keywordPattern", "matchedResults", "result", "score", "titleMatches", "summaryMatches", "metadataMatches", "matches", "a", "b", "index", "getCachedData", "init_offline_search", "__esmMin", "require_search_form_handler", "__commonJSMin", "init_load_initial_results", "init_search_card_template", "init_offline_search", "init_search_filters", "init_populate_dropdowns", "init_applied_filters", "$form", "$searchInput", "getSearchParams", "handleFormSubmit", "event", "handleClearInput", "loadInitialResults", "$clearBtn", "searchText", "triggerSearch", "queryText", "cachedData", "getCachedData", "localResults", "searchLocalData", "storeResults", "initializeDropdowns", "initializeFiltersAndSort", "renderResults", "currentFilters", "getCurrentFilters", "displayAppliedFilters", "$container", "require_cta_button_alias", "__commonJSMin", "CTA_SELECTOR", "applyCtaButtonAlias", "root", "anchor", "require_landing_page", "__commonJSMin", "init_config", "import_search_form_handler", "init_search_filters", "init_search_card_template", "init_populate_dropdowns", "init_offline_search", "init_multi_select_dropdown", "init_load_initial_results", "import_cta_button_alias", "init_pagination", "init_applied_filters", "initClearAllButton"]
}
