{
  "version": 3,
  "sources": ["../src/js/config.js", "../src/js/offline-search.js", "../src/js/pagination.js", "../src/js/search-card-template.js", "../src/js/multi-select-dropdown.js", "../src/js/populate-dropdowns.js", "../src/js/applied-filters.js", "../src/js/search-filters.js", "../src/js/load-initial-results.js", "../src/js/search-form-handler.js", "../src/js/cta-button-alias.js", "../src/js/landing-page.js"],
  "sourcesContent": ["/**\r\n * Configuration Module\r\n * Centralized environment detection and API endpoint configuration\r\n */\r\n\r\n/**\r\n * Detect if the application is running in production environment\r\n * @returns {boolean} True if running on ntgcentral.nt.gov.au\r\n */\r\nexport function isProduction() {\r\n  return window.location.hostname === \"ntgcentral.nt.gov.au\";\r\n}\r\n\r\n/**\r\n * Get the appropriate data source URL based on environment\r\n * @returns {Object} Configuration object with data source URLs\r\n */\r\nexport function getConfig() {\r\n  const config = {\r\n    isProduction: isProduction(),\r\n    liveApiUrl:\r\n      \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/articles/_nocache\",\r\n    fallbackJsonUrl: \"./dist/search.json\",\r\n    workAreasUrl: isProduction()\r\n      ? \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/work-areas/_nocache\"\r\n      : \"./src/data/work-areas.json\",\r\n  };\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get the primary data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The primary data source URL\r\n */\r\nexport function getPrimaryDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.liveApiUrl : config.fallbackJsonUrl;\r\n}\r\n\r\n/**\r\n * Get the fallback data source URL\r\n * Only used in production when live API fails\r\n * @returns {string|null} The fallback URL or null for dev environment\r\n */\r\nexport function getFallbackDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.fallbackJsonUrl : null;\r\n}\r\n\r\n/**\r\n * Get the work areas data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The work areas data source URL\r\n */\r\nexport function getWorkAreasDataSource() {\r\n  const config = getConfig();\r\n  return config.workAreasUrl;\r\n}\r\n\r\n/**\r\n * Common noise words to filter from search queries\r\n * Reused from Funnelback implementation for consistency\r\n */\r\nexport const NOISE_WORDS = new Set([\r\n  \"a\",\r\n  \"au\",\r\n  \"all\",\r\n  \"am\",\r\n  \"an\",\r\n  \"and\",\r\n  \"any\",\r\n  \"are\",\r\n  \"as\",\r\n  \"at\",\r\n  \"be\",\r\n  \"been\",\r\n  \"but\",\r\n  \"by\",\r\n  \"can\",\r\n  \"cant\",\r\n  \"co\",\r\n  \"com\",\r\n  \"de\",\r\n  \"do\",\r\n  \"eg\",\r\n  \"else\",\r\n  \"etc\",\r\n  \"for\",\r\n  \"from\",\r\n  \"get\",\r\n  \"go\",\r\n  \"had\",\r\n  \"has\",\r\n  \"hasnt\",\r\n  \"have\",\r\n  \"he\",\r\n  \"hence\",\r\n  \"her\",\r\n  \"here\",\r\n  \"hers\",\r\n  \"him\",\r\n  \"his\",\r\n  \"how\",\r\n  \"http\",\r\n  \"https\",\r\n  \"i\",\r\n  \"ie\",\r\n  \"if\",\r\n  \"in\",\r\n  \"is\",\r\n  \"it\",\r\n  \"its\",\r\n  \"la\",\r\n  \"me\",\r\n  \"my\",\r\n  \"nor\",\r\n  \"not\",\r\n  \"now\",\r\n  \"of\",\r\n  \"off\",\r\n  \"on\",\r\n  \"or\",\r\n  \"our\",\r\n  \"ours\",\r\n  \"pm\",\r\n  \"put\",\r\n  \"re\",\r\n  \"she\",\r\n  \"so\",\r\n  \"than\",\r\n  \"that\",\r\n  \"the\",\r\n  \"their\",\r\n  \"them\",\r\n  \"then\",\r\n  \"there\",\r\n  \"these\",\r\n  \"they\",\r\n  \"this\",\r\n  \"those\",\r\n  \"thus\",\r\n  \"to\",\r\n  \"too\",\r\n  \"uk\",\r\n  \"un\",\r\n  \"until\",\r\n  \"up\",\r\n  \"upon\",\r\n  \"us\",\r\n  \"very\",\r\n  \"via\",\r\n  \"was\",\r\n  \"we\",\r\n  \"well\",\r\n  \"were\",\r\n  \"what\",\r\n  \"when\",\r\n  \"where\",\r\n  \"which\",\r\n  \"while\",\r\n  \"who\",\r\n  \"why\",\r\n  \"www\",\r\n  \"you\",\r\n  \"your\",\r\n  \"yours\",\r\n]);\r\n", "/**\n * Offline Search Module - Enhanced Multi-Word Search\n *\n * Features:\n * - Multi-word tokenization (queries split into individual terms)\n * - TF (Term Frequency) scoring with field weighting\n * - Noise word filtering\n * - Document length normalization\n * - Match tracking for result highlighting\n */\n\nimport { NOISE_WORDS } from \"./config.js\";\n\n/**\n * Tokenize and normalize a search query\n * Preserves uppercase acronyms (e.g., \"IT\") even if their lowercase version is a noise word\n * @param {string} query - Raw search query\n * @returns {Array<string>} Array of normalized tokens (noise words removed)\n */\nfunction tokenizeQuery(query) {\n  // Remove special chars but preserve case initially\n  const cleaned = query.replace(/[^\\w\\s]/g, \" \").trim();\n\n  if (!cleaned) return [];\n\n  // Split into words preserving original case\n  const words = cleaned.split(/\\s+/).filter((word) => word.length > 0);\n\n  // Filter out noise words, but preserve uppercase acronyms\n  const tokens = words.filter((word) => {\n    const lowerWord = word.toLowerCase();\n\n    // If lowercase version is a noise word\n    if (NOISE_WORDS.has(lowerWord)) {\n      // Keep it if it's all uppercase (likely an acronym like \"IT\")\n      return word === word.toUpperCase() && word.length >= 2;\n    }\n\n    // Not a noise word, keep it\n    return true;\n  });\n\n  // Normalize to lowercase for searching\n  return tokens.map((token) => token.toLowerCase());\n}\n\n/**\n * Normalize text for searching (lowercase, remove special chars)\n * @param {string} text - Text to normalize\n * @returns {string} Normalized text\n */\nfunction normalizeText(text) {\n  if (!text) return \"\";\n  return text.toLowerCase().replace(/[^\\w\\s]/g, \" \");\n}\n\n/**\n * Count term frequency in text with support for partial and full word matches\n * @param {string} text - Text to search in\n * @param {string} term - Term to count\n * @returns {Object} Object with fullWordMatches and partialMatches counts\n */\nfunction countTermFrequency(text, term) {\n  if (!text || !term) return { fullWordMatches: 0, partialMatches: 0 };\n\n  const normalized = normalizeText(text);\n\n  // Count full word matches (higher priority)\n  const fullWordRegex = new RegExp(`\\\\b${term}\\\\b`, \"gi\");\n  const fullWordMatches = normalized.match(fullWordRegex);\n  const fullWordCount = fullWordMatches ? fullWordMatches.length : 0;\n\n  // Count partial matches (lower priority)\n  // Only count partials that are NOT already full word matches\n  const partialRegex = new RegExp(term, \"gi\");\n  const allMatches = normalized.match(partialRegex);\n  const totalMatches = allMatches ? allMatches.length : 0;\n  const partialCount = Math.max(0, totalMatches - fullWordCount);\n\n  return {\n    fullWordMatches: fullWordCount,\n    partialMatches: partialCount,\n  };\n}\n\n/**\n * Extract all metadata as searchable text\n * @param {Object} result - Search result object\n * @returns {string} Concatenated metadata text\n */\nfunction extractMetadata(result) {\n  const parts = [];\n\n  if (result.listMetadata) {\n    // Work areas\n    if (result.listMetadata[\"Work area\"]) {\n      parts.push(...result.listMetadata[\"Work area\"]);\n    }\n    // Roles\n    if (result.listMetadata[\"Roles\"]) {\n      parts.push(...result.listMetadata[\"Roles\"]);\n    }\n    // Benefits\n    if (result.listMetadata[\"Benefits\"]) {\n      parts.push(...result.listMetadata[\"Benefits\"]);\n    }\n  }\n\n  return parts.join(\" \");\n}\n\n/**\n * Calculate TF score for a single term across all fields\n * @param {Object} result - Search result object\n * @param {string} term - Search term\n * @returns {Object} Score breakdown and total\n */\nfunction scoreTermInResult(result, term) {\n  const titleText = result.title || \"\";\n  const summaryText = result.summary || \"\";\n  const metadataText = extractMetadata(result);\n\n  // Count term frequency in each field (full word and partial matches)\n  const titleTF = countTermFrequency(titleText, term);\n  const summaryTF = countTermFrequency(summaryText, term);\n  const metadataTF = countTermFrequency(metadataText, term);\n\n  // Apply field weights with different scoring for full vs partial matches\n  // Full word matches: Title (5x), Metadata (3x), Summary (2x)\n  // Partial matches: Title (2x), Metadata (1.5x), Summary (1x) - 40% of full word weight\n  const titleScore = titleTF.fullWordMatches * 5 + titleTF.partialMatches * 2;\n  const summaryScore =\n    summaryTF.fullWordMatches * 2 + summaryTF.partialMatches * 1;\n  const metadataScore =\n    metadataTF.fullWordMatches * 3 + metadataTF.partialMatches * 1.5;\n\n  const totalScore = titleScore + summaryScore + metadataScore;\n\n  return {\n    titleTF: titleTF.fullWordMatches + titleTF.partialMatches,\n    titleFullWord: titleTF.fullWordMatches,\n    titlePartial: titleTF.partialMatches,\n    summaryTF: summaryTF.fullWordMatches + summaryTF.partialMatches,\n    summaryFullWord: summaryTF.fullWordMatches,\n    summaryPartial: summaryTF.partialMatches,\n    metadataTF: metadataTF.fullWordMatches + metadataTF.partialMatches,\n    metadataFullWord: metadataTF.fullWordMatches,\n    metadataPartial: metadataTF.partialMatches,\n    titleScore,\n    summaryScore,\n    metadataScore,\n    totalScore,\n    hasMatch: totalScore > 0,\n  };\n}\n\n/**\n * Calculate document length for normalization\n * @param {Object} result - Search result object\n * @returns {number} Total character count\n */\nfunction getDocumentLength(result) {\n  const titleLength = (result.title || \"\").length;\n  const summaryLength = (result.summary || \"\").length;\n  const metadataLength = extractMetadata(result).length;\n\n  return titleLength + summaryLength + metadataLength;\n}\n\n/**\n * Search through locally cached data using multi-word tokenization\n *\n * Scoring algorithm:\n * - Tokenizes query into individual terms (filters noise words)\n * - For each term, counts frequency in title/summary/metadata\n * - Applies field weights: Title (5x), Metadata (3x), Summary (2x)\n * - Normalizes by document length (\u00D7 1000 to keep scores readable)\n * - Tracks matched terms for result highlighting\n *\n * @param {string} keywords - Search keywords entered by user\n * @param {Array} results - Cached search results to filter\n * @returns {Array} Filtered and scored results, sorted by relevance\n */\nexport function searchLocalData(keywords, results) {\n  if (!keywords || !results || results.length === 0) {\n    return [];\n  }\n\n  // Tokenize query\n  const terms = tokenizeQuery(keywords);\n\n  if (terms.length === 0) {\n    return [];\n  }\n\n  // Score each result\n  const scoredResults = results.map((result) => {\n    let totalScore = 0;\n    const matchedTerms = [];\n    const termScores = {};\n\n    // Score each term independently\n    terms.forEach((term) => {\n      const termScore = scoreTermInResult(result, term);\n\n      if (termScore.hasMatch) {\n        matchedTerms.push(term);\n        totalScore += termScore.totalScore;\n        termScores[term] = termScore;\n      }\n    });\n\n    // Normalize by document length to prevent long documents from dominating\n    const docLength = getDocumentLength(result);\n    const normalizedScore = docLength > 0 ? (totalScore / docLength) * 1000 : 0;\n\n    return {\n      ...result,\n      _offlineScore: normalizedScore,\n      _rawScore: totalScore,\n      _matchedTerms: matchedTerms,\n      _termScores: termScores,\n      _docLength: docLength,\n    };\n  });\n\n  // Filter: require at least one matched term\n  const matchedResults = scoredResults.filter(\n    (result) => result._matchedTerms.length > 0,\n  );\n\n  // Sort by normalized score descending (highest score first)\n  matchedResults.sort((a, b) => b._offlineScore - a._offlineScore);\n\n  return matchedResults;\n}\n\n/**\n * Get cached search data from global scope\n *\n * @returns {Array|null} Cached results or null if not available\n */\nexport function getCachedData() {\n  if (window.aikbSearchCache && Array.isArray(window.aikbSearchCache)) {\n    return window.aikbSearchCache;\n  }\n\n  return null;\n}\n", "// Pagination component for search results\r\n\r\nlet currentPage = 1;\r\nlet itemsPerPage = 10;\r\nlet totalItems = 0;\r\nlet allResults = [];\r\nlet paginationContainer = null;\r\n\r\n/**\r\n * Initialize pagination\r\n * @param {Array} results - All search results\r\n * @param {number} perPage - Items per page (default: 10)\r\n */\r\nexport function initializePagination(results, perPage = 10) {\r\n  allResults = results;\r\n  itemsPerPage = perPage;\r\n  totalItems = results.length;\r\n  currentPage = 1;\r\n\r\n  // Find or create pagination container\r\n  ensurePaginationContainer();\r\n\r\n  // Render pagination controls\r\n  renderPaginationControls();\r\n}\r\n\r\n/**\r\n * Get current page of results\r\n * @returns {Array} - Results for current page\r\n */\r\nexport function getCurrentPageResults() {\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  return allResults.slice(startIndex, endIndex);\r\n}\r\n\r\n/**\r\n * Get current page number\r\n * @returns {number}\r\n */\r\nexport function getCurrentPage() {\r\n  return currentPage;\r\n}\r\n\r\n/**\r\n * Get total number of pages\r\n * @returns {number}\r\n */\r\nexport function getTotalPages() {\r\n  return Math.ceil(totalItems / itemsPerPage);\r\n}\r\n\r\n/**\r\n * Ensure pagination container exists in DOM\r\n */\r\nfunction ensurePaginationContainer() {\r\n  paginationContainer = document.getElementById(\"aikb-pagination\");\r\n\r\n  if (!paginationContainer) {\r\n    // Create pagination container after search results\r\n    const searchResultsContainer = document.getElementById(\r\n      \"search-results-list\"\r\n    );\r\n    if (searchResultsContainer && searchResultsContainer.parentNode) {\r\n      paginationContainer = document.createElement(\"div\");\r\n      paginationContainer.id = \"aikb-pagination\";\r\n      paginationContainer.className = \"aikb-pagination\";\r\n      searchResultsContainer.parentNode.insertBefore(\r\n        paginationContainer,\r\n        searchResultsContainer.nextSibling\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Render pagination controls\r\n */\r\nfunction renderPaginationControls() {\r\n  if (!paginationContainer) return;\r\n\r\n  const totalPages = getTotalPages();\r\n\r\n  // Hide pagination if only 1 page or no results\r\n  if (totalPages <= 1) {\r\n    paginationContainer.innerHTML = \"\";\r\n    paginationContainer.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  paginationContainer.style.display = \"flex\";\r\n\r\n  // Create pagination wrapper\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.className = \"aikb-pagination__wrapper\";\r\n\r\n  // Previous button\r\n  const prevButton = createControlButton(\"Previous\", currentPage > 1, () => {\r\n    if (currentPage > 1) {\r\n      goToPage(currentPage - 1);\r\n    }\r\n  });\r\n  wrapper.appendChild(prevButton);\r\n\r\n  // Page numbers\r\n  const pageNumbers = createPageNumbers(totalPages);\r\n  wrapper.appendChild(pageNumbers);\r\n\r\n  // Next button\r\n  const nextButton = createControlButton(\r\n    \"Next\",\r\n    currentPage < totalPages,\r\n    () => {\r\n      if (currentPage < totalPages) {\r\n        goToPage(currentPage + 1);\r\n      }\r\n    }\r\n  );\r\n  wrapper.appendChild(nextButton);\r\n\r\n  // Clear and update\r\n  paginationContainer.innerHTML = \"\";\r\n  paginationContainer.appendChild(wrapper);\r\n}\r\n\r\n/**\r\n * Create Previous/Next control button\r\n * @param {string} label - Button label\r\n * @param {boolean} enabled - Whether button is enabled\r\n * @param {Function} onClick - Click handler\r\n * @returns {HTMLElement}\r\n */\r\nfunction createControlButton(label, enabled, onClick) {\r\n  const button = document.createElement(\"div\");\r\n  button.className = \"aikb-pagination__control\";\r\n  if (!enabled) {\r\n    button.classList.add(\"aikb-pagination__control--disabled\");\r\n  }\r\n\r\n  const iconLabel = document.createElement(\"div\");\r\n  iconLabel.className = \"aikb-pagination__icon-label\";\r\n\r\n  if (label === \"Previous\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-left\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  const text = document.createElement(\"span\");\r\n  text.className = \"aikb-pagination__text\";\r\n  text.textContent = label;\r\n  iconLabel.appendChild(text);\r\n\r\n  if (label === \"Next\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-right\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  button.appendChild(iconLabel);\r\n\r\n  if (enabled) {\r\n    button.addEventListener(\"click\", onClick);\r\n    button.style.cursor = \"pointer\";\r\n  }\r\n\r\n  return button;\r\n}\r\n\r\n/**\r\n * Create page number buttons\r\n * @param {number} totalPages - Total number of pages\r\n * @returns {HTMLElement}\r\n */\r\nfunction createPageNumbers(totalPages) {\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"aikb-pagination__pages\";\r\n\r\n  const pages = calculatePageRange(currentPage, totalPages);\r\n\r\n  pages.forEach((page) => {\r\n    if (page === \"...\") {\r\n      const ellipsis = document.createElement(\"span\");\r\n      ellipsis.className = \"aikb-pagination__ellipsis\";\r\n      ellipsis.textContent = \"...\";\r\n      container.appendChild(ellipsis);\r\n    } else {\r\n      const pageButton = document.createElement(\"div\");\r\n      pageButton.className = \"aikb-pagination__page-number\";\r\n\r\n      if (page === currentPage) {\r\n        pageButton.classList.add(\"aikb-pagination__page-number--active\");\r\n      }\r\n\r\n      const pageText = document.createElement(\"span\");\r\n      pageText.textContent = page;\r\n      pageButton.appendChild(pageText);\r\n\r\n      pageButton.addEventListener(\"click\", () => goToPage(page));\r\n      pageButton.style.cursor = \"pointer\";\r\n\r\n      container.appendChild(pageButton);\r\n    }\r\n  });\r\n\r\n  return container;\r\n}\r\n\r\n/**\r\n * Calculate which page numbers to display\r\n * @param {number} current - Current page\r\n * @param {number} total - Total pages\r\n * @returns {Array} - Array of page numbers and ellipsis\r\n */\r\nfunction calculatePageRange(current, total) {\r\n  if (total <= 7) {\r\n    // Show all pages if 7 or fewer\r\n    return Array.from({ length: total }, (_, i) => i + 1);\r\n  }\r\n\r\n  const pages = [];\r\n\r\n  // Always show first page\r\n  pages.push(1);\r\n\r\n  if (current > 3) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Show pages around current\r\n  const start = Math.max(2, current - 1);\r\n  const end = Math.min(total - 1, current + 1);\r\n\r\n  for (let i = start; i <= end; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  if (current < total - 2) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Always show last page\r\n  pages.push(total);\r\n\r\n  return pages;\r\n}\r\n\r\n/**\r\n * Navigate to specific page\r\n * @param {number} page - Page number to navigate to\r\n */\r\nfunction goToPage(page) {\r\n  const totalPages = getTotalPages();\r\n\r\n  if (page < 1 || page > totalPages || page === currentPage) {\r\n    return;\r\n  }\r\n\r\n  currentPage = page;\r\n\r\n  // Re-render pagination controls\r\n  renderPaginationControls();\r\n\r\n  // Trigger custom event for page change\r\n  const event = new CustomEvent(\"aikb-pagination-change\", {\r\n    detail: {\r\n      page: currentPage,\r\n      results: getCurrentPageResults(),\r\n    },\r\n  });\r\n  document.dispatchEvent(event);\r\n\r\n  // Scroll to top of results\r\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\r\n  if (searchResultsContainer) {\r\n    const offset = 100; // Offset for fixed header\r\n    const top =\r\n      searchResultsContainer.getBoundingClientRect().top +\r\n      window.pageYOffset -\r\n      offset;\r\n    window.scrollTo({ top, behavior: \"smooth\" });\r\n  }\r\n}\r\n\r\n/**\r\n * Update pagination with new results\r\n * @param {Array} results - New results array\r\n */\r\nexport function updatePagination(results) {\r\n  allResults = results;\r\n  totalItems = results.length;\r\n  currentPage = 1; // Reset to first page\r\n\r\n  renderPaginationControls();\r\n}\r\n", "// Search card template generator for AI Knowledge Base results\n\n/**\n * Parse date string and extract \"Month YYYY\" format\n * @param {string} dateStr - Raw date string (e.g., \"December 2025\")\n * @returns {string} Formatted date or original string if parsing fails\n */\nfunction formatDate(dateStr) {\n  if (!dateStr) return \"\";\n\n  // If already in \"Month YYYY\" format, return as-is\n  const monthYearPattern = /^[A-Z][a-z]+ \\d{4}$/;\n  if (monthYearPattern.test(dateStr)) {\n    return dateStr;\n  }\n\n  // Try to parse as Date object\n  try {\n    const date = new Date(dateStr);\n    if (!isNaN(date.getTime())) {\n      const months = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\",\n      ];\n      return `${months[date.getMonth()]} ${date.getFullYear()}`;\n    }\n  } catch (e) {\n    // Fall through to return original\n  }\n\n  return dateStr;\n}\n\n/**\n * Highlight matched search terms in text (including partial matches)\n * @param {string} text - Original text\n * @param {Array<string>} matchedTerms - Terms to highlight\n * @returns {string} HTML string with <mark> tags around matched terms\n */\nfunction highlightMatches(text, matchedTerms) {\n  if (!text || !matchedTerms || matchedTerms.length === 0) {\n    return text;\n  }\n\n  let highlighted = text;\n\n  // Sort terms by length (longest first) to avoid partial replacements\n  const sortedTerms = [...matchedTerms].sort((a, b) => b.length - a.length);\n\n  sortedTerms.forEach((term) => {\n    // Create case-insensitive regex without word boundaries to match partial words\n    // Use negative lookahead/lookbehind to avoid matching already highlighted text\n    const regex = new RegExp(`(?!<mark[^>]*>)(${term})(?![^<]*<\\/mark>)`, \"gi\");\n    highlighted = highlighted.replace(regex, \"<mark>$1</mark>\");\n  });\n\n  return highlighted;\n}\n\n/**\n * Set HTML content safely (creates text nodes and mark elements)\n * @param {HTMLElement} element - Target element\n * @param {string} htmlString - HTML string with <mark> tags\n */\nfunction setHighlightedHTML(element, htmlString) {\n  element.innerHTML = \"\"; // Clear existing content\n\n  // Parse the HTML string and create DOM nodes\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(htmlString, \"text/html\");\n\n  // Append all child nodes from parsed content\n  Array.from(doc.body.childNodes).forEach((node) => {\n    element.appendChild(node.cloneNode(true));\n  });\n}\n\n/**\n * Create a search result card DOM element\n * @param {Object} result - Result data object\n * @param {string} result.title - Card title\n * @param {string} result.summary - Card summary/description\n * @param {Object} result.listMetadata - Metadata object\n * @param {Array<string>} result.listMetadata[\"Work area\"] - Array of work area tags\n * @param {Array<string>} result.listMetadata[\"Roles\"] - Array of roles for \"Good for\"\n * @param {string} result.date - Submission date\n * @param {string} result.liveUrl - URL for \"See more\" button\n * @param {string} result.submittedBy - Person who submitted\n * @param {Array<string>} result._matchedTerms - Matched search terms for highlighting\n * @param {number} result._offlineScore - Offline search relevance score\n * @returns {HTMLElement|null} Card element or null if required fields missing\n */\nfunction createSearchCard(result) {\n  // Validate required fields\n  if (!result.title || !result.summary || !result.liveUrl) {\n    return null;\n  }\n\n  // Create card container\n  const card = document.createElement(\"div\");\n  card.className = \"aikb-search-card\";\n\n  // Add data attributes for sorting\n  // Use offline score if available, otherwise rank or score\n  const relevance =\n    result._offlineScore || (result.rank ? -result.rank : result.score || 0);\n  card.setAttribute(\"data-sort-relevance\", relevance);\n\n  // Title: store for alphabetical sorting\n  card.setAttribute(\"data-sort-title\", result.title);\n\n  // Date: store timestamp for date sorting\n  const dateTimestamp = result.dateTimestamp || 0;\n  card.setAttribute(\"data-sort-date\", dateTimestamp);\n\n  // Create inner wrapper\n  const inner = document.createElement(\"div\");\n  inner.className = \"aikb-search-card__inner\";\n\n  // Create content section\n  const content = document.createElement(\"div\");\n  content.className = \"aikb-search-card__content\";\n\n  // Text section\n  const textSection = document.createElement(\"div\");\n  textSection.className = \"aikb-search-card__text\";\n\n  // Title (with highlighting if matched terms exist)\n  const title = document.createElement(\"h3\");\n  title.className = \"aikb-search-card__title\";\n\n  if (result._matchedTerms && result._matchedTerms.length > 0) {\n    const highlightedTitle = highlightMatches(\n      result.title,\n      result._matchedTerms,\n    );\n    setHighlightedHTML(title, highlightedTitle);\n  } else {\n    title.textContent = result.title;\n  }\n\n  textSection.appendChild(title);\n\n  // Summary (with highlighting if matched terms exist)\n  const summary = document.createElement(\"p\");\n  summary.className = \"aikb-search-card__summary\";\n\n  if (result._matchedTerms && result._matchedTerms.length > 0) {\n    const highlightedSummary = highlightMatches(\n      result.summary,\n      result._matchedTerms,\n    );\n    setHighlightedHTML(summary, highlightedSummary);\n  } else {\n    summary.textContent = result.summary;\n  }\n\n  textSection.appendChild(summary);\n\n  content.appendChild(textSection);\n\n  // Tags section (work areas from JSON payload)\n  const workAreas =\n    result.listMetadata && result.listMetadata[\"Work area\"]\n      ? result.listMetadata[\"Work area\"]\n      : [];\n  if (workAreas && workAreas.length > 0) {\n    const tagsContainer = document.createElement(\"div\");\n    tagsContainer.className = \"aikb-search-card__tags\";\n\n    // Create a tag for each work area\n    workAreas.forEach((workArea) => {\n      if (workArea && workArea.trim()) {\n        const tag = document.createElement(\"div\");\n        tag.className = \"aikb-search-card__tag\";\n        tag.textContent = workArea.trim();\n        tagsContainer.appendChild(tag);\n      }\n    });\n\n    if (tagsContainer.children.length > 0) {\n      content.appendChild(tagsContainer);\n    }\n  }\n\n  inner.appendChild(content);\n\n  // Actions section\n  const actions = document.createElement(\"div\");\n  actions.className = \"aikb-search-card__actions\";\n\n  // \"See more\" button\n  const button = document.createElement(\"a\");\n  button.href = result.liveUrl;\n  button.className = \"ntgc-btn ntgc-btn--secondary\";\n\n  const buttonText = document.createElement(\"span\");\n  buttonText.textContent = \"See more\";\n  button.appendChild(buttonText);\n\n  const icon = document.createElement(\"span\");\n  icon.className = \"fal fa-long-arrow-right\";\n  icon.setAttribute(\"aria-hidden\", \"true\");\n  button.appendChild(icon);\n\n  actions.appendChild(button);\n\n  // Metadata section\n  const metadata = document.createElement(\"div\");\n  metadata.className = \"aikb-search-card__metadata\";\n\n  // \"Good for\" row (roles from JSON payload)\n  const roles =\n    result.listMetadata && result.listMetadata[\"Roles\"]\n      ? result.listMetadata[\"Roles\"]\n      : [];\n  if (roles && roles.length > 0) {\n    const usefulRow = document.createElement(\"div\");\n    usefulRow.className = \"aikb-search-card__useful-for\";\n\n    const value = document.createElement(\"span\");\n    value.className = \"aikb-search-card__useful-value\";\n\n    const label = document.createElement(\"strong\");\n    label.textContent = \"Good for: \";\n    value.appendChild(label);\n\n    const rolesText = roles.join(\", \");\n\n    // Apply highlighting if matched terms exist\n    if (result._matchedTerms && result._matchedTerms.length > 0) {\n      const highlightedRoles = highlightMatches(\n        rolesText,\n        result._matchedTerms,\n      );\n      const tempSpan = document.createElement(\"span\");\n      setHighlightedHTML(tempSpan, highlightedRoles);\n      // Append all child nodes from the temp span\n      Array.from(tempSpan.childNodes).forEach((node) => {\n        value.appendChild(node);\n      });\n    } else {\n      const text = document.createTextNode(rolesText);\n      value.appendChild(text);\n    }\n\n    usefulRow.appendChild(value);\n\n    metadata.appendChild(usefulRow);\n  }\n\n  // Last updated date\n  if (result.date) {\n    const dateEl = document.createElement(\"div\");\n    dateEl.className = \"aikb-search-card__date\";\n    dateEl.textContent = `Last updated: ${formatDate(result.date)}`;\n    metadata.appendChild(dateEl);\n  }\n\n  actions.appendChild(metadata);\n  inner.appendChild(actions);\n\n  card.appendChild(inner);\n\n  return card;\n}\n\n/**\n * Render search results to the container\n * @param {Array<Object>} results - Array of result objects\n * @param {string} containerId - ID of the container element (default: \"search-results-list\")\n * @param {boolean} usePagination - Whether to use pagination (default: true)\n */\nexport function renderResults(\n  results,\n  containerId = \"search-results-list\",\n  usePagination = true,\n) {\n  // Try multiple selection methods\n  let container = document.getElementById(containerId);\n\n  if (!container) {\n    // Try jQuery selector as fallback\n    const $container = window.$ ? window.$(`#${containerId}`) : null;\n    container = $container && $container.length > 0 ? $container[0] : null;\n  }\n\n  if (!container) {\n    return;\n  }\n\n  // Clear existing content\n  container.innerHTML = \"\";\n\n  if (results.length === 0) {\n    const noResults = document.createElement(\"p\");\n    noResults.textContent = \"No results found.\";\n    noResults.style.padding = \"24px 48px\";\n    container.appendChild(noResults);\n    return;\n  }\n\n  // Initialize or update pagination\n  if (usePagination) {\n    // Dynamic import to avoid circular dependencies\n    import(\"./pagination.js\").then(\n      ({ initializePagination, getCurrentPageResults }) => {\n        initializePagination(results, 10);\n        const pageResults = getCurrentPageResults();\n\n        // Render cards for current page\n        const cards = pageResults\n          .map((result) => createSearchCard(result))\n          .filter((card) => card !== null);\n\n        cards.forEach((card) => container.appendChild(card));\n      },\n    );\n  } else {\n    // Render all cards without pagination\n    const cards = results\n      .map((result) => createSearchCard(result))\n      .filter((card) => card !== null);\n\n    cards.forEach((card) => container.appendChild(card));\n  }\n}\n\n// Expose globally for legacy usage\nwindow.aikbRenderResults = renderResults;\n\n// Track if pagination listener has been added to prevent duplicates\nlet paginationListenerAdded = false;\n\n// Listen for pagination page changes\nif (!paginationListenerAdded) {\n  document.addEventListener(\"aikb-pagination-change\", (event) => {\n    const { results } = event.detail;\n    const container = document.getElementById(\"search-results-list\");\n\n    if (container && results) {\n      container.innerHTML = \"\";\n\n      const cards = results\n        .map((result) => createSearchCard(result))\n        .filter((card) => card !== null);\n\n      cards.forEach((card) => container.appendChild(card));\n    }\n  });\n  paginationListenerAdded = true;\n}\n", "/**\n * Custom Multi-Select Dropdown Component\n * Replaces the work area filter with a multi-select dropdown with OK/Cancel buttons\n *\n * Performance Optimization:\n * Uses event delegation for checkbox listeners to reduce memory footprint.\n * Instead of attaching O(N) individual listeners (2 per checkbox where N = number of options),\n * this implementation uses a single delegated listener on the dropdown panel.\n * For a typical dropdown with 10 options, this reduces 20+ listeners to just 5 total,\n * significantly improving performance and preventing memory leaks during dropdown recreation cycles.\n */\n\nexport class MultiSelectDropdown {\n  constructor(selectElement) {\n    this.selectElement = selectElement;\n    this.options = [];\n    this.selectedValues = new Set();\n    this.tempSelectedValues = new Set();\n    this.isOpen = false;\n\n    this.container = null;\n    this.displayButton = null;\n    this.dropdownPanel = null;\n\n    // Store bound event handlers for proper cleanup\n    this._boundHandlers = {};\n\n    this.init();\n  }\n\n  init() {\n    // Hide original select element\n    this.selectElement.style.display = \"none\";\n\n    // Create custom dropdown structure\n    this.createDropdownStructure();\n\n    // Select all options by default\n    this.selectAllByDefault();\n\n    // Bind event listeners\n    this.bindEvents();\n\n    // Store instance reference on container for external access\n    this.container.__multiSelectInstance = this;\n  }\n\n  selectAllByDefault() {\n    // Add all enabled option values to selectedValues\n    this.options.forEach((option) => {\n      // Check if the corresponding native select option is enabled\n      const nativeOption = Array.from(this.selectElement.options).find(\n        (opt) => opt.value === option.value,\n      );\n      if (nativeOption && !nativeOption.disabled) {\n        this.selectedValues.add(option.value);\n      }\n    });\n\n    // Sync with native select\n    this.syncNativeSelect();\n\n    // Update display text\n    this.updateDisplayText();\n\n    // Update checkboxes\n    this.tempSelectedValues = new Set(this.selectedValues);\n  }\n\n  createDropdownStructure() {\n    // Main container\n    this.container = document.createElement(\"div\");\n    this.container.className = \"aikb-multiselect-container\";\n\n    // Display button (shows selected items)\n    this.displayButton = document.createElement(\"button\");\n    this.displayButton.type = \"button\";\n    this.displayButton.className = \"aikb-multiselect-button\";\n    this.displayButton.innerHTML = `\n      <span class=\"aikb-multiselect-text\">Select Options</span>\n      <span class=\"aikb-multiselect-icon\"></span>\n    `;\n\n    // Dropdown panel\n    this.dropdownPanel = document.createElement(\"div\");\n    this.dropdownPanel.className = \"aikb-multiselect-panel\";\n    this.dropdownPanel.style.display = \"none\";\n\n    // Options list\n    const optionsList = document.createElement(\"div\");\n    optionsList.className = \"aikb-multiselect-options\";\n\n    // Add \"Select All\" option\n    const selectAllItem = this.createOptionItem({\n      value: \"_select_all\",\n      label: \"Select All\",\n      isSelectAll: true,\n    });\n    optionsList.appendChild(selectAllItem);\n\n    // Get options from original select element\n    Array.from(this.selectElement.options).forEach((option) => {\n      if (!option.disabled && option.value) {\n        this.options.push({\n          value: option.value,\n          label: option.textContent,\n        });\n\n        const optionItem = this.createOptionItem({\n          value: option.value,\n          label: option.textContent,\n        });\n        optionsList.appendChild(optionItem);\n      }\n    });\n\n    // Action buttons\n    const actionsContainer = document.createElement(\"div\");\n    actionsContainer.className = \"aikb-multiselect-actions\";\n\n    const okButton = document.createElement(\"button\");\n    okButton.type = \"button\";\n    okButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-ok\";\n    okButton.textContent = \"OK\";\n    this._boundHandlers.okClick = () => this.handleOk();\n    okButton.addEventListener(\"click\", this._boundHandlers.okClick);\n\n    const cancelButton = document.createElement(\"button\");\n    cancelButton.type = \"button\";\n    cancelButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-cancel\";\n    cancelButton.textContent = \"Cancel\";\n    this._boundHandlers.cancelClick = () => this.handleCancel();\n    cancelButton.addEventListener(\"click\", this._boundHandlers.cancelClick);\n\n    actionsContainer.appendChild(okButton);\n    actionsContainer.appendChild(cancelButton);\n\n    // Assemble dropdown panel\n    this.dropdownPanel.appendChild(optionsList);\n    this.dropdownPanel.appendChild(actionsContainer);\n\n    // Setup event delegation for checkboxes\n    this._boundHandlers.checkboxChange = (e) => {\n      // Only process checkbox elements\n      if (!e.target.classList.contains(\"aikb-multiselect-checkbox\")) {\n        return;\n      }\n\n      if (e.target.value === \"_select_all\") {\n        this.handleSelectAll(e);\n      } else {\n        this.updateSelectAllState();\n      }\n    };\n    this.dropdownPanel.addEventListener(\n      \"change\",\n      this._boundHandlers.checkboxChange,\n    );\n\n    // Assemble container\n    this.container.appendChild(this.displayButton);\n    this.container.appendChild(this.dropdownPanel);\n\n    // Insert after original select\n    this.selectElement.parentNode.insertBefore(\n      this.container,\n      this.selectElement.nextSibling,\n    );\n  }\n\n  createOptionItem(option) {\n    const item = document.createElement(\"label\");\n    item.className = \"aikb-multiselect-option\";\n    if (option.isSelectAll) {\n      item.classList.add(\"aikb-multiselect-option-all\");\n    }\n\n    const checkbox = document.createElement(\"input\");\n    checkbox.type = \"checkbox\";\n    checkbox.className = \"aikb-multiselect-checkbox\";\n    checkbox.value = option.value;\n    checkbox.dataset.label = option.label;\n\n    // Event listeners handled by delegation in dropdownPanel\n\n    const labelText = document.createElement(\"span\");\n    labelText.className = \"aikb-multiselect-label\";\n    labelText.textContent = option.label;\n\n    item.appendChild(checkbox);\n    item.appendChild(labelText);\n\n    return item;\n  }\n\n  bindEvents() {\n    // Toggle dropdown on button click\n    this._boundHandlers.displayClick = (e) => {\n      e.stopPropagation();\n      this.toggle();\n    };\n    this.displayButton.addEventListener(\n      \"click\",\n      this._boundHandlers.displayClick,\n    );\n\n    // Close dropdown when clicking outside\n    this._boundHandlers.documentClick = (e) => {\n      if (this.container && !this.container.contains(e.target) && this.isOpen) {\n        this.handleCancel();\n      }\n    };\n    document.addEventListener(\"click\", this._boundHandlers.documentClick);\n  }\n\n  toggle() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  open() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    this.isOpen = true;\n    this.dropdownPanel.style.display = \"block\";\n    this.displayButton.classList.add(\"aikb-multiselect-open\");\n\n    // Copy current selections to temp\n    this.tempSelectedValues = new Set(this.selectedValues);\n\n    // Update checkboxes to match temp selections\n    this.updateCheckboxes();\n  }\n\n  close() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    this.isOpen = false;\n    this.dropdownPanel.style.display = \"none\";\n    this.displayButton.classList.remove(\"aikb-multiselect-open\");\n  }\n\n  handleOk() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    // Get checked values\n    const checkboxes = this.dropdownPanel.querySelectorAll(\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\n    );\n    this.selectedValues.clear();\n\n    checkboxes.forEach((checkbox) => {\n      if (checkbox.checked) {\n        this.selectedValues.add(checkbox.value);\n      }\n    });\n\n    // Sync the hidden native select so downstream code sees selectedOptions\n    this.syncNativeSelect();\n\n    // Update display text\n    this.updateDisplayText();\n\n    // Trigger change event\n    this.triggerChange();\n\n    // Close dropdown\n    this.close();\n  }\n\n  handleCancel() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    // Revert to previous selections\n    this.tempSelectedValues = new Set(this.selectedValues);\n    this.updateCheckboxes();\n\n    // Close dropdown\n    this.close();\n  }\n\n  handleSelectAll(e) {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    const isChecked = e.target.checked;\n    const checkboxes = this.dropdownPanel.querySelectorAll(\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\n    );\n\n    checkboxes.forEach((checkbox) => {\n      // Skip disabled checkboxes\n      if (!checkbox.disabled) {\n        checkbox.checked = isChecked;\n      }\n    });\n  }\n\n  updateSelectAllState() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    const selectAllCheckbox = this.dropdownPanel.querySelector(\n      '.aikb-multiselect-checkbox[value=\"_select_all\"]',\n    );\n    const checkboxes = this.dropdownPanel.querySelectorAll(\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\n    );\n    // Only count enabled checkboxes\n    const enabledCheckboxes = Array.from(checkboxes).filter(\n      (cb) => !cb.disabled,\n    );\n    const checkedCount = enabledCheckboxes.filter((cb) => cb.checked).length;\n\n    if (selectAllCheckbox) {\n      selectAllCheckbox.checked =\n        enabledCheckboxes.length > 0 &&\n        checkedCount === enabledCheckboxes.length;\n      selectAllCheckbox.indeterminate =\n        checkedCount > 0 && checkedCount < enabledCheckboxes.length;\n    }\n  }\n\n  updateCheckboxes() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    const checkboxes = this.dropdownPanel.querySelectorAll(\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\n    );\n\n    checkboxes.forEach((checkbox) => {\n      checkbox.checked = this.tempSelectedValues.has(checkbox.value);\n    });\n\n    this.updateSelectAllState();\n  }\n\n  updateDisplayText() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    const textElement = this.displayButton.querySelector(\n      \".aikb-multiselect-text\",\n    );\n\n    if (this.selectedValues.size === 0) {\n      textElement.textContent = \"Select Options\";\n      textElement.classList.remove(\"aikb-multiselect-has-selection\");\n    } else if (this.selectedValues.size === this.options.length) {\n      textElement.textContent = \"All selected\";\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\n    } else if (this.selectedValues.size === 1) {\n      // Show the label when only 1 item is selected\n      const selectedLabels = Array.from(this.selectedValues).map((value) => {\n        const option = this.options.find((opt) => opt.value === value);\n        return option ? option.label : value;\n      });\n      textElement.textContent = selectedLabels[0];\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\n    } else {\n      // Show \"# selected\" when more than 1 item is selected\n      textElement.textContent = `${this.selectedValues.size} selected`;\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\n    }\n  }\n\n  triggerChange() {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    // Dispatch custom event\n    const event = new CustomEvent(\"multiselect-change\", {\n      detail: {\n        values: Array.from(this.selectedValues),\n      },\n    });\n    this.container.dispatchEvent(event);\n\n    // Also emit a native change event on the original select so listeners fire\n    if (this.selectElement) {\n      const changeEvent = new Event(\"change\", { bubbles: true });\n      this.selectElement.dispatchEvent(changeEvent);\n    }\n  }\n\n  syncNativeSelect() {\n    if (!this.selectElement) return;\n\n    // Clear existing selection\n    Array.from(this.selectElement.options).forEach((opt) => {\n      opt.selected = false;\n    });\n\n    // Apply new selections\n    Array.from(this.selectElement.options).forEach((opt) => {\n      if (this.selectedValues.has(opt.value)) {\n        opt.selected = true;\n      }\n    });\n  }\n\n  getSelectedValues() {\n    return Array.from(this.selectedValues);\n  }\n\n  reset() {\n    this.selectedValues.clear();\n    this.tempSelectedValues.clear();\n    this.updateDisplayText();\n    this.updateCheckboxes();\n  }\n\n  /**\n   * Update option labels with counts\n   * @param {Map<string, number>} countsMap - Map of option values to counts\n   */\n  updateCounts(countsMap) {\n    if (!this.container || !this.dropdownPanel) {\n      return;\n    }\n    // Update native select options\n    Array.from(this.selectElement.options).forEach((option) => {\n      if (option.value && countsMap.has(option.value)) {\n        const count = countsMap.get(option.value);\n        const baseLabel = option.textContent.replace(/\\s*\\(\\d+\\)\\s*$/, \"\"); // Remove existing count\n\n        if (count > 0) {\n          option.textContent = `${baseLabel} (${count})`;\n          option.disabled = false;\n        } else {\n          option.textContent = baseLabel;\n          option.disabled = true;\n          option.selected = false;\n        }\n      }\n    });\n\n    // Update custom dropdown labels\n    const checkboxes = this.dropdownPanel.querySelectorAll(\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\n    );\n\n    checkboxes.forEach((checkbox) => {\n      const value = checkbox.value;\n      if (countsMap.has(value)) {\n        const count = countsMap.get(value);\n        const optionItem = checkbox.parentElement;\n        const labelSpan = optionItem.querySelector(\".aikb-multiselect-label\");\n\n        if (labelSpan) {\n          // Remove existing badge or count text\n          const existingBadge = labelSpan.querySelector(\".aikb-count-badge\");\n          if (existingBadge) {\n            existingBadge.remove();\n          }\n\n          // Get base label text without count\n          let baseLabel = labelSpan.textContent\n            .replace(/\\s*\\(\\d+\\)\\s*$/, \"\")\n            .trim();\n\n          // Clear and rebuild label content\n          labelSpan.textContent = baseLabel;\n\n          // Add count badge (always show, even for 0)\n          const badge = document.createElement(\"span\");\n          badge.className = \"aikb-count-badge\";\n          badge.textContent = count.toString();\n          labelSpan.appendChild(badge);\n\n          // Disable checkbox and add disabled class if count is 0\n          if (count === 0) {\n            checkbox.disabled = true;\n            checkbox.checked = false;\n            optionItem.classList.add(\"aikb-multiselect-option-disabled\");\n\n            // Remove from selectedValues if it was selected\n            this.selectedValues.delete(value);\n            this.tempSelectedValues.delete(value);\n\n            // Update option in this.options array with count\n            const optionIndex = this.options.findIndex(\n              (opt) => opt.value === value,\n            );\n            if (optionIndex !== -1) {\n              this.options[optionIndex].label = `${baseLabel} (${count})`;\n            }\n          } else {\n            // Enable checkbox and remove disabled class if count > 0\n            checkbox.disabled = false;\n            optionItem.classList.remove(\"aikb-multiselect-option-disabled\");\n\n            // Update option in this.options array for display text calculation\n            const optionIndex = this.options.findIndex(\n              (opt) => opt.value === value,\n            );\n            if (optionIndex !== -1) {\n              this.options[optionIndex].label = `${baseLabel} (${count})`;\n            }\n          }\n        }\n      }\n    });\n\n    // Sync native select to match selectedValues after removing 0-count options\n    this.syncNativeSelect();\n\n    // Update display text to reflect new labels\n    this.updateDisplayText();\n  }\n\n  destroy() {\n    // Remove all event listeners to prevent memory leaks\n    if (this._boundHandlers) {\n      // Remove document-level listener (critical to prevent null reference errors)\n      if (this._boundHandlers.documentClick) {\n        document.removeEventListener(\n          \"click\",\n          this._boundHandlers.documentClick,\n        );\n      }\n\n      // Remove display button listener\n      if (this.displayButton && this._boundHandlers.displayClick) {\n        this.displayButton.removeEventListener(\n          \"click\",\n          this._boundHandlers.displayClick,\n        );\n      }\n\n      // Remove delegated checkbox listener\n      if (this.dropdownPanel && this._boundHandlers.checkboxChange) {\n        this.dropdownPanel.removeEventListener(\n          \"change\",\n          this._boundHandlers.checkboxChange,\n        );\n      }\n\n      // OK/Cancel button listeners are removed when container is removed from DOM\n      // but we clear the references for completeness\n    }\n\n    // Close dropdown if open\n    this.isOpen = false;\n\n    // Remove the custom dropdown container from DOM\n    if (this.container && this.container.parentNode) {\n      this.container.parentNode.removeChild(this.container);\n    }\n\n    // Show the original select element\n    if (this.selectElement) {\n      this.selectElement.style.display = \"\";\n    }\n\n    // Clear all references\n    this.container = null;\n    this.displayButton = null;\n    this.dropdownPanel = null;\n    this._boundHandlers = null;\n  }\n}\n\n/**\n * Initialize multi-select dropdown on a select element\n * @param {string|HTMLElement} selector - CSS selector or DOM element\n * @returns {MultiSelectDropdown} - MultiSelectDropdown instance\n */\nexport function initMultiSelect(selector) {\n  const element =\n    typeof selector === \"string\" ? document.querySelector(selector) : selector;\n\n  if (!element) {\n    return null;\n  }\n\n  return new MultiSelectDropdown(element);\n}\n", "/**\n * Dynamically create the search input and icon to match the attached design\n */\nexport function populateSearchInput() {\n  const container = document.getElementById(\"search-container\");\n  if (!container) return;\n  container.innerHTML = \"\";\n\n  // Outer wrapper\n  const wrapper = document.createElement(\"div\");\n  wrapper.style.width = \"100%\";\n  wrapper.style.height = \"100%\";\n  wrapper.style.padding = \"24px\";\n  wrapper.style.background = \"var(--clr-surface-primary, white)\";\n  wrapper.style.overflow = \"hidden\";\n  wrapper.style.outline = \"1px var(--clr-stroke-default, #AFB5BF) solid\";\n  wrapper.style.outlineOffset = \"-1px\";\n  wrapper.style.justifyContent = \"flex-start\";\n  wrapper.style.alignItems = \"center\";\n  wrapper.style.gap = \"10px\";\n  wrapper.style.display = \"inline-flex\";\n\n  // Inner flex\n  const inner = document.createElement(\"div\");\n  inner.style.flex = \"1 1 0\";\n  inner.style.justifyContent = \"space-between\";\n  inner.style.alignItems = \"center\";\n  inner.style.display = \"flex\";\n\n  // Placeholder text\n  const placeholder = document.createElement(\"div\");\n  placeholder.textContent = \"Search for a AI prompt or use case...\";\n  placeholder.style.color = \"var(--clr-text-helper, #606A80)\";\n  placeholder.style.fontSize = \"16px\";\n  placeholder.style.fontFamily = \"Roboto\";\n  placeholder.style.fontWeight = \"400\";\n  placeholder.style.lineHeight = \"24px\";\n  placeholder.style.wordWrap = \"break-word\";\n\n  // Icon container\n  const iconContainer = document.createElement(\"div\");\n  iconContainer.setAttribute(\"data-colour\", \"NTGC blue\");\n  iconContainer.style.width = \"24px\";\n  iconContainer.style.height = \"24px\";\n  iconContainer.style.position = \"relative\";\n  iconContainer.style.overflow = \"hidden\";\n\n  // Icon (small colored div)\n  const icon = document.createElement(\"div\");\n  icon.style.width = \"20px\";\n  icon.style.height = \"20px\";\n  icon.style.left = \"2px\";\n  icon.style.top = \"2px\";\n  icon.style.position = \"absolute\";\n  icon.style.background = \"var(--clr-icon-subtle, #878F9F)\";\n\n  iconContainer.appendChild(icon);\n  inner.appendChild(placeholder);\n  inner.appendChild(iconContainer);\n  wrapper.appendChild(inner);\n  container.appendChild(wrapper);\n}\n// Dynamically populate work area and sort dropdowns from search data\nimport { initMultiSelect } from \"./multi-select-dropdown.js\";\n\nlet multiSelectInstance = null;\nlet staticWorkAreas = [];\n\n/**\n * Extract unique work areas from search results (used as fallback if static fetch fails)\n * @param {Array} results - Array of search result objects\n * @returns {Array<string>} - Sorted array of unique work area values\n */\nfunction extractWorkAreas(results) {\n  const workAreaSet = new Set();\n\n  results.forEach((result) => {\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\n      const workAreas = result.listMetadata[\"Work area\"];\n      // Work areas is already an array\n      if (Array.isArray(workAreas)) {\n        workAreas.forEach((area) => {\n          const trimmed = area.trim();\n          if (trimmed) {\n            workAreaSet.add(trimmed);\n          }\n        });\n      }\n    }\n  });\n\n  // Convert to array and sort alphabetically\n  return Array.from(workAreaSet).sort((a, b) => {\n    // Put \"All work areas\" first if it exists\n    if (a === \"All work areas\") return -1;\n    if (b === \"All work areas\") return 1;\n    return a.localeCompare(b);\n  });\n}\n\n/**\n * Calculate counts for each work area from search results\n * @param {Array<string>} workAreas - Array of work area names\n * @param {Array} results - Array of search result objects\n * @returns {Map<string, number>} Map of work area names to counts\n */\nexport function calculateWorkAreaCounts(workAreas, results) {\n  const counts = new Map();\n\n  // Initialize all work areas with 0 count\n  workAreas.forEach((workArea) => {\n    counts.set(workArea, 0);\n  });\n\n  // Count occurrences in results\n  results.forEach((result) => {\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\n      const resultWorkAreas = result.listMetadata[\"Work area\"];\n      if (Array.isArray(resultWorkAreas)) {\n        resultWorkAreas.forEach((area) => {\n          const trimmed = area.trim();\n          if (trimmed && counts.has(trimmed)) {\n            counts.set(trimmed, counts.get(trimmed) + 1);\n          }\n        });\n      }\n    }\n  });\n\n  // Set count for \"All work areas\" to total results\n  if (counts.has(\"All work areas\")) {\n    counts.set(\"All work areas\", results.length);\n  }\n\n  return counts;\n}\n\n/**\n * Store static work areas list for later use\n * @param {Array<string>} workAreas - Array of work area names from static source\n */\nexport function setStaticWorkAreas(workAreas) {\n  staticWorkAreas = workAreas;\n}\n\n/**\n * Populate work area dropdown with dynamic options\n * @param {Array<string>} workAreas - Array of work area values\n */\nfunction populateWorkAreaDropdown(workAreas) {\n  const dropdown = document.getElementById(\"document_type\");\n  if (!dropdown) {\n    return;\n  }\n\n  // Clear existing options\n  dropdown.innerHTML = \"\";\n\n  // Add default \"Select a work area\" option\n  const defaultOption = document.createElement(\"option\");\n  defaultOption.value = \"\";\n  defaultOption.textContent = \"Select a work area\";\n  defaultOption.disabled = true;\n  defaultOption.selected = true;\n  dropdown.appendChild(defaultOption);\n\n  // Add work area options\n  workAreas.forEach((workArea) => {\n    const option = document.createElement(\"option\");\n    option.value = workArea;\n    option.textContent = workArea;\n    dropdown.appendChild(option);\n  });\n\n\n  // Initialize multi-select after populating options\n  if (multiSelectInstance) {\n    // Destroy previous instance if exists\n    multiSelectInstance.destroy();\n    multiSelectInstance = null;\n  }\n\n  // Only initialize if not already initialized\n  if (\n    !dropdown.nextElementSibling ||\n    !dropdown.nextElementSibling.classList.contains(\n      \"aikb-multiselect-container\",\n    )\n  ) {\n    multiSelectInstance = initMultiSelect(dropdown);\n  }\n}\n\n/**\n * Populate sort dropdown with sort options\n */\nfunction populateSortDropdown() {\n  const container = document.getElementById(\"select-question-3\");\n  if (!container) {\n    return;\n  }\n\n  // Check if dropdown already exists\n  let dropdown = document.getElementById(\"owner\");\n\n  // If dropdown doesn't exist, create the entire structure\n  if (!dropdown) {\n    // Clear container content (except label)\n    const label = container.querySelector(\"label\");\n    container.innerHTML = \"\";\n    if (label) {\n      container.appendChild(label);\n    } else {\n      // Create label if it doesn't exist\n      const newLabel = document.createElement(\"label\");\n      newLabel.className = \"ntgc-form-input--label\";\n      newLabel.setAttribute(\"for\", \"select-input-2\");\n      newLabel.textContent = \"Sort\";\n      container.appendChild(newLabel);\n    }\n\n    // Create dropdown wrapper\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"aikb-dropdown-wrapper\";\n\n    // Create inner wrapper\n    const inner = document.createElement(\"div\");\n    inner.className = \"aikb-dropdown-inner\";\n\n    // Create select element\n    dropdown = document.createElement(\"select\");\n    dropdown.name = \"sort\";\n    dropdown.className =\n      \"ntgc-select ntgc-select--block ntgc-select-input--filter\";\n    dropdown.id = \"owner\";\n\n    // Append elements\n    inner.appendChild(dropdown);\n    wrapper.appendChild(inner);\n    container.appendChild(wrapper);\n  } else {\n    // Clear existing options if dropdown exists\n    dropdown.innerHTML = \"\";\n  }\n\n  // Define sort options\n  const sortOptions = [\n    { value: \"relevance\", label: \"Relevance\", selected: true },\n    { value: \"date-newest\", label: \"Date (newest first)\" },\n    { value: \"date-oldest\", label: \"Date (oldest first)\" },\n    { value: \"title-az\", label: \"Title (A-Z)\" },\n    { value: \"title-za\", label: \"Title (Z-A)\" },\n  ];\n\n  // Add options to dropdown\n  sortOptions.forEach((opt) => {\n    const option = document.createElement(\"option\");\n    option.value = opt.value;\n    option.textContent = opt.label;\n    if (opt.selected) option.selected = true;\n    dropdown.appendChild(option);\n  });\n\n}\n\n/**\n * Add chevron-down icons to dropdowns\n * Icons are displayed via CSS ::before pseudo-elements\n */\nfunction addDropdownIcons() {\n  // Add icon to work area dropdown\n  const workAreaDropdown = document.getElementById(\"document_type\");\n  if (\n    workAreaDropdown &&\n    !workAreaDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\n  ) {\n    const icon = document.createElement(\"div\");\n    icon.className = \"aikb-dropdown-icon\";\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\n\n    const wrapper = workAreaDropdown.closest(\".aikb-dropdown-wrapper\");\n    if (wrapper) {\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\n      if (inner) {\n        inner.appendChild(icon);\n      }\n    }\n  }\n\n  // Add icon to sort dropdown\n  const sortDropdown = document.getElementById(\"owner\");\n  if (\n    sortDropdown &&\n    !sortDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\n  ) {\n    const icon = document.createElement(\"div\");\n    icon.className = \"aikb-dropdown-icon\";\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\n\n    const wrapper = sortDropdown.closest(\".aikb-dropdown-wrapper\");\n    if (wrapper) {\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\n      if (inner) {\n        inner.appendChild(icon);\n      }\n    }\n  }\n}\n\n/**\n * Initialize dropdowns with data from search results\n * @param {Array} results - Array of search result objects\n * @param {Array<string>} workAreasFromFetch - Optional pre-fetched work areas list\n */\nexport function initializeDropdowns(results, workAreasFromFetch = null) {\n\n  // Use static work areas if available, otherwise extract from results\n  let workAreas;\n  if (workAreasFromFetch && workAreasFromFetch.length > 0) {\n    workAreas = workAreasFromFetch;\n  } else if (staticWorkAreas.length > 0) {\n    workAreas = staticWorkAreas;\n  } else {\n    workAreas = extractWorkAreas(results);\n  }\n\n  populateWorkAreaDropdown(workAreas);\n\n  // Calculate and apply counts\n  const counts = calculateWorkAreaCounts(workAreas, results);\n  if (multiSelectInstance) {\n    multiSelectInstance.updateCounts(counts);\n  }\n\n  // Populate sort options\n  populateSortDropdown();\n\n  // Add chevron icons\n  addDropdownIcons();\n\n}\n\n/**\n * Get the current multi-select instance\n * @returns {object|null} The multi-select instance or null\n */\nexport function getMultiSelectInstance() {\n  return multiSelectInstance;\n}\n\n/**\n * Initialize on page load with empty state\n */\nexport function initializeEmptyDropdowns() {\n\n  // Dynamically create the search input and icon\n  populateSearchInput();\n\n  // Populate sort options (not data-dependent)\n  populateSortDropdown();\n\n  // Add default \"Select a work area\" to work area dropdown\n  populateWorkAreaDropdown([]);\n\n  // Add chevron icons\n  addDropdownIcons();\n\n}\n", "/**\n * Applied Filters Display Module\n * Manages the display and interaction of applied filter pills\n */\n\n/**\n * Display applied filters as pills\n * @param {Object} filters - Object containing active filters\n */\nexport function displayAppliedFilters(filters) {\n  const section = document.getElementById(\"appliedFiltersSection\");\n  const container = document.getElementById(\"appliedFilters\");\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\n\n  if (!section || !container) {\n    return;\n  }\n\n  // Clear existing pills\n  container.innerHTML = \"\";\n\n  let hasFilters = false;\n\n  // Add search query pill (green)\n  if (filters.searchQuery && filters.searchQuery.trim()) {\n    hasFilters = true;\n    const pill = createFilterPill(\n      \"Search\",\n      filters.searchQuery,\n      \"bg-success\",\n      \"search\"\n    );\n    container.appendChild(pill);\n  }\n\n  // Add work area pills (primary blue)\n  if (filters.workAreas && filters.workAreas.length > 0) {\n    // Don't show pills if all work areas are selected\n    const allWorkAreasSelected = isAllWorkAreasSelected(filters.workAreas);\n\n    if (!allWorkAreasSelected) {\n      hasFilters = true;\n      filters.workAreas.forEach((workArea) => {\n        const pill = createFilterPill(\n          \"Work area\",\n          workArea,\n          \"bg-primary\",\n          \"work-area\",\n          workArea\n        );\n        container.appendChild(pill);\n      });\n    }\n  }\n\n  // Do not add sort pill\n\n  // Always show Clear All button when any filter is active\n  if (clearAllBtn) {\n    clearAllBtn.style.display = hasFilters ? \"inline-flex\" : \"none\";\n    clearAllBtn.style.marginLeft = \"8px\";\n    clearAllBtn.style.verticalAlign = \"middle\";\n    clearAllBtn.style.alignItems = \"center\";\n    container.appendChild(clearAllBtn);\n  }\n\n  // Show/hide section based on whether filters are active\n  section.style.display = hasFilters ? \"block\" : \"none\";\n}\n\n/**\n * Check if all work areas are selected\n * @param {Array} selectedWorkAreas - Currently selected work areas\n * @returns {boolean}\n */\nfunction isAllWorkAreasSelected(selectedWorkAreas) {\n  const dropdown = document.getElementById(\"document_type\");\n  if (!dropdown) return false;\n\n  const totalOptions = Array.from(dropdown.options).filter(\n    (opt) => !opt.disabled && opt.value\n  ).length;\n\n  return selectedWorkAreas.length === totalOptions;\n}\n\n/**\n * Get user-friendly label for sort option\n * @param {string} sortValue - Sort value\n * @returns {string} - User-friendly label\n */\nfunction getSortLabel(sortValue) {\n  const sortLabels = {\n    relevance: \"Relevance\",\n    \"date-newest\": \"Date (newest first)\",\n    \"date-oldest\": \"Date (oldest first)\",\n    \"title-az\": \"Title (A-Z)\",\n    \"title-za\": \"Title (Z-A)\",\n  };\n  return sortLabels[sortValue] || sortValue;\n}\n\n/**\n * Create a filter pill element\n * @param {string} label - Filter category label\n * @param {string} value - Filter value\n * @param {string} badgeClass - Bootstrap badge class (bg-success, bg-primary, etc.)\n * @param {string} filterType - Type of filter for removal\n * @param {string} filterValue - Specific value to remove (for multi-value filters)\n * @returns {HTMLElement} - Filter pill element\n */\nfunction createFilterPill(label, value, badgeClass, filterType, filterValue) {\n  const pill = document.createElement(\"span\");\n  pill.className = `badge ${badgeClass} filter-pill d-inline-flex align-items-center`;\n\n  const pillLabel = document.createElement(\"span\");\n  pillLabel.className = \"pill-label\";\n  pillLabel.textContent = `${label}:`;\n\n  const pillValue = document.createElement(\"span\");\n  pillValue.className = \"pill-value\";\n  pillValue.textContent = value;\n\n  const removeButton = document.createElement(\"button\");\n  removeButton.type = \"button\";\n  removeButton.className = \"pill-remove\";\n  removeButton.title = `Remove ${label}: ${value}`;\n  removeButton.setAttribute(\"data-filter-type\", filterType);\n  if (filterValue) {\n    removeButton.setAttribute(\"data-filter-value\", filterValue);\n  }\n\n  const icon = document.createElement(\"span\");\n  icon.className = \"fas fa-times\";\n\n  removeButton.appendChild(icon);\n\n  // Add click handler\n  removeButton.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    removeFilter(filterType, filterValue);\n  });\n\n  pill.appendChild(pillLabel);\n  pill.appendChild(pillValue);\n  pill.appendChild(removeButton);\n\n  return pill;\n}\n\n/**\n * Remove a specific filter\n * @param {string} filterType - Type of filter to remove\n * @param {string} filterValue - Specific value to remove (optional)\n */\nasync function removeFilter(filterType, filterValue) {\n\n  switch (filterType) {\n    case \"search\":\n      // Clear search input\n      const searchInput = document.getElementById(\"search\");\n      if (searchInput) {\n        searchInput.value = \"\";\n        // Trigger reload of initial results\n        const { loadInitialResults } = await import(\n          \"./load-initial-results.js\"\n        );\n        loadInitialResults();\n      }\n      break;\n\n    case \"work-area\":\n      // Unselect specific work area from multi-select\n      const workAreaDropdown = document.getElementById(\"document_type\");\n      if (workAreaDropdown && filterValue) {\n        const option = Array.from(workAreaDropdown.options).find(\n          (opt) => opt.value === filterValue\n        );\n        if (option) {\n          option.selected = false;\n        }\n\n        // Trigger change event to reapply filters\n        const changeEvent = new Event(\"change\", { bubbles: true });\n        workAreaDropdown.dispatchEvent(changeEvent);\n\n        // Also trigger for multi-select component if it exists\n        const multiSelectContainer = workAreaDropdown.nextElementSibling;\n        if (\n          multiSelectContainer &&\n          multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\n        ) {\n          const instance = multiSelectContainer.__multiSelectInstance;\n          if (instance) {\n            instance.selectedValues.delete(filterValue);\n            instance.syncNativeSelect();\n            instance.updateDisplayText();\n            instance.triggerChange();\n          }\n        }\n      }\n      break;\n\n    // ...existing code...\n  }\n}\n\n/**\n * Clear all filters\n */\nexport async function clearAllFilters() {\n\n  // Clear search input\n  const searchInput = document.getElementById(\"search\");\n  if (searchInput) {\n    searchInput.value = \"\";\n  }\n\n  // Reset work area dropdown to all selected\n  const workAreaDropdown = document.getElementById(\"document_type\");\n  if (workAreaDropdown) {\n    Array.from(workAreaDropdown.options).forEach((opt) => {\n      if (!opt.disabled && opt.value) {\n        opt.selected = true;\n      }\n    });\n\n    // Update multi-select component if it exists\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\n    if (\n      multiSelectContainer &&\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\n    ) {\n      const instance = multiSelectContainer.__multiSelectInstance;\n      if (instance && typeof instance.selectAllByDefault === \"function\") {\n        instance.selectAllByDefault();\n        instance.triggerChange();\n      }\n    }\n  }\n\n  // Hide applied filters section\n  const section = document.getElementById(\"appliedFiltersSection\");\n  if (section) {\n    section.style.display = \"none\";\n  }\n\n  // Reload initial results\n  const { loadInitialResults } = await import(\"./load-initial-results.js\");\n  loadInitialResults();\n}\n\n/**\n * Initialize \"Clear All\" button\n */\nexport function initClearAllButton() {\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\n  if (clearAllBtn) {\n    clearAllBtn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      clearAllFilters();\n    });\n  }\n}\n\n/**\n * Get current filter state\n * @returns {Object} - Current filter state\n */\nexport function getCurrentFilters() {\n  const searchInput = document.getElementById(\"search\");\n  const workAreaDropdown = document.getElementById(\"document_type\");\n  const sortDropdown =\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\n\n  const filters = {\n    searchQuery: searchInput ? searchInput.value : \"\",\n    workAreas: [],\n    sort: sortDropdown ? sortDropdown.value : \"relevance\",\n  };\n\n  if (workAreaDropdown) {\n    const selectedOptions = Array.from(workAreaDropdown.selectedOptions || []);\n    filters.workAreas = selectedOptions\n      .map((opt) => opt.value)\n      .filter((val) => val && val.trim().length > 0);\n  }\n\n  return filters;\n}\n", "// Client-side filtering and sorting for search results\nimport { displayAppliedFilters, getCurrentFilters } from \"./applied-filters.js\";\n\nlet allResults = []; // Store all results for filtering/sorting\n\n/**\n * Store search results for filtering and sorting\n * Deduplicates results based on URL to prevent duplicate entries\n * @param {Array} results - Array of search result objects\n */\nexport function storeResults(results) {\n  // Deduplicate results based on URL before storing\n  const seenKeys = new Set();\n  const deduplicatedResults = [];\n\n  results.forEach((result, index) => {\n    // Create unique identifier - use URL, title, or JSON stringify as final fallback\n    const uniqueKey =\n      result.liveUrl ||\n      result.url ||\n      result.title ||\n      JSON.stringify(result) + index;\n\n    if (!seenKeys.has(uniqueKey)) {\n      seenKeys.add(uniqueKey);\n      deduplicatedResults.push(result);\n    }\n  });\n\n  allResults = deduplicatedResults;\n}\n\n/**\n * Filter results by work area\n * @param {Array} selectedWorkAreas - Selected work area values\n * @returns {Array} - Filtered results\n */\nfunction filterByWorkArea(selectedWorkAreas) {\n  if (!selectedWorkAreas || selectedWorkAreas.length === 0) {\n    return allResults; // Return all if no filter selected\n  }\n\n  // Filter results and track unique items to prevent duplicates\n  const seenKeys = new Set();\n  const filtered = [];\n\n  allResults.forEach((result, index) => {\n    if (!result.listMetadata || !result.listMetadata[\"Work area\"]) {\n      return;\n    }\n\n    const resultWorkAreas = result.listMetadata[\"Work area\"];\n\n    // Check if any selected work area matches\n    const matches = selectedWorkAreas.some((selectedArea) =>\n      resultWorkAreas.includes(selectedArea),\n    );\n\n    if (matches) {\n      // Create unique identifier - use URL, title, or JSON stringify as final fallback\n      const uniqueKey =\n        result.liveUrl ||\n        result.url ||\n        result.title ||\n        JSON.stringify(result) + index;\n\n      // Only add if not already seen (prevents duplicates)\n      if (!seenKeys.has(uniqueKey)) {\n        seenKeys.add(uniqueKey);\n        filtered.push(result);\n      }\n    }\n  });\n\n  return filtered;\n}\n\n/**\n * Sort results by selected criteria\n * @param {Array} results - Results to sort\n * @param {string} sortBy - Sort criteria (relevance, date-newest, date-oldest, title-az, title-za)\n * @returns {Array} - Sorted results\n */\nfunction sortResults(results, sortBy) {\n  const sorted = [...results]; // Create copy to avoid mutating original\n\n  switch (sortBy) {\n    case \"relevance\":\n      // Sort by rank (lower is better) or score (higher is better)\n      sorted.sort((a, b) => {\n        if (a.rank && b.rank) {\n          return a.rank - b.rank;\n        }\n        if (a.score && b.score) {\n          return b.score - a.score;\n        }\n        return 0;\n      });\n      break;\n\n    case \"date-newest\":\n      sorted.sort((a, b) => {\n        const dateA = a.dateTimestamp || 0;\n        const dateB = b.dateTimestamp || 0;\n        return dateB - dateA; // Newest first\n      });\n      break;\n\n    case \"date-oldest\":\n      sorted.sort((a, b) => {\n        const dateA = a.dateTimestamp || 0;\n        const dateB = b.dateTimestamp || 0;\n        return dateA - dateB; // Oldest first\n      });\n      break;\n\n    case \"title-az\":\n      sorted.sort((a, b) => {\n        const titleA = a.title || \"\";\n        const titleB = b.title || \"\";\n        return titleA.localeCompare(titleB);\n      });\n      break;\n\n    case \"title-za\":\n      sorted.sort((a, b) => {\n        const titleA = a.title || \"\";\n        const titleB = b.title || \"\";\n        return titleB.localeCompare(titleA);\n      });\n      break;\n\n    default:\n      // No sorting or unknown sort option\n      break;\n  }\n\n  return sorted;\n}\n\n/**\n * Sort cards in the DOM by data attributes\n * @param {string} sortBy - Sort criteria (relevance, date-newest, date-oldest, title-az, title-za)\n */\nfunction sortCardsInDOM(sortBy) {\n  const container = document.getElementById(\"search-results-list\");\n  if (!container) return;\n\n  const cards = Array.from(container.querySelectorAll(\".aikb-search-card\"));\n\n  cards.sort((a, b) => {\n    switch (sortBy) {\n      case \"relevance\":\n        // Higher relevance first\n        const relA = parseFloat(a.getAttribute(\"data-sort-relevance\")) || 0;\n        const relB = parseFloat(b.getAttribute(\"data-sort-relevance\")) || 0;\n        return relB - relA;\n\n      case \"date-newest\":\n        // Newer dates first (higher timestamp)\n        const dateA = parseFloat(a.getAttribute(\"data-sort-date\")) || 0;\n        const dateB = parseFloat(b.getAttribute(\"data-sort-date\")) || 0;\n        return dateB - dateA;\n\n      case \"date-oldest\":\n        // Older dates first (lower timestamp)\n        const dateC = parseFloat(a.getAttribute(\"data-sort-date\")) || 0;\n        const dateD = parseFloat(b.getAttribute(\"data-sort-date\")) || 0;\n        return dateC - dateD;\n\n      case \"title-az\":\n        // A to Z\n        const titleA = a.getAttribute(\"data-sort-title\") || \"\";\n        const titleB = b.getAttribute(\"data-sort-title\") || \"\";\n        return titleA.localeCompare(titleB);\n\n      case \"title-za\":\n        // Z to A\n        const titleC = a.getAttribute(\"data-sort-title\") || \"\";\n        const titleD = b.getAttribute(\"data-sort-title\") || \"\";\n        return titleD.localeCompare(titleC);\n\n      default:\n        return 0;\n    }\n  });\n\n  // Re-append cards in sorted order\n  cards.forEach((card) => container.appendChild(card));\n}\n\n// Track if filter/sort is currently being applied to prevent concurrent executions\nlet isApplying = false;\n\n/**\n * Apply filters and sorting, then render results\n */\nexport async function applyFiltersAndSort() {\n  // Prevent concurrent executions\n  if (isApplying) {\n    return;\n  }\n\n  isApplying = true;\n\n  try {\n    // Get work area dropdown (may be multi-select)\n    const workAreaDropdown = document.getElementById(\"document_type\");\n    // Support both legacy id=\"owner\" and current id=\"sort\"\n    const sortDropdown =\n      document.getElementById(\"sort\") || document.getElementById(\"owner\");\n\n    if (!workAreaDropdown || !sortDropdown) {\n      return;\n    }\n\n    // Get selected work areas\n    let selectedWorkAreas = [];\n    if (workAreaDropdown) {\n      const selectedOptions = Array.from(\n        workAreaDropdown.selectedOptions || [],\n      );\n      // Remove empty/default values so an unselected state returns all results\n      selectedWorkAreas = selectedOptions\n        .map((opt) => opt.value)\n        .filter((val) => val && val.trim().length > 0);\n    }\n\n    const selectedSort = sortDropdown.value || \"relevance\";\n\n    // Filter by work areas\n    let filtered = filterByWorkArea(selectedWorkAreas);\n\n    // Sort results (for pagination compatibility)\n    let sorted = sortResults(filtered, selectedSort);\n\n    // Render filtered and sorted results\n    const { renderResults } = await import(\"./search-card-template.js\");\n    renderResults(sorted, \"search-results-list\");\n\n    // Apply DOM-based sorting using data attributes\n    sortCardsInDOM(selectedSort);\n\n    // Display applied filters\n    const currentFilters = getCurrentFilters();\n    displayAppliedFilters(currentFilters);\n  } finally {\n    isApplying = false;\n  }\n}\n\n// Track if listeners have been initialized to prevent duplicate event handlers\nlet listenersInitialized = false;\n\n/**\n * Initialize filter and sort listeners\n */\nexport function initializeFiltersAndSort() {\n  // Prevent multiple initializations that would create duplicate event listeners\n  if (listenersInitialized) {\n    return;\n  }\n\n  const workAreaDropdown = document.getElementById(\"document_type\");\n  // Support both legacy id=\"owner\" and current id=\"sort\"\n  const sortDropdown =\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\n\n  if (workAreaDropdown) {\n    workAreaDropdown.addEventListener(\"change\", function () {\n      applyFiltersAndSort();\n    });\n\n    // Listen for custom multi-select events (our custom component) to reapply filters\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\n    if (\n      multiSelectContainer &&\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\n    ) {\n      multiSelectContainer.addEventListener(\"multiselect-change\", () => {\n        applyFiltersAndSort();\n      });\n    }\n\n    // Legacy SumoSelect support: trigger filtering when the OK button is clicked/closed\n    if (typeof window.$ !== \"undefined\") {\n      window.$(workAreaDropdown).on(\"sumo:closed\", function () {\n        applyFiltersAndSort();\n      });\n    }\n  }\n\n  if (sortDropdown) {\n    sortDropdown.addEventListener(\"change\", function () {\n      applyFiltersAndSort();\n    });\n  }\n\n  listenersInitialized = true;\n}\n", "// Load initial search results from local search or live API on page load\nimport { renderResults } from \"./search-card-template.js\";\nimport {\n  initializeDropdowns,\n  setStaticWorkAreas,\n} from \"./populate-dropdowns.js\";\nimport { storeResults, initializeFiltersAndSort } from \"./search-filters.js\";\nimport {\n  getPrimaryDataSource,\n  getFallbackDataSource,\n  getWorkAreasDataSource,\n  getConfig,\n} from \"./config.js\";\n\nlet fetchedWorkAreas = null;\n\n/**\n * Fetch work areas list from static source\n * @returns {Promise<Array<string>>} Promise that resolves to array of work areas\n */\nasync function fetchWorkAreasList() {\n  const workAreasSource = getWorkAreasDataSource();\n\n  try {\n    const response = await fetch(workAreasSource);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return Array.isArray(data) ? data : [];\n  } catch (error) {\n    return null; // Will fall back to extracting from results\n  }\n}\n\n// Export for use in search-form-handler\nexport function loadInitialResults() {\n  // Check if we're on a page with search results container\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\n  if (!searchResultsContainer) {\n    return; // Not on search results page\n  }\n\n  const config = getConfig();\n  const primarySource = getPrimaryDataSource();\n  const fallbackSource = getFallbackDataSource();\n\n  // Fetch work areas list first (parallel with results loading)\n  fetchWorkAreasList().then((workAreas) => {\n    if (workAreas) {\n      fetchedWorkAreas = workAreas;\n      setStaticWorkAreas(workAreas);\n    }\n  });\n\n  // Fetch from primary data source\n  fetch(primarySource)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then((data) => {\n      processAndRenderResults(data, config.isProduction ? \"live-api\" : \"local\");\n    })\n    .catch((primaryError) => {\n      // Only try fallback if in production\n      if (fallbackSource) {\n        fetch(fallbackSource)\n          .then((response) => {\n            if (!response.ok) {\n              throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            return response.json();\n          })\n          .then((data) => {\n            processAndRenderResults(data, \"fallback\");\n          })\n          .catch((fallbackError) => {\n            displayErrorMessage();\n          });\n      } else {\n        // Local dev with no fallback - show error\n        displayErrorMessage();\n      }\n    });\n}\n\nfunction displayErrorMessage() {\n  const container = document.getElementById(\"search-results-list\");\n  if (container) {\n    container.innerHTML =\n      '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again later.</p>';\n  }\n}\n\nfunction processAndRenderResults(data, source = \"unknown\") {\n  // Handle array data directly (local JSON format)\n  const results = Array.isArray(data) ? data : [];\n\n  // Map to card template format\n  const mappedResults = results.map((result) => {\n    // Parse timestamp for sorting\n    const dateTimestamp = result[\"last-updated\"]\n      ? new Date(result[\"last-updated\"]).getTime()\n      : 0;\n\n    return {\n      title: result.title || \"\",\n      summary: result.description || result.summary || \"\",\n      listMetadata: {\n        \"Work area\": result[\"work-area\"] || [],\n        Roles: result.roles || [],\n        Benefits: result.benefits || [],\n      },\n      date: result[\"last-updated\"]\n        ? new Date(result[\"last-updated\"]).toLocaleDateString(\"en-AU\", {\n            year: \"numeric\",\n            month: \"long\",\n          })\n        : \"\",\n      dateTimestamp: dateTimestamp,\n      liveUrl: result.url || result.liveUrl || \"\",\n      submittedBy: result[\"submitted-by\"] || \"\",\n      rank: result.rank || 0,\n      score: result.score || 0,\n    };\n  });\n\n  // Deduplicate results before storing/caching\n  const seenKeys = new Set();\n  const deduplicatedResults = [];\n\n  mappedResults.forEach((result, index) => {\n    // Create unique identifier - use URL, title, or JSON stringify as final fallback\n    const uniqueKey =\n      result.liveUrl ||\n      result.url ||\n      result.title ||\n      JSON.stringify(result) + index;\n\n    if (!seenKeys.has(uniqueKey)) {\n      seenKeys.add(uniqueKey);\n      deduplicatedResults.push(result);\n    }\n  });\n\n  // Store results for filtering/sorting\n  storeResults(deduplicatedResults);\n\n  // Cache results for offline search\n  window.aikbSearchCache = deduplicatedResults;\n\n  // Initialize dropdowns with work area data\n  // Pass fetched work areas if available\n  initializeDropdowns(deduplicatedResults, fetchedWorkAreas);\n\n  // Initialize filter and sort listeners after each results update\n  initializeFiltersAndSort();\n\n  // Render cards using the template\n  renderResults(deduplicatedResults, \"search-results-list\");\n}\n\n// Wait for complete page load (not just DOM ready)\nwindow.addEventListener(\"load\", function () {\n  // Extra delay after full page load to ensure all scripts initialized\n  setTimeout(loadInitialResults, 200);\n});\n", "// Search form handler - Enter key trigger\nimport { searchLocalData, getCachedData } from \"./offline-search.js\";\nimport { loadInitialResults } from \"./load-initial-results.js\";\nimport { renderResults } from \"./search-card-template.js\";\nimport { storeResults, applyFiltersAndSort } from \"./search-filters.js\";\n\n// Wait for DOM ready\nwindow.addEventListener(\"DOMContentLoaded\", function () {\n  const searchInput = document.getElementById(\"search\");\n\n  if (!searchInput) {\n    return;\n  }\n\n  // Enter key triggers search\n  searchInput.addEventListener(\"keydown\", function (e) {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      const query = searchInput.value.trim();\n\n      if (query === \"\") {\n        // Empty Enter reloads initial results\n        loadInitialResults();\n      } else {\n        // Perform immediate offline search for fast results\n        const cachedData = getCachedData();\n\n        if (cachedData && cachedData.length > 0) {\n          const results = searchLocalData(query, cachedData);\n          storeResults(results);\n          applyFiltersAndSort();\n        } else {\n          const $container = window.$(\"#search-results-list\");\n          if ($container && $container.length > 0) {\n            $container.html(\n              '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again.</p>',\n            );\n          }\n        }\n      }\n    }\n  });\n});\n", "// Alias CTA anchors to reuse NTGC primary button styling\r\nconst CTA_SELECTOR = 'div[data-hydration-component=\"squiz-call-to-action\"] a';\r\n\r\nfunction applyCtaButtonAlias(root = document) {\r\n  const anchors = root.querySelectorAll(CTA_SELECTOR);\r\n  anchors.forEach((anchor) => {\r\n    anchor.classList.add(\"ntgc-btn\", \"ntgc-btn--primary\");\r\n  });\r\n}\r\n\r\nif (document.readyState === \"loading\") {\r\n  document.addEventListener(\"DOMContentLoaded\", () => applyCtaButtonAlias());\r\n} else {\r\n  applyCtaButtonAlias();\r\n}\r\n", "// Import all JS modules for landing page bundle (except content-page.js)\nimport \"./config.js\";\nimport \"./search-form-handler.js\";\nimport \"./search-filters.js\";\nimport \"./search-card-template.js\";\nimport \"./populate-dropdowns.js\";\nimport \"./offline-search.js\";\nimport \"./multi-select-dropdown.js\";\nimport \"./load-initial-results.js\";\nimport \"./cta-button-alias.js\";\nimport \"./pagination.js\";\nimport { initClearAllButton } from \"./applied-filters.js\";\n\n// Confirm bundle loaded successfully\n\n// Initialize clear all button after page loads\nwindow.addEventListener(\"load\", function () {\n  initClearAllButton();\n});\n"],
  "mappings": "qnBASO,SAASA,IAAe,CAC7B,OAAO,OAAO,SAAS,WAAa,sBACtC,CAMO,SAASC,GAAY,CAW1B,MAVe,CACb,aAAcD,GAAa,EAC3B,WACE,4JACF,gBAAiB,qBACjB,aAAcA,GAAa,EACvB,8JACA,4BACN,CAGF,CAQO,SAASE,IAAuB,CACrC,IAAMC,EAASF,EAAU,EACzB,OAAOE,EAAO,aAAeA,EAAO,WAAaA,EAAO,eAC1D,CAOO,SAASC,IAAwB,CACtC,IAAMD,EAASF,EAAU,EACzB,OAAOE,EAAO,aAAeA,EAAO,gBAAkB,IACxD,CAQO,SAASE,IAAyB,CAEvC,OADeJ,EAAU,EACX,YAChB,CA7DA,IAmEaK,GAnEbC,EAAAC,EAAA,KAmEaF,GAAc,IAAI,IAAI,CACjC,IACA,KACA,MACA,KACA,KACA,MACA,MACA,MACA,KACA,KACA,KACA,OACA,MACA,KACA,MACA,OACA,KACA,MACA,KACA,KACA,KACA,OACA,MACA,MACA,OACA,MACA,KACA,MACA,MACA,QACA,OACA,KACA,QACA,MACA,OACA,OACA,MACA,MACA,MACA,OACA,QACA,IACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,MACA,MACA,MACA,KACA,MACA,KACA,KACA,MACA,OACA,KACA,MACA,KACA,MACA,KACA,OACA,OACA,MACA,QACA,OACA,OACA,QACA,QACA,OACA,OACA,QACA,OACA,KACA,MACA,KACA,KACA,QACA,KACA,OACA,KACA,OACA,MACA,MACA,KACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,MACA,MACA,MACA,MACA,OACA,OACF,CAAC,ICvJD,SAASG,GAAcC,EAAO,CAE5B,IAAMC,EAAUD,EAAM,QAAQ,WAAY,GAAG,EAAE,KAAK,EAEpD,OAAKC,EAGSA,EAAQ,MAAM,KAAK,EAAE,OAAQC,GAASA,EAAK,OAAS,CAAC,EAG9C,OAAQA,GAAS,CACpC,IAAMC,EAAYD,EAAK,YAAY,EAGnC,OAAIE,GAAY,IAAID,CAAS,EAEpBD,IAASA,EAAK,YAAY,GAAKA,EAAK,QAAU,EAIhD,EACT,CAAC,EAGa,IAAKG,GAAUA,EAAM,YAAY,CAAC,EApB3B,CAAC,CAqBxB,CAOA,SAASC,GAAcC,EAAM,CAC3B,OAAKA,EACEA,EAAK,YAAY,EAAE,QAAQ,WAAY,GAAG,EAD/B,EAEpB,CAQA,SAASC,EAAmBD,EAAME,EAAM,CACtC,GAAI,CAACF,GAAQ,CAACE,EAAM,MAAO,CAAE,gBAAiB,EAAG,eAAgB,CAAE,EAEnE,IAAMC,EAAaJ,GAAcC,CAAI,EAG/BI,EAAgB,IAAI,OAAO,MAAMF,CAAI,MAAO,IAAI,EAChDG,EAAkBF,EAAW,MAAMC,CAAa,EAChDE,EAAgBD,EAAkBA,EAAgB,OAAS,EAI3DE,EAAe,IAAI,OAAOL,EAAM,IAAI,EACpCM,EAAaL,EAAW,MAAMI,CAAY,EAC1CE,EAAeD,EAAaA,EAAW,OAAS,EAChDE,EAAe,KAAK,IAAI,EAAGD,EAAeH,CAAa,EAE7D,MAAO,CACL,gBAAiBA,EACjB,eAAgBI,CAClB,CACF,CAOA,SAASC,GAAgBC,EAAQ,CAC/B,IAAMC,EAAQ,CAAC,EAEf,OAAID,EAAO,eAELA,EAAO,aAAa,WAAW,GACjCC,EAAM,KAAK,GAAGD,EAAO,aAAa,WAAW,CAAC,EAG5CA,EAAO,aAAa,OACtBC,EAAM,KAAK,GAAGD,EAAO,aAAa,KAAQ,EAGxCA,EAAO,aAAa,UACtBC,EAAM,KAAK,GAAGD,EAAO,aAAa,QAAW,GAI1CC,EAAM,KAAK,GAAG,CACvB,CAQA,SAASC,GAAkBF,EAAQV,EAAM,CACvC,IAAMa,EAAYH,EAAO,OAAS,GAC5BI,EAAcJ,EAAO,SAAW,GAChCK,EAAeN,GAAgBC,CAAM,EAGrCM,EAAUjB,EAAmBc,EAAWb,CAAI,EAC5CiB,EAAYlB,EAAmBe,EAAad,CAAI,EAChDkB,EAAanB,EAAmBgB,EAAcf,CAAI,EAKlDmB,EAAaH,EAAQ,gBAAkB,EAAIA,EAAQ,eAAiB,EACpEI,EACJH,EAAU,gBAAkB,EAAIA,EAAU,eAAiB,EACvDI,EACJH,EAAW,gBAAkB,EAAIA,EAAW,eAAiB,IAEzDI,EAAaH,EAAaC,EAAeC,EAE/C,MAAO,CACL,QAASL,EAAQ,gBAAkBA,EAAQ,eAC3C,cAAeA,EAAQ,gBACvB,aAAcA,EAAQ,eACtB,UAAWC,EAAU,gBAAkBA,EAAU,eACjD,gBAAiBA,EAAU,gBAC3B,eAAgBA,EAAU,eAC1B,WAAYC,EAAW,gBAAkBA,EAAW,eACpD,iBAAkBA,EAAW,gBAC7B,gBAAiBA,EAAW,eAC5B,WAAAC,EACA,aAAAC,EACA,cAAAC,EACA,WAAAC,EACA,SAAUA,EAAa,CACzB,CACF,CAOA,SAASC,GAAkBb,EAAQ,CACjC,IAAMc,GAAed,EAAO,OAAS,IAAI,OACnCe,GAAiBf,EAAO,SAAW,IAAI,OACvCgB,EAAiBjB,GAAgBC,CAAM,EAAE,OAE/C,OAAOc,EAAcC,EAAgBC,CACvC,CAgBO,SAASC,GAAgBC,EAAUC,EAAS,CACjD,GAAI,CAACD,GAAY,CAACC,GAAWA,EAAQ,SAAW,EAC9C,MAAO,CAAC,EAIV,IAAMC,EAAQxC,GAAcsC,CAAQ,EAEpC,GAAIE,EAAM,SAAW,EACnB,MAAO,CAAC,EAmCV,IAAMC,EA/BgBF,EAAQ,IAAKnB,GAAW,CAC5C,IAAIY,EAAa,EACXU,EAAe,CAAC,EAChBC,EAAa,CAAC,EAGpBH,EAAM,QAAS9B,GAAS,CACtB,IAAMkC,EAAYtB,GAAkBF,EAAQV,CAAI,EAE5CkC,EAAU,WACZF,EAAa,KAAKhC,CAAI,EACtBsB,GAAcY,EAAU,WACxBD,EAAWjC,CAAI,EAAIkC,EAEvB,CAAC,EAGD,IAAMC,EAAYZ,GAAkBb,CAAM,EACpC0B,EAAkBD,EAAY,EAAKb,EAAaa,EAAa,IAAO,EAE1E,MAAO,CACL,GAAGzB,EACH,cAAe0B,EACf,UAAWd,EACX,cAAeU,EACf,YAAaC,EACb,WAAYE,CACd,CACF,CAAC,EAGoC,OAClCzB,GAAWA,EAAO,cAAc,OAAS,CAC5C,EAGA,OAAAqB,EAAe,KAAK,CAACM,EAAGC,IAAMA,EAAE,cAAgBD,EAAE,aAAa,EAExDN,CACT,CAOO,SAASQ,IAAgB,CAC9B,OAAI,OAAO,iBAAmB,MAAM,QAAQ,OAAO,eAAe,EACzD,OAAO,gBAGT,IACT,CAxPA,IAAAC,EAAAC,EAAA,KAWAC,MCXA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,oBAAAE,GAAA,0BAAAC,GAAA,kBAAAC,EAAA,yBAAAC,GAAA,qBAAAC,KAaO,SAASD,GAAqBE,EAASC,EAAU,GAAI,CAC1DC,EAAaF,EACbG,EAAeF,EACfG,EAAaJ,EAAQ,OACrBK,EAAc,EAGdC,GAA0B,EAG1BC,EAAyB,CAC3B,CAMO,SAASX,IAAwB,CACtC,IAAMY,GAAcH,EAAc,GAAKF,EACjCM,EAAWD,EAAaL,EAC9B,OAAOD,EAAW,MAAMM,EAAYC,CAAQ,CAC9C,CAMO,SAASd,IAAiB,CAC/B,OAAOU,CACT,CAMO,SAASR,GAAgB,CAC9B,OAAO,KAAK,KAAKO,EAAaD,CAAY,CAC5C,CAKA,SAASG,IAA4B,CAGnC,GAFAI,EAAsB,SAAS,eAAe,iBAAiB,EAE3D,CAACA,EAAqB,CAExB,IAAMC,EAAyB,SAAS,eACtC,qBACF,EACIA,GAA0BA,EAAuB,aACnDD,EAAsB,SAAS,cAAc,KAAK,EAClDA,EAAoB,GAAK,kBACzBA,EAAoB,UAAY,kBAChCC,EAAuB,WAAW,aAChCD,EACAC,EAAuB,WACzB,EAEJ,CACF,CAKA,SAASJ,GAA2B,CAClC,GAAI,CAACG,EAAqB,OAE1B,IAAME,EAAaf,EAAc,EAGjC,GAAIe,GAAc,EAAG,CACnBF,EAAoB,UAAY,GAChCA,EAAoB,MAAM,QAAU,OACpC,MACF,CAEAA,EAAoB,MAAM,QAAU,OAGpC,IAAMG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,2BAGpB,IAAMC,EAAaC,GAAoB,WAAYV,EAAc,EAAG,IAAM,CACpEA,EAAc,GAChBW,EAASX,EAAc,CAAC,CAE5B,CAAC,EACDQ,EAAQ,YAAYC,CAAU,EAG9B,IAAMG,EAAcC,GAAkBN,CAAU,EAChDC,EAAQ,YAAYI,CAAW,EAG/B,IAAME,EAAaJ,GACjB,OACAV,EAAcO,EACd,IAAM,CACAP,EAAcO,GAChBI,EAASX,EAAc,CAAC,CAE5B,CACF,EACAQ,EAAQ,YAAYM,CAAU,EAG9BT,EAAoB,UAAY,GAChCA,EAAoB,YAAYG,CAAO,CACzC,CASA,SAASE,GAAoBK,EAAOC,EAASC,EAAS,CACpD,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,2BACdF,GACHE,EAAO,UAAU,IAAI,oCAAoC,EAG3D,IAAMC,EAAY,SAAS,cAAc,KAAK,EAG9C,GAFAA,EAAU,UAAY,8BAElBJ,IAAU,WAAY,CACxB,IAAMK,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,sBACjBA,EAAK,aAAa,cAAe,MAAM,EACvCD,EAAU,YAAYC,CAAI,CAC5B,CAEA,IAAMC,EAAO,SAAS,cAAc,MAAM,EAK1C,GAJAA,EAAK,UAAY,wBACjBA,EAAK,YAAcN,EACnBI,EAAU,YAAYE,CAAI,EAEtBN,IAAU,OAAQ,CACpB,IAAMK,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,uBACjBA,EAAK,aAAa,cAAe,MAAM,EACvCD,EAAU,YAAYC,CAAI,CAC5B,CAEA,OAAAF,EAAO,YAAYC,CAAS,EAExBH,IACFE,EAAO,iBAAiB,QAASD,CAAO,EACxCC,EAAO,MAAM,OAAS,WAGjBA,CACT,CAOA,SAASL,GAAkBN,EAAY,CACrC,IAAMe,EAAY,SAAS,cAAc,KAAK,EAC9C,OAAAA,EAAU,UAAY,yBAERC,GAAmBvB,EAAaO,CAAU,EAElD,QAASiB,GAAS,CACtB,GAAIA,IAAS,MAAO,CAClB,IAAMC,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAY,4BACrBA,EAAS,YAAc,MACvBH,EAAU,YAAYG,CAAQ,CAChC,KAAO,CACL,IAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,+BAEnBF,IAASxB,GACX0B,EAAW,UAAU,IAAI,sCAAsC,EAGjE,IAAMC,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,YAAcH,EACvBE,EAAW,YAAYC,CAAQ,EAE/BD,EAAW,iBAAiB,QAAS,IAAMf,EAASa,CAAI,CAAC,EACzDE,EAAW,MAAM,OAAS,UAE1BJ,EAAU,YAAYI,CAAU,CAClC,CACF,CAAC,EAEMJ,CACT,CAQA,SAASC,GAAmBK,EAASC,EAAO,CAC1C,GAAIA,GAAS,EAEX,OAAO,MAAM,KAAK,CAAE,OAAQA,CAAM,EAAG,CAACC,EAAGC,IAAMA,EAAI,CAAC,EAGtD,IAAMC,EAAQ,CAAC,EAGfA,EAAM,KAAK,CAAC,EAERJ,EAAU,GACZI,EAAM,KAAK,KAAK,EAIlB,IAAMC,EAAQ,KAAK,IAAI,EAAGL,EAAU,CAAC,EAC/BM,EAAM,KAAK,IAAIL,EAAQ,EAAGD,EAAU,CAAC,EAE3C,QAAS,EAAIK,EAAO,GAAKC,EAAK,IAC5BF,EAAM,KAAK,CAAC,EAGd,OAAIJ,EAAUC,EAAQ,GACpBG,EAAM,KAAK,KAAK,EAIlBA,EAAM,KAAKH,CAAK,EAETG,CACT,CAMA,SAASrB,EAASa,EAAM,CACtB,IAAMjB,EAAaf,EAAc,EAEjC,GAAIgC,EAAO,GAAKA,EAAOjB,GAAciB,IAASxB,EAC5C,OAGFA,EAAcwB,EAGdtB,EAAyB,EAGzB,IAAMiC,EAAQ,IAAI,YAAY,yBAA0B,CACtD,OAAQ,CACN,KAAMnC,EACN,QAAST,GAAsB,CACjC,CACF,CAAC,EACD,SAAS,cAAc4C,CAAK,EAG5B,IAAM7B,EAAyB,SAAS,eAAe,qBAAqB,EAC5E,GAAIA,EAAwB,CAE1B,IAAM8B,EACJ9B,EAAuB,sBAAsB,EAAE,IAC/C,OAAO,YACP,IACF,OAAO,SAAS,CAAE,IAAA8B,EAAK,SAAU,QAAS,CAAC,CAC7C,CACF,CAMO,SAAS1C,GAAiBC,EAAS,CACxCE,EAAaF,EACbI,EAAaJ,EAAQ,OACrBK,EAAc,EAEdE,EAAyB,CAC3B,CAxSA,IAEIF,EACAF,EACAC,EACAF,EACAQ,EANJgC,EAAAC,EAAA,KAEItC,EAAc,EACdF,EAAe,GACfC,EAAa,EACbF,EAAa,CAAC,EACdQ,EAAsB,OCN1B,IAAAkC,GAAA,GAAAC,EAAAD,GAAA,mBAAAE,IAOA,SAASC,GAAWC,EAAS,CAC3B,GAAI,CAACA,EAAS,MAAO,GAIrB,GADyB,sBACJ,KAAKA,CAAO,EAC/B,OAAOA,EAIT,GAAI,CACF,IAAMC,EAAO,IAAI,KAAKD,CAAO,EAC7B,GAAI,CAAC,MAAMC,EAAK,QAAQ,CAAC,EAevB,MAAO,GAdQ,CACb,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,UACF,EACiBA,EAAK,SAAS,CAAC,CAAC,IAAIA,EAAK,YAAY,CAAC,EAE3D,MAAY,CAEZ,CAEA,OAAOD,CACT,CAQA,SAASE,EAAiBC,EAAMC,EAAc,CAC5C,GAAI,CAACD,GAAQ,CAACC,GAAgBA,EAAa,SAAW,EACpD,OAAOD,EAGT,IAAIE,EAAcF,EAKlB,MAFoB,CAAC,GAAGC,CAAY,EAAE,KAAK,CAACE,EAAGC,IAAMA,EAAE,OAASD,EAAE,MAAM,EAE5D,QAASE,GAAS,CAG5B,IAAMC,EAAQ,IAAI,OAAO,mBAAmBD,CAAI,oBAAsB,IAAI,EAC1EH,EAAcA,EAAY,QAAQI,EAAO,iBAAiB,CAC5D,CAAC,EAEMJ,CACT,CAOA,SAASK,EAAmBC,EAASC,EAAY,CAC/CD,EAAQ,UAAY,GAIpB,IAAME,EADS,IAAI,UAAU,EACV,gBAAgBD,EAAY,WAAW,EAG1D,MAAM,KAAKC,EAAI,KAAK,UAAU,EAAE,QAASC,GAAS,CAChDH,EAAQ,YAAYG,EAAK,UAAU,EAAI,CAAC,CAC1C,CAAC,CACH,CAiBA,SAASC,EAAiBC,EAAQ,CAEhC,GAAI,CAACA,EAAO,OAAS,CAACA,EAAO,SAAW,CAACA,EAAO,QAC9C,OAAO,KAIT,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,mBAIjB,IAAMC,EACJF,EAAO,gBAAkBA,EAAO,KAAO,CAACA,EAAO,KAAOA,EAAO,OAAS,GACxEC,EAAK,aAAa,sBAAuBC,CAAS,EAGlDD,EAAK,aAAa,kBAAmBD,EAAO,KAAK,EAGjD,IAAMG,EAAgBH,EAAO,eAAiB,EAC9CC,EAAK,aAAa,iBAAkBE,CAAa,EAGjD,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,0BAGlB,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,4BAGpB,IAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,yBAGxB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EAGzC,GAFAA,EAAM,UAAY,0BAEdP,EAAO,eAAiBA,EAAO,cAAc,OAAS,EAAG,CAC3D,IAAMQ,EAAmBtB,EACvBc,EAAO,MACPA,EAAO,aACT,EACAN,EAAmBa,EAAOC,CAAgB,CAC5C,MACED,EAAM,YAAcP,EAAO,MAG7BM,EAAY,YAAYC,CAAK,EAG7B,IAAME,EAAU,SAAS,cAAc,GAAG,EAG1C,GAFAA,EAAQ,UAAY,4BAEhBT,EAAO,eAAiBA,EAAO,cAAc,OAAS,EAAG,CAC3D,IAAMU,EAAqBxB,EACzBc,EAAO,QACPA,EAAO,aACT,EACAN,EAAmBe,EAASC,CAAkB,CAChD,MACED,EAAQ,YAAcT,EAAO,QAG/BM,EAAY,YAAYG,CAAO,EAE/BJ,EAAQ,YAAYC,CAAW,EAG/B,IAAMK,EACJX,EAAO,cAAgBA,EAAO,aAAa,WAAW,EAClDA,EAAO,aAAa,WAAW,EAC/B,CAAC,EACP,GAAIW,GAAaA,EAAU,OAAS,EAAG,CACrC,IAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,yBAG1BD,EAAU,QAASE,GAAa,CAC9B,GAAIA,GAAYA,EAAS,KAAK,EAAG,CAC/B,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,wBAChBA,EAAI,YAAcD,EAAS,KAAK,EAChCD,EAAc,YAAYE,CAAG,CAC/B,CACF,CAAC,EAEGF,EAAc,SAAS,OAAS,GAClCP,EAAQ,YAAYO,CAAa,CAErC,CAEAR,EAAM,YAAYC,CAAO,EAGzB,IAAMU,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,4BAGpB,IAAMC,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,KAAOhB,EAAO,QACrBgB,EAAO,UAAY,+BAEnB,IAAMC,EAAa,SAAS,cAAc,MAAM,EAChDA,EAAW,YAAc,WACzBD,EAAO,YAAYC,CAAU,EAE7B,IAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,0BACjBA,EAAK,aAAa,cAAe,MAAM,EACvCF,EAAO,YAAYE,CAAI,EAEvBH,EAAQ,YAAYC,CAAM,EAG1B,IAAMG,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,6BAGrB,IAAMC,EACJpB,EAAO,cAAgBA,EAAO,aAAa,MACvCA,EAAO,aAAa,MACpB,CAAC,EACP,GAAIoB,GAASA,EAAM,OAAS,EAAG,CAC7B,IAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,+BAEtB,IAAMC,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,UAAY,iCAElB,IAAMC,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,YAAc,aACpBD,EAAM,YAAYC,CAAK,EAEvB,IAAMC,GAAYJ,EAAM,KAAK,IAAI,EAGjC,GAAIpB,EAAO,eAAiBA,EAAO,cAAc,OAAS,EAAG,CAC3D,IAAMyB,EAAmBvC,EACvBsC,GACAxB,EAAO,aACT,EACM0B,GAAW,SAAS,cAAc,MAAM,EAC9ChC,EAAmBgC,GAAUD,CAAgB,EAE7C,MAAM,KAAKC,GAAS,UAAU,EAAE,QAAS5B,IAAS,CAChDwB,EAAM,YAAYxB,EAAI,CACxB,CAAC,CACH,KAAO,CACL,IAAMX,EAAO,SAAS,eAAeqC,EAAS,EAC9CF,EAAM,YAAYnC,CAAI,CACxB,CAEAkC,EAAU,YAAYC,CAAK,EAE3BH,EAAS,YAAYE,CAAS,CAChC,CAGA,GAAIrB,EAAO,KAAM,CACf,IAAM2B,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,yBACnBA,EAAO,YAAc,iBAAiB5C,GAAWiB,EAAO,IAAI,CAAC,GAC7DmB,EAAS,YAAYQ,CAAM,CAC7B,CAEA,OAAAZ,EAAQ,YAAYI,CAAQ,EAC5Bf,EAAM,YAAYW,CAAO,EAEzBd,EAAK,YAAYG,CAAK,EAEfH,CACT,CAQO,SAASnB,EACd8C,EACAC,EAAc,sBACdC,EAAgB,GAChB,CAEA,IAAIC,EAAY,SAAS,eAAeF,CAAW,EAEnD,GAAI,CAACE,EAAW,CAEd,IAAMC,EAAa,OAAO,EAAI,OAAO,EAAE,IAAIH,CAAW,EAAE,EAAI,KAC5DE,EAAYC,GAAcA,EAAW,OAAS,EAAIA,EAAW,CAAC,EAAI,IACpE,CAEA,GAAKD,EAOL,IAFAA,EAAU,UAAY,GAElBH,EAAQ,SAAW,EAAG,CACxB,IAAMK,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,YAAc,oBACxBA,EAAU,MAAM,QAAU,YAC1BF,EAAU,YAAYE,CAAS,EAC/B,MACF,CAGIH,EAEF,qCAA0B,KACxB,CAAC,CAAE,qBAAAI,EAAsB,sBAAAC,CAAsB,IAAM,CACnDD,EAAqBN,EAAS,EAAE,EACZO,EAAsB,EAIvC,IAAKnC,GAAWD,EAAiBC,CAAM,CAAC,EACxC,OAAQC,GAASA,IAAS,IAAI,EAE3B,QAASA,GAAS8B,EAAU,YAAY9B,CAAI,CAAC,CACrD,CACF,EAGc2B,EACX,IAAK5B,GAAWD,EAAiBC,CAAM,CAAC,EACxC,OAAQC,GAASA,IAAS,IAAI,EAE3B,QAASA,GAAS8B,EAAU,YAAY9B,CAAI,CAAC,EAEvD,CAhVA,IAsVImC,GAtVJC,EAAAC,EAAA,KAmVA,OAAO,kBAAoBxD,EAGvBsD,GAA0B,GAGzBA,KACH,SAAS,iBAAiB,yBAA2BG,GAAU,CAC7D,GAAM,CAAE,QAAAX,CAAQ,EAAIW,EAAM,OACpBR,EAAY,SAAS,eAAe,qBAAqB,EAE3DA,GAAaH,IACfG,EAAU,UAAY,GAERH,EACX,IAAK5B,GAAWD,EAAiBC,CAAM,CAAC,EACxC,OAAQC,GAASA,IAAS,IAAI,EAE3B,QAASA,GAAS8B,EAAU,YAAY9B,CAAI,CAAC,EAEvD,CAAC,EACDmC,GAA0B,MC2NrB,SAASI,GAAgBC,EAAU,CACxC,IAAMC,EACJ,OAAOD,GAAa,SAAW,SAAS,cAAcA,CAAQ,EAAIA,EAEpE,OAAKC,EAIE,IAAIC,EAAoBD,CAAO,EAH7B,IAIX,CA5kBA,IAYaC,EAZbC,EAAAC,EAAA,KAYaF,EAAN,KAA0B,CAC/B,YAAYG,EAAe,CACzB,KAAK,cAAgBA,EACrB,KAAK,QAAU,CAAC,EAChB,KAAK,eAAiB,IAAI,IAC1B,KAAK,mBAAqB,IAAI,IAC9B,KAAK,OAAS,GAEd,KAAK,UAAY,KACjB,KAAK,cAAgB,KACrB,KAAK,cAAgB,KAGrB,KAAK,eAAiB,CAAC,EAEvB,KAAK,KAAK,CACZ,CAEA,MAAO,CAEL,KAAK,cAAc,MAAM,QAAU,OAGnC,KAAK,wBAAwB,EAG7B,KAAK,mBAAmB,EAGxB,KAAK,WAAW,EAGhB,KAAK,UAAU,sBAAwB,IACzC,CAEA,oBAAqB,CAEnB,KAAK,QAAQ,QAASC,GAAW,CAE/B,IAAMC,EAAe,MAAM,KAAK,KAAK,cAAc,OAAO,EAAE,KACzDC,GAAQA,EAAI,QAAUF,EAAO,KAChC,EACIC,GAAgB,CAACA,EAAa,UAChC,KAAK,eAAe,IAAID,EAAO,KAAK,CAExC,CAAC,EAGD,KAAK,iBAAiB,EAGtB,KAAK,kBAAkB,EAGvB,KAAK,mBAAqB,IAAI,IAAI,KAAK,cAAc,CACvD,CAEA,yBAA0B,CAExB,KAAK,UAAY,SAAS,cAAc,KAAK,EAC7C,KAAK,UAAU,UAAY,6BAG3B,KAAK,cAAgB,SAAS,cAAc,QAAQ,EACpD,KAAK,cAAc,KAAO,SAC1B,KAAK,cAAc,UAAY,0BAC/B,KAAK,cAAc,UAAY;AAAA;AAAA;AAAA,MAM/B,KAAK,cAAgB,SAAS,cAAc,KAAK,EACjD,KAAK,cAAc,UAAY,yBAC/B,KAAK,cAAc,MAAM,QAAU,OAGnC,IAAMG,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,2BAGxB,IAAMC,EAAgB,KAAK,iBAAiB,CAC1C,MAAO,cACP,MAAO,aACP,YAAa,EACf,CAAC,EACDD,EAAY,YAAYC,CAAa,EAGrC,MAAM,KAAK,KAAK,cAAc,OAAO,EAAE,QAASJ,GAAW,CACzD,GAAI,CAACA,EAAO,UAAYA,EAAO,MAAO,CACpC,KAAK,QAAQ,KAAK,CAChB,MAAOA,EAAO,MACd,MAAOA,EAAO,WAChB,CAAC,EAED,IAAMK,EAAa,KAAK,iBAAiB,CACvC,MAAOL,EAAO,MACd,MAAOA,EAAO,WAChB,CAAC,EACDG,EAAY,YAAYE,CAAU,CACpC,CACF,CAAC,EAGD,IAAMC,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,UAAY,2BAE7B,IAAMC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,KAAO,SAChBA,EAAS,UAAY,+CACrBA,EAAS,YAAc,KACvB,KAAK,eAAe,QAAU,IAAM,KAAK,SAAS,EAClDA,EAAS,iBAAiB,QAAS,KAAK,eAAe,OAAO,EAE9D,IAAMC,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,KAAO,SACpBA,EAAa,UAAY,mDACzBA,EAAa,YAAc,SAC3B,KAAK,eAAe,YAAc,IAAM,KAAK,aAAa,EAC1DA,EAAa,iBAAiB,QAAS,KAAK,eAAe,WAAW,EAEtEF,EAAiB,YAAYC,CAAQ,EACrCD,EAAiB,YAAYE,CAAY,EAGzC,KAAK,cAAc,YAAYL,CAAW,EAC1C,KAAK,cAAc,YAAYG,CAAgB,EAG/C,KAAK,eAAe,eAAkBG,GAAM,CAErCA,EAAE,OAAO,UAAU,SAAS,2BAA2B,IAIxDA,EAAE,OAAO,QAAU,cACrB,KAAK,gBAAgBA,CAAC,EAEtB,KAAK,qBAAqB,EAE9B,EACA,KAAK,cAAc,iBACjB,SACA,KAAK,eAAe,cACtB,EAGA,KAAK,UAAU,YAAY,KAAK,aAAa,EAC7C,KAAK,UAAU,YAAY,KAAK,aAAa,EAG7C,KAAK,cAAc,WAAW,aAC5B,KAAK,UACL,KAAK,cAAc,WACrB,CACF,CAEA,iBAAiBT,EAAQ,CACvB,IAAMU,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,UAAY,0BACbV,EAAO,aACTU,EAAK,UAAU,IAAI,6BAA6B,EAGlD,IAAMC,EAAW,SAAS,cAAc,OAAO,EAC/CA,EAAS,KAAO,WAChBA,EAAS,UAAY,4BACrBA,EAAS,MAAQX,EAAO,MACxBW,EAAS,QAAQ,MAAQX,EAAO,MAIhC,IAAMY,EAAY,SAAS,cAAc,MAAM,EAC/C,OAAAA,EAAU,UAAY,yBACtBA,EAAU,YAAcZ,EAAO,MAE/BU,EAAK,YAAYC,CAAQ,EACzBD,EAAK,YAAYE,CAAS,EAEnBF,CACT,CAEA,YAAa,CAEX,KAAK,eAAe,aAAgBD,GAAM,CACxCA,EAAE,gBAAgB,EAClB,KAAK,OAAO,CACd,EACA,KAAK,cAAc,iBACjB,QACA,KAAK,eAAe,YACtB,EAGA,KAAK,eAAe,cAAiBA,GAAM,CACrC,KAAK,WAAa,CAAC,KAAK,UAAU,SAASA,EAAE,MAAM,GAAK,KAAK,QAC/D,KAAK,aAAa,CAEtB,EACA,SAAS,iBAAiB,QAAS,KAAK,eAAe,aAAa,CACtE,CAEA,QAAS,CACH,CAAC,KAAK,WAAa,CAAC,KAAK,gBAGzB,KAAK,OACP,KAAK,MAAM,EAEX,KAAK,KAAK,EAEd,CAEA,MAAO,CACD,CAAC,KAAK,WAAa,CAAC,KAAK,gBAG7B,KAAK,OAAS,GACd,KAAK,cAAc,MAAM,QAAU,QACnC,KAAK,cAAc,UAAU,IAAI,uBAAuB,EAGxD,KAAK,mBAAqB,IAAI,IAAI,KAAK,cAAc,EAGrD,KAAK,iBAAiB,EACxB,CAEA,OAAQ,CACF,CAAC,KAAK,WAAa,CAAC,KAAK,gBAG7B,KAAK,OAAS,GACd,KAAK,cAAc,MAAM,QAAU,OACnC,KAAK,cAAc,UAAU,OAAO,uBAAuB,EAC7D,CAEA,UAAW,CACT,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAGF,IAAMI,EAAa,KAAK,cAAc,iBACpC,uDACF,EACA,KAAK,eAAe,MAAM,EAE1BA,EAAW,QAASF,GAAa,CAC3BA,EAAS,SACX,KAAK,eAAe,IAAIA,EAAS,KAAK,CAE1C,CAAC,EAGD,KAAK,iBAAiB,EAGtB,KAAK,kBAAkB,EAGvB,KAAK,cAAc,EAGnB,KAAK,MAAM,CACb,CAEA,cAAe,CACT,CAAC,KAAK,WAAa,CAAC,KAAK,gBAI7B,KAAK,mBAAqB,IAAI,IAAI,KAAK,cAAc,EACrD,KAAK,iBAAiB,EAGtB,KAAK,MAAM,EACb,CAEA,gBAAgBF,EAAG,CACjB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAEF,IAAMK,EAAYL,EAAE,OAAO,QACR,KAAK,cAAc,iBACpC,uDACF,EAEW,QAASE,GAAa,CAE1BA,EAAS,WACZA,EAAS,QAAUG,EAEvB,CAAC,CACH,CAEA,sBAAuB,CACrB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAEF,IAAMC,EAAoB,KAAK,cAAc,cAC3C,iDACF,EACMF,EAAa,KAAK,cAAc,iBACpC,uDACF,EAEMG,EAAoB,MAAM,KAAKH,CAAU,EAAE,OAC9CI,GAAO,CAACA,EAAG,QACd,EACMC,EAAeF,EAAkB,OAAQC,GAAOA,EAAG,OAAO,EAAE,OAE9DF,IACFA,EAAkB,QAChBC,EAAkB,OAAS,GAC3BE,IAAiBF,EAAkB,OACrCD,EAAkB,cAChBG,EAAe,GAAKA,EAAeF,EAAkB,OAE3D,CAEA,kBAAmB,CACjB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAEiB,KAAK,cAAc,iBACpC,uDACF,EAEW,QAASL,GAAa,CAC/BA,EAAS,QAAU,KAAK,mBAAmB,IAAIA,EAAS,KAAK,CAC/D,CAAC,EAED,KAAK,qBAAqB,CAC5B,CAEA,mBAAoB,CAClB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAEF,IAAMQ,EAAc,KAAK,cAAc,cACrC,wBACF,EAEA,GAAI,KAAK,eAAe,OAAS,EAC/BA,EAAY,YAAc,iBAC1BA,EAAY,UAAU,OAAO,gCAAgC,UACpD,KAAK,eAAe,OAAS,KAAK,QAAQ,OACnDA,EAAY,YAAc,eAC1BA,EAAY,UAAU,IAAI,gCAAgC,UACjD,KAAK,eAAe,OAAS,EAAG,CAEzC,IAAMC,EAAiB,MAAM,KAAK,KAAK,cAAc,EAAE,IAAKC,GAAU,CACpE,IAAMrB,EAAS,KAAK,QAAQ,KAAME,GAAQA,EAAI,QAAUmB,CAAK,EAC7D,OAAOrB,EAASA,EAAO,MAAQqB,CACjC,CAAC,EACDF,EAAY,YAAcC,EAAe,CAAC,EAC1CD,EAAY,UAAU,IAAI,gCAAgC,CAC5D,MAEEA,EAAY,YAAc,GAAG,KAAK,eAAe,IAAI,YACrDA,EAAY,UAAU,IAAI,gCAAgC,CAE9D,CAEA,eAAgB,CACd,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAGF,IAAMG,EAAQ,IAAI,YAAY,qBAAsB,CAClD,OAAQ,CACN,OAAQ,MAAM,KAAK,KAAK,cAAc,CACxC,CACF,CAAC,EAID,GAHA,KAAK,UAAU,cAAcA,CAAK,EAG9B,KAAK,cAAe,CACtB,IAAMC,EAAc,IAAI,MAAM,SAAU,CAAE,QAAS,EAAK,CAAC,EACzD,KAAK,cAAc,cAAcA,CAAW,CAC9C,CACF,CAEA,kBAAmB,CACZ,KAAK,gBAGV,MAAM,KAAK,KAAK,cAAc,OAAO,EAAE,QAASrB,GAAQ,CACtDA,EAAI,SAAW,EACjB,CAAC,EAGD,MAAM,KAAK,KAAK,cAAc,OAAO,EAAE,QAASA,GAAQ,CAClD,KAAK,eAAe,IAAIA,EAAI,KAAK,IACnCA,EAAI,SAAW,GAEnB,CAAC,EACH,CAEA,mBAAoB,CAClB,OAAO,MAAM,KAAK,KAAK,cAAc,CACvC,CAEA,OAAQ,CACN,KAAK,eAAe,MAAM,EAC1B,KAAK,mBAAmB,MAAM,EAC9B,KAAK,kBAAkB,EACvB,KAAK,iBAAiB,CACxB,CAMA,aAAasB,EAAW,CACtB,GAAI,CAAC,KAAK,WAAa,CAAC,KAAK,cAC3B,OAGF,MAAM,KAAK,KAAK,cAAc,OAAO,EAAE,QAASxB,GAAW,CACzD,GAAIA,EAAO,OAASwB,EAAU,IAAIxB,EAAO,KAAK,EAAG,CAC/C,IAAMyB,EAAQD,EAAU,IAAIxB,EAAO,KAAK,EAClC0B,EAAY1B,EAAO,YAAY,QAAQ,iBAAkB,EAAE,EAE7DyB,EAAQ,GACVzB,EAAO,YAAc,GAAG0B,CAAS,KAAKD,CAAK,IAC3CzB,EAAO,SAAW,KAElBA,EAAO,YAAc0B,EACrB1B,EAAO,SAAW,GAClBA,EAAO,SAAW,GAEtB,CACF,CAAC,EAGkB,KAAK,cAAc,iBACpC,uDACF,EAEW,QAASW,GAAa,CAC/B,IAAMU,EAAQV,EAAS,MACvB,GAAIa,EAAU,IAAIH,CAAK,EAAG,CACxB,IAAMI,EAAQD,EAAU,IAAIH,CAAK,EAC3BhB,EAAaM,EAAS,cACtBgB,EAAYtB,EAAW,cAAc,yBAAyB,EAEpE,GAAIsB,EAAW,CAEb,IAAMC,EAAgBD,EAAU,cAAc,mBAAmB,EAC7DC,GACFA,EAAc,OAAO,EAIvB,IAAIF,EAAYC,EAAU,YACvB,QAAQ,iBAAkB,EAAE,EAC5B,KAAK,EAGRA,EAAU,YAAcD,EAGxB,IAAMG,EAAQ,SAAS,cAAc,MAAM,EAM3C,GALAA,EAAM,UAAY,mBAClBA,EAAM,YAAcJ,EAAM,SAAS,EACnCE,EAAU,YAAYE,CAAK,EAGvBJ,IAAU,EAAG,CACfd,EAAS,SAAW,GACpBA,EAAS,QAAU,GACnBN,EAAW,UAAU,IAAI,kCAAkC,EAG3D,KAAK,eAAe,OAAOgB,CAAK,EAChC,KAAK,mBAAmB,OAAOA,CAAK,EAGpC,IAAMS,EAAc,KAAK,QAAQ,UAC9B5B,GAAQA,EAAI,QAAUmB,CACzB,EACIS,IAAgB,KAClB,KAAK,QAAQA,CAAW,EAAE,MAAQ,GAAGJ,CAAS,KAAKD,CAAK,IAE5D,KAAO,CAELd,EAAS,SAAW,GACpBN,EAAW,UAAU,OAAO,kCAAkC,EAG9D,IAAMyB,EAAc,KAAK,QAAQ,UAC9B5B,GAAQA,EAAI,QAAUmB,CACzB,EACIS,IAAgB,KAClB,KAAK,QAAQA,CAAW,EAAE,MAAQ,GAAGJ,CAAS,KAAKD,CAAK,IAE5D,CACF,CACF,CACF,CAAC,EAGD,KAAK,iBAAiB,EAGtB,KAAK,kBAAkB,CACzB,CAEA,SAAU,CAEJ,KAAK,iBAEH,KAAK,eAAe,eACtB,SAAS,oBACP,QACA,KAAK,eAAe,aACtB,EAIE,KAAK,eAAiB,KAAK,eAAe,cAC5C,KAAK,cAAc,oBACjB,QACA,KAAK,eAAe,YACtB,EAIE,KAAK,eAAiB,KAAK,eAAe,gBAC5C,KAAK,cAAc,oBACjB,SACA,KAAK,eAAe,cACtB,GAQJ,KAAK,OAAS,GAGV,KAAK,WAAa,KAAK,UAAU,YACnC,KAAK,UAAU,WAAW,YAAY,KAAK,SAAS,EAIlD,KAAK,gBACP,KAAK,cAAc,MAAM,QAAU,IAIrC,KAAK,UAAY,KACjB,KAAK,cAAgB,KACrB,KAAK,cAAgB,KACrB,KAAK,eAAiB,IACxB,CACF,ICnfA,SAASM,GAAiBC,EAAS,CACjC,IAAMC,EAAc,IAAI,IAExB,OAAAD,EAAQ,QAASE,GAAW,CAC1B,GAAIA,EAAO,cAAgBA,EAAO,aAAa,WAAW,EAAG,CAC3D,IAAMC,EAAYD,EAAO,aAAa,WAAW,EAE7C,MAAM,QAAQC,CAAS,GACzBA,EAAU,QAASC,GAAS,CAC1B,IAAMC,EAAUD,EAAK,KAAK,EACtBC,GACFJ,EAAY,IAAII,CAAO,CAE3B,CAAC,CAEL,CACF,CAAC,EAGM,MAAM,KAAKJ,CAAW,EAAE,KAAK,CAACK,EAAGC,IAElCD,IAAM,iBAAyB,GAC/BC,IAAM,iBAAyB,EAC5BD,EAAE,cAAcC,CAAC,CACzB,CACH,CAQO,SAASC,GAAwBL,EAAWH,EAAS,CAC1D,IAAMS,EAAS,IAAI,IAGnB,OAAAN,EAAU,QAASO,GAAa,CAC9BD,EAAO,IAAIC,EAAU,CAAC,CACxB,CAAC,EAGDV,EAAQ,QAASE,GAAW,CAC1B,GAAIA,EAAO,cAAgBA,EAAO,aAAa,WAAW,EAAG,CAC3D,IAAMS,EAAkBT,EAAO,aAAa,WAAW,EACnD,MAAM,QAAQS,CAAe,GAC/BA,EAAgB,QAASP,GAAS,CAChC,IAAMC,EAAUD,EAAK,KAAK,EACtBC,GAAWI,EAAO,IAAIJ,CAAO,GAC/BI,EAAO,IAAIJ,EAASI,EAAO,IAAIJ,CAAO,EAAI,CAAC,CAE/C,CAAC,CAEL,CACF,CAAC,EAGGI,EAAO,IAAI,gBAAgB,GAC7BA,EAAO,IAAI,iBAAkBT,EAAQ,MAAM,EAGtCS,CACT,CAMO,SAASG,GAAmBT,EAAW,CAC5CU,EAAkBV,CACpB,CAMA,SAASW,GAAyBX,EAAW,CAC3C,IAAMY,EAAW,SAAS,eAAe,eAAe,EACxD,GAAI,CAACA,EACH,OAIFA,EAAS,UAAY,GAGrB,IAAMC,EAAgB,SAAS,cAAc,QAAQ,EACrDA,EAAc,MAAQ,GACtBA,EAAc,YAAc,qBAC5BA,EAAc,SAAW,GACzBA,EAAc,SAAW,GACzBD,EAAS,YAAYC,CAAa,EAGlCb,EAAU,QAASO,GAAa,CAC9B,IAAMO,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQP,EACfO,EAAO,YAAcP,EACrBK,EAAS,YAAYE,CAAM,CAC7B,CAAC,EAIGC,IAEFA,EAAoB,QAAQ,EAC5BA,EAAsB,OAKtB,CAACH,EAAS,oBACV,CAACA,EAAS,mBAAmB,UAAU,SACrC,4BACF,KAEAG,EAAsBC,GAAgBJ,CAAQ,EAElD,CAKA,SAASK,IAAuB,CAC9B,IAAMC,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAI,CAACA,EACH,OAIF,IAAIN,EAAW,SAAS,eAAe,OAAO,EAG9C,GAAKA,EAoCHA,EAAS,UAAY,OApCR,CAEb,IAAMO,EAAQD,EAAU,cAAc,OAAO,EAE7C,GADAA,EAAU,UAAY,GAClBC,EACFD,EAAU,YAAYC,CAAK,MACtB,CAEL,IAAMC,EAAW,SAAS,cAAc,OAAO,EAC/CA,EAAS,UAAY,yBACrBA,EAAS,aAAa,MAAO,gBAAgB,EAC7CA,EAAS,YAAc,OACvBF,EAAU,YAAYE,CAAQ,CAChC,CAGA,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,wBAGpB,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,sBAGlBV,EAAW,SAAS,cAAc,QAAQ,EAC1CA,EAAS,KAAO,OAChBA,EAAS,UACP,2DACFA,EAAS,GAAK,QAGdU,EAAM,YAAYV,CAAQ,EAC1BS,EAAQ,YAAYC,CAAK,EACzBJ,EAAU,YAAYG,CAAO,CAC/B,CAMoB,CAClB,CAAE,MAAO,YAAa,MAAO,YAAa,SAAU,EAAK,EACzD,CAAE,MAAO,cAAe,MAAO,qBAAsB,EACrD,CAAE,MAAO,cAAe,MAAO,qBAAsB,EACrD,CAAE,MAAO,WAAY,MAAO,aAAc,EAC1C,CAAE,MAAO,WAAY,MAAO,aAAc,CAC5C,EAGY,QAASE,GAAQ,CAC3B,IAAMT,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQS,EAAI,MACnBT,EAAO,YAAcS,EAAI,MACrBA,EAAI,WAAUT,EAAO,SAAW,IACpCF,EAAS,YAAYE,CAAM,CAC7B,CAAC,CAEH,CAMA,SAASU,IAAmB,CAE1B,IAAMC,EAAmB,SAAS,eAAe,eAAe,EAChE,GACEA,GACA,CAACA,EAAiB,cAAc,cAAc,qBAAqB,EACnE,CACA,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,qBACjBA,EAAK,aAAa,cAAe,UAAU,EAE3C,IAAML,EAAUI,EAAiB,QAAQ,wBAAwB,EACjE,GAAIJ,EAAS,CACX,IAAMC,EAAQD,EAAQ,cAAc,sBAAsB,EACtDC,GACFA,EAAM,YAAYI,CAAI,CAE1B,CACF,CAGA,IAAMC,EAAe,SAAS,eAAe,OAAO,EACpD,GACEA,GACA,CAACA,EAAa,cAAc,cAAc,qBAAqB,EAC/D,CACA,IAAMD,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,qBACjBA,EAAK,aAAa,cAAe,UAAU,EAE3C,IAAML,EAAUM,EAAa,QAAQ,wBAAwB,EAC7D,GAAIN,EAAS,CACX,IAAMC,EAAQD,EAAQ,cAAc,sBAAsB,EACtDC,GACFA,EAAM,YAAYI,CAAI,CAE1B,CACF,CACF,CAOO,SAASE,GAAoB/B,EAASgC,EAAqB,KAAM,CAGtE,IAAI7B,EACA6B,GAAsBA,EAAmB,OAAS,EACpD7B,EAAY6B,EACHnB,EAAgB,OAAS,EAClCV,EAAYU,EAEZV,EAAYJ,GAAiBC,CAAO,EAGtCc,GAAyBX,CAAS,EAGlC,IAAMM,EAASD,GAAwBL,EAAWH,CAAO,EACrDkB,GACFA,EAAoB,aAAaT,CAAM,EAIzCW,GAAqB,EAGrBO,GAAiB,CAEnB,CApVA,IAiEIT,EACAL,EAlEJoB,EAAAC,EAAA,KA+DAC,IAEIjB,EAAsB,KACtBL,EAAkB,CAAC,ICzDhB,SAASuB,GAAsBC,EAAS,CAC7C,IAAMC,EAAU,SAAS,eAAe,uBAAuB,EACzDC,EAAY,SAAS,eAAe,gBAAgB,EACpDC,EAAc,SAAS,eAAe,aAAa,EAEzD,GAAI,CAACF,GAAW,CAACC,EACf,OAIFA,EAAU,UAAY,GAEtB,IAAIE,EAAa,GAGjB,GAAIJ,EAAQ,aAAeA,EAAQ,YAAY,KAAK,EAAG,CACrDI,EAAa,GACb,IAAMC,EAAOC,GACX,SACAN,EAAQ,YACR,aACA,QACF,EACAE,EAAU,YAAYG,CAAI,CAC5B,CAGIL,EAAQ,WAAaA,EAAQ,UAAU,OAAS,IAErBO,GAAuBP,EAAQ,SAAS,IAGnEI,EAAa,GACbJ,EAAQ,UAAU,QAASQ,GAAa,CACtC,IAAMH,EAAOC,GACX,YACAE,EACA,aACA,YACAA,CACF,EACAN,EAAU,YAAYG,CAAI,CAC5B,CAAC,IAODF,IACFA,EAAY,MAAM,QAAUC,EAAa,cAAgB,OACzDD,EAAY,MAAM,WAAa,MAC/BA,EAAY,MAAM,cAAgB,SAClCA,EAAY,MAAM,WAAa,SAC/BD,EAAU,YAAYC,CAAW,GAInCF,EAAQ,MAAM,QAAUG,EAAa,QAAU,MACjD,CAOA,SAASG,GAAuBE,EAAmB,CACjD,IAAMC,EAAW,SAAS,eAAe,eAAe,EACxD,GAAI,CAACA,EAAU,MAAO,GAEtB,IAAMC,EAAe,MAAM,KAAKD,EAAS,OAAO,EAAE,OAC/CE,GAAQ,CAACA,EAAI,UAAYA,EAAI,KAChC,EAAE,OAEF,OAAOH,EAAkB,SAAWE,CACtC,CA2BA,SAASL,GAAiBO,EAAOC,EAAOC,EAAYC,EAAYC,EAAa,CAC3E,IAAMZ,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,SAASU,CAAU,gDAEpC,IAAMG,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,UAAY,aACtBA,EAAU,YAAc,GAAGL,CAAK,IAEhC,IAAMM,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,UAAY,aACtBA,EAAU,YAAcL,EAExB,IAAMM,EAAe,SAAS,cAAc,QAAQ,EACpDA,EAAa,KAAO,SACpBA,EAAa,UAAY,cACzBA,EAAa,MAAQ,UAAUP,CAAK,KAAKC,CAAK,GAC9CM,EAAa,aAAa,mBAAoBJ,CAAU,EACpDC,GACFG,EAAa,aAAa,oBAAqBH,CAAW,EAG5D,IAAMI,EAAO,SAAS,cAAc,MAAM,EAC1C,OAAAA,EAAK,UAAY,eAEjBD,EAAa,YAAYC,CAAI,EAG7BD,EAAa,iBAAiB,QAAUE,GAAM,CAC5CA,EAAE,eAAe,EACjBC,GAAaP,EAAYC,CAAW,CACtC,CAAC,EAEDZ,EAAK,YAAYa,CAAS,EAC1Bb,EAAK,YAAYc,CAAS,EAC1Bd,EAAK,YAAYe,CAAY,EAEtBf,CACT,CAOA,eAAekB,GAAaP,EAAYC,EAAa,CAEnD,OAAQD,EAAY,CAClB,IAAK,SAEH,IAAMQ,EAAc,SAAS,eAAe,QAAQ,EACpD,GAAIA,EAAa,CACfA,EAAY,MAAQ,GAEpB,GAAM,CAAE,mBAAAC,CAAmB,EAAI,KAAM,qCAGrCA,EAAmB,CACrB,CACA,MAEF,IAAK,YAEH,IAAMC,EAAmB,SAAS,eAAe,eAAe,EAChE,GAAIA,GAAoBT,EAAa,CACnC,IAAMU,EAAS,MAAM,KAAKD,EAAiB,OAAO,EAAE,KACjDd,GAAQA,EAAI,QAAUK,CACzB,EACIU,IACFA,EAAO,SAAW,IAIpB,IAAMC,EAAc,IAAI,MAAM,SAAU,CAAE,QAAS,EAAK,CAAC,EACzDF,EAAiB,cAAcE,CAAW,EAG1C,IAAMC,EAAuBH,EAAiB,mBAC9C,GACEG,GACAA,EAAqB,UAAU,SAAS,4BAA4B,EACpE,CACA,IAAMC,EAAWD,EAAqB,sBAClCC,IACFA,EAAS,eAAe,OAAOb,CAAW,EAC1Ca,EAAS,iBAAiB,EAC1BA,EAAS,kBAAkB,EAC3BA,EAAS,cAAc,EAE3B,CACF,CACA,KAGJ,CACF,CAKA,eAAsBC,IAAkB,CAGtC,IAAMP,EAAc,SAAS,eAAe,QAAQ,EAChDA,IACFA,EAAY,MAAQ,IAItB,IAAME,EAAmB,SAAS,eAAe,eAAe,EAChE,GAAIA,EAAkB,CACpB,MAAM,KAAKA,EAAiB,OAAO,EAAE,QAASd,GAAQ,CAChD,CAACA,EAAI,UAAYA,EAAI,QACvBA,EAAI,SAAW,GAEnB,CAAC,EAGD,IAAMiB,EAAuBH,EAAiB,mBAC9C,GACEG,GACAA,EAAqB,UAAU,SAAS,4BAA4B,EACpE,CACA,IAAMC,EAAWD,EAAqB,sBAClCC,GAAY,OAAOA,EAAS,oBAAuB,aACrDA,EAAS,mBAAmB,EAC5BA,EAAS,cAAc,EAE3B,CACF,CAGA,IAAM7B,EAAU,SAAS,eAAe,uBAAuB,EAC3DA,IACFA,EAAQ,MAAM,QAAU,QAI1B,GAAM,CAAE,mBAAAwB,CAAmB,EAAI,KAAM,qCACrCA,EAAmB,CACrB,CAKO,SAASO,IAAqB,CACnC,IAAM7B,EAAc,SAAS,eAAe,aAAa,EACrDA,GACFA,EAAY,iBAAiB,QAAUmB,GAAM,CAC3CA,EAAE,eAAe,EACjBS,GAAgB,CAClB,CAAC,CAEL,CAMO,SAASE,IAAoB,CAClC,IAAMT,EAAc,SAAS,eAAe,QAAQ,EAC9CE,EAAmB,SAAS,eAAe,eAAe,EAC1DQ,EACJ,SAAS,eAAe,MAAM,GAAK,SAAS,eAAe,OAAO,EAE9DlC,EAAU,CACd,YAAawB,EAAcA,EAAY,MAAQ,GAC/C,UAAW,CAAC,EACZ,KAAMU,EAAeA,EAAa,MAAQ,WAC5C,EAEA,GAAIR,EAAkB,CACpB,IAAMS,EAAkB,MAAM,KAAKT,EAAiB,iBAAmB,CAAC,CAAC,EACzE1B,EAAQ,UAAYmC,EACjB,IAAKvB,GAAQA,EAAI,KAAK,EACtB,OAAQwB,GAAQA,GAAOA,EAAI,KAAK,EAAE,OAAS,CAAC,CACjD,CAEA,OAAOpC,CACT,CAjSA,IAAAqC,EAAAC,EAAA,QCUO,SAASC,EAAaC,EAAS,CAEpC,IAAMC,EAAW,IAAI,IACfC,EAAsB,CAAC,EAE7BF,EAAQ,QAAQ,CAACG,EAAQC,IAAU,CAEjC,IAAMC,EACJF,EAAO,SACPA,EAAO,KACPA,EAAO,OACP,KAAK,UAAUA,CAAM,EAAIC,EAEtBH,EAAS,IAAII,CAAS,IACzBJ,EAAS,IAAII,CAAS,EACtBH,EAAoB,KAAKC,CAAM,EAEnC,CAAC,EAEDG,GAAaJ,CACf,CAOA,SAASK,GAAiBC,EAAmB,CAC3C,GAAI,CAACA,GAAqBA,EAAkB,SAAW,EACrD,OAAOF,GAIT,IAAML,EAAW,IAAI,IACfQ,EAAW,CAAC,EAElB,OAAAH,GAAW,QAAQ,CAACH,EAAQC,IAAU,CACpC,GAAI,CAACD,EAAO,cAAgB,CAACA,EAAO,aAAa,WAAW,EAC1D,OAGF,IAAMO,EAAkBP,EAAO,aAAa,WAAW,EAOvD,GAJgBK,EAAkB,KAAMG,GACtCD,EAAgB,SAASC,CAAY,CACvC,EAEa,CAEX,IAAMN,EACJF,EAAO,SACPA,EAAO,KACPA,EAAO,OACP,KAAK,UAAUA,CAAM,EAAIC,EAGtBH,EAAS,IAAII,CAAS,IACzBJ,EAAS,IAAII,CAAS,EACtBI,EAAS,KAAKN,CAAM,EAExB,CACF,CAAC,EAEMM,CACT,CAQA,SAASG,GAAYZ,EAASa,EAAQ,CACpC,IAAMC,EAAS,CAAC,GAAGd,CAAO,EAE1B,OAAQa,EAAQ,CACd,IAAK,YAEHC,EAAO,KAAK,CAAC,EAAGC,IACV,EAAE,MAAQA,EAAE,KACP,EAAE,KAAOA,EAAE,KAEhB,EAAE,OAASA,EAAE,MACRA,EAAE,MAAQ,EAAE,MAEd,CACR,EACD,MAEF,IAAK,cACHD,EAAO,KAAK,CAAC,EAAGC,IAAM,CACpB,IAAMC,EAAQ,EAAE,eAAiB,EAEjC,OADcD,EAAE,eAAiB,GAClBC,CACjB,CAAC,EACD,MAEF,IAAK,cACHF,EAAO,KAAK,CAAC,EAAGC,IAAM,CACpB,IAAMC,EAAQ,EAAE,eAAiB,EAC3BC,EAAQF,EAAE,eAAiB,EACjC,OAAOC,EAAQC,CACjB,CAAC,EACD,MAEF,IAAK,WACHH,EAAO,KAAK,CAAC,EAAGC,IAAM,CACpB,IAAMG,EAAS,EAAE,OAAS,GACpBC,EAASJ,EAAE,OAAS,GAC1B,OAAOG,EAAO,cAAcC,CAAM,CACpC,CAAC,EACD,MAEF,IAAK,WACHL,EAAO,KAAK,CAAC,EAAGC,IAAM,CACpB,IAAMG,EAAS,EAAE,OAAS,GAE1B,OADeH,EAAE,OAAS,IACZ,cAAcG,CAAM,CACpC,CAAC,EACD,MAEF,QAEE,KACJ,CAEA,OAAOJ,CACT,CAMA,SAASM,GAAeP,EAAQ,CAC9B,IAAMQ,EAAY,SAAS,eAAe,qBAAqB,EAC/D,GAAI,CAACA,EAAW,OAEhB,IAAMC,EAAQ,MAAM,KAAKD,EAAU,iBAAiB,mBAAmB,CAAC,EAExEC,EAAM,KAAK,CAAC,EAAGP,IAAM,CACnB,OAAQF,EAAQ,CACd,IAAK,YAEH,IAAMU,EAAO,WAAW,EAAE,aAAa,qBAAqB,CAAC,GAAK,EAElE,OADa,WAAWR,EAAE,aAAa,qBAAqB,CAAC,GAAK,GACpDQ,EAEhB,IAAK,cAEH,IAAMP,EAAQ,WAAW,EAAE,aAAa,gBAAgB,CAAC,GAAK,EAE9D,OADc,WAAWD,EAAE,aAAa,gBAAgB,CAAC,GAAK,GAC/CC,EAEjB,IAAK,cAEH,IAAMQ,EAAQ,WAAW,EAAE,aAAa,gBAAgB,CAAC,GAAK,EACxDC,EAAQ,WAAWV,EAAE,aAAa,gBAAgB,CAAC,GAAK,EAC9D,OAAOS,EAAQC,EAEjB,IAAK,WAEH,IAAMP,EAAS,EAAE,aAAa,iBAAiB,GAAK,GAC9CC,EAASJ,EAAE,aAAa,iBAAiB,GAAK,GACpD,OAAOG,EAAO,cAAcC,CAAM,EAEpC,IAAK,WAEH,IAAMO,EAAS,EAAE,aAAa,iBAAiB,GAAK,GAEpD,OADeX,EAAE,aAAa,iBAAiB,GAAK,IACtC,cAAcW,CAAM,EAEpC,QACE,MAAO,EACX,CACF,CAAC,EAGDJ,EAAM,QAASK,GAASN,EAAU,YAAYM,CAAI,CAAC,CACrD,CAQA,eAAsBC,GAAsB,CAE1C,GAAI,CAAAC,GAIJ,CAAAA,GAAa,GAEb,GAAI,CAEF,IAAMC,EAAmB,SAAS,eAAe,eAAe,EAE1DC,EACJ,SAAS,eAAe,MAAM,GAAK,SAAS,eAAe,OAAO,EAEpE,GAAI,CAACD,GAAoB,CAACC,EACxB,OAIF,IAAIvB,EAAoB,CAAC,EACrBsB,IAKFtB,EAJwB,MAAM,KAC5BsB,EAAiB,iBAAmB,CAAC,CACvC,EAGG,IAAKE,GAAQA,EAAI,KAAK,EACtB,OAAQC,GAAQA,GAAOA,EAAI,KAAK,EAAE,OAAS,CAAC,GAGjD,IAAMC,EAAeH,EAAa,OAAS,YAGvCtB,EAAWF,GAAiBC,CAAiB,EAG7CM,EAASF,GAAYH,EAAUyB,CAAY,EAGzC,CAAE,cAAAC,CAAc,EAAI,KAAM,sCAChCA,EAAcrB,EAAQ,qBAAqB,EAG3CM,GAAec,CAAY,EAG3B,IAAME,EAAiBC,GAAkB,EACzCC,GAAsBF,CAAc,CACtC,QAAE,CACAP,GAAa,EACf,EACF,CAQO,SAASU,IAA2B,CAEzC,GAAIC,GACF,OAGF,IAAMV,EAAmB,SAAS,eAAe,eAAe,EAE1DC,EACJ,SAAS,eAAe,MAAM,GAAK,SAAS,eAAe,OAAO,EAEpE,GAAID,EAAkB,CACpBA,EAAiB,iBAAiB,SAAU,UAAY,CACtDF,EAAoB,CACtB,CAAC,EAGD,IAAMa,EAAuBX,EAAiB,mBAE5CW,GACAA,EAAqB,UAAU,SAAS,4BAA4B,GAEpEA,EAAqB,iBAAiB,qBAAsB,IAAM,CAChEb,EAAoB,CACtB,CAAC,EAIC,OAAO,OAAO,EAAM,KACtB,OAAO,EAAEE,CAAgB,EAAE,GAAG,cAAe,UAAY,CACvDF,EAAoB,CACtB,CAAC,CAEL,CAEIG,GACFA,EAAa,iBAAiB,SAAU,UAAY,CAClDH,EAAoB,CACtB,CAAC,EAGHY,GAAuB,EACzB,CA3SA,IAGIlC,GA6LAuB,GA4DAW,GA5PJE,EAAAC,EAAA,KACAC,IAEItC,GAAa,CAAC,EA6LduB,GAAa,GA4DbW,GAAuB,KC5P3B,IAAAK,EAAA,GAAAC,EAAAD,EAAA,wBAAAE,IAoBA,eAAeC,IAAqB,CAClC,IAAMC,EAAkBC,GAAuB,EAE/C,GAAI,CACF,IAAMC,EAAW,MAAM,MAAMF,CAAe,EAC5C,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,IAAMC,EAAO,MAAMD,EAAS,KAAK,EACjC,OAAO,MAAM,QAAQC,CAAI,EAAIA,EAAO,CAAC,CACvC,MAAgB,CACd,OAAO,IACT,CACF,CAGO,SAASL,GAAqB,CAGnC,GAAI,CAD2B,SAAS,eAAe,qBAAqB,EAE1E,OAGF,IAAMM,EAASC,EAAU,EACnBC,EAAgBC,GAAqB,EACrCC,EAAiBC,GAAsB,EAG7CV,GAAmB,EAAE,KAAMW,GAAc,CACnCA,IACFC,GAAmBD,EACnBE,GAAmBF,CAAS,EAEhC,CAAC,EAGD,MAAMJ,CAAa,EAChB,KAAMJ,GAAa,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,KAAK,CACvB,CAAC,EACA,KAAMC,GAAS,CACdU,GAAwBV,EAAMC,EAAO,aAAe,WAAa,OAAO,CAC1E,CAAC,EACA,MAAOU,GAAiB,CAEnBN,EACF,MAAMA,CAAc,EACjB,KAAMN,GAAa,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,KAAK,CACvB,CAAC,EACA,KAAMC,GAAS,CACdU,GAAwBV,EAAM,UAAU,CAC1C,CAAC,EACA,MAAOY,GAAkB,CACxBC,GAAoB,CACtB,CAAC,EAGHA,GAAoB,CAExB,CAAC,CACL,CAEA,SAASA,IAAsB,CAC7B,IAAMC,EAAY,SAAS,eAAe,qBAAqB,EAC3DA,IACFA,EAAU,UACR,6GAEN,CAEA,SAASJ,GAAwBV,EAAMe,EAAS,UAAW,CAKzD,IAAMC,GAHU,MAAM,QAAQhB,CAAI,EAAIA,EAAO,CAAC,GAGhB,IAAKiB,GAAW,CAE5C,IAAMC,EAAgBD,EAAO,cAAc,EACvC,IAAI,KAAKA,EAAO,cAAc,CAAC,EAAE,QAAQ,EACzC,EAEJ,MAAO,CACL,MAAOA,EAAO,OAAS,GACvB,QAASA,EAAO,aAAeA,EAAO,SAAW,GACjD,aAAc,CACZ,YAAaA,EAAO,WAAW,GAAK,CAAC,EACrC,MAAOA,EAAO,OAAS,CAAC,EACxB,SAAUA,EAAO,UAAY,CAAC,CAChC,EACA,KAAMA,EAAO,cAAc,EACvB,IAAI,KAAKA,EAAO,cAAc,CAAC,EAAE,mBAAmB,QAAS,CAC3D,KAAM,UACN,MAAO,MACT,CAAC,EACD,GACJ,cAAeC,EACf,QAASD,EAAO,KAAOA,EAAO,SAAW,GACzC,YAAaA,EAAO,cAAc,GAAK,GACvC,KAAMA,EAAO,MAAQ,EACrB,MAAOA,EAAO,OAAS,CACzB,CACF,CAAC,EAGKE,EAAW,IAAI,IACfC,EAAsB,CAAC,EAE7BJ,EAAc,QAAQ,CAACC,EAAQI,IAAU,CAEvC,IAAMC,EACJL,EAAO,SACPA,EAAO,KACPA,EAAO,OACP,KAAK,UAAUA,CAAM,EAAII,EAEtBF,EAAS,IAAIG,CAAS,IACzBH,EAAS,IAAIG,CAAS,EACtBF,EAAoB,KAAKH,CAAM,EAEnC,CAAC,EAGDM,EAAaH,CAAmB,EAGhC,OAAO,gBAAkBA,EAIzBI,GAAoBJ,EAAqBZ,EAAgB,EAGzDiB,GAAyB,EAGzBC,EAAcN,EAAqB,qBAAqB,CAC1D,CAnKA,IAcIZ,GAdJmB,EAAAC,EAAA,KACAC,IACAC,IAIAC,IACAC,IAOIxB,GAAmB,KAwJvB,OAAO,iBAAiB,OAAQ,UAAY,CAE1C,WAAWb,EAAoB,GAAG,CACpC,CAAC,ICzKD,IAAAsC,GAAAC,EAAA,KACAC,IACAC,IACAC,IACAC,IAGA,OAAO,iBAAiB,mBAAoB,UAAY,CACtD,IAAMC,EAAc,SAAS,eAAe,QAAQ,EAE/CA,GAKLA,EAAY,iBAAiB,UAAW,SAAUC,EAAG,CACnD,GAAIA,EAAE,MAAQ,QAAS,CACrBA,EAAE,eAAe,EACjB,IAAMC,EAAQF,EAAY,MAAM,KAAK,EAErC,GAAIE,IAAU,GAEZC,EAAmB,MACd,CAEL,IAAMC,EAAaC,GAAc,EAEjC,GAAID,GAAcA,EAAW,OAAS,EAAG,CACvC,IAAME,EAAUC,GAAgBL,EAAOE,CAAU,EACjDI,EAAaF,CAAO,EACpBG,EAAoB,CACtB,KAAO,CACL,IAAMC,EAAa,OAAO,EAAE,sBAAsB,EAC9CA,GAAcA,EAAW,OAAS,GACpCA,EAAW,KACT,sGACF,CAEJ,CACF,CACF,CACF,CAAC,CACH,CAAC,IC1CD,IAAAC,GAAAC,EAAA,KACA,IAAMC,GAAe,yDAErB,SAASC,GAAoBC,EAAO,SAAU,CAC5BA,EAAK,iBAAiBF,EAAY,EAC1C,QAASG,GAAW,CAC1BA,EAAO,UAAU,IAAI,WAAY,mBAAmB,CACtD,CAAC,CACH,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoB,IAAMF,GAAoB,CAAC,EAEzEA,GAAoB,ICbtB,IAAAG,GAAAC,EAAA,KACAC,IACA,IAAAC,GAAO,SACPC,IACAC,IACAC,IACAC,IACAC,IACAC,IACA,IAAAC,GAAO,SACPC,IACAC,IAKA,OAAO,iBAAiB,OAAQ,UAAY,CAC1CC,GAAmB,CACrB,CAAC",
  "names": ["isProduction", "getConfig", "getPrimaryDataSource", "config", "getFallbackDataSource", "getWorkAreasDataSource", "NOISE_WORDS", "init_config", "__esmMin", "tokenizeQuery", "query", "cleaned", "word", "lowerWord", "NOISE_WORDS", "token", "normalizeText", "text", "countTermFrequency", "term", "normalized", "fullWordRegex", "fullWordMatches", "fullWordCount", "partialRegex", "allMatches", "totalMatches", "partialCount", "extractMetadata", "result", "parts", "scoreTermInResult", "titleText", "summaryText", "metadataText", "titleTF", "summaryTF", "metadataTF", "titleScore", "summaryScore", "metadataScore", "totalScore", "getDocumentLength", "titleLength", "summaryLength", "metadataLength", "searchLocalData", "keywords", "results", "terms", "matchedResults", "matchedTerms", "termScores", "termScore", "docLength", "normalizedScore", "a", "b", "getCachedData", "init_offline_search", "__esmMin", "init_config", "pagination_exports", "__export", "getCurrentPage", "getCurrentPageResults", "getTotalPages", "initializePagination", "updatePagination", "results", "perPage", "allResults", "itemsPerPage", "totalItems", "currentPage", "ensurePaginationContainer", "renderPaginationControls", "startIndex", "endIndex", "paginationContainer", "searchResultsContainer", "totalPages", "wrapper", "prevButton", "createControlButton", "goToPage", "pageNumbers", "createPageNumbers", "nextButton", "label", "enabled", "onClick", "button", "iconLabel", "icon", "text", "container", "calculatePageRange", "page", "ellipsis", "pageButton", "pageText", "current", "total", "_", "i", "pages", "start", "end", "event", "top", "init_pagination", "__esmMin", "search_card_template_exports", "__export", "renderResults", "formatDate", "dateStr", "date", "highlightMatches", "text", "matchedTerms", "highlighted", "a", "b", "term", "regex", "setHighlightedHTML", "element", "htmlString", "doc", "node", "createSearchCard", "result", "card", "relevance", "dateTimestamp", "inner", "content", "textSection", "title", "highlightedTitle", "summary", "highlightedSummary", "workAreas", "tagsContainer", "workArea", "tag", "actions", "button", "buttonText", "icon", "metadata", "roles", "usefulRow", "value", "label", "rolesText", "highlightedRoles", "tempSpan", "dateEl", "results", "containerId", "usePagination", "container", "$container", "noResults", "initializePagination", "getCurrentPageResults", "paginationListenerAdded", "init_search_card_template", "__esmMin", "event", "initMultiSelect", "selector", "element", "MultiSelectDropdown", "init_multi_select_dropdown", "__esmMin", "selectElement", "option", "nativeOption", "opt", "optionsList", "selectAllItem", "optionItem", "actionsContainer", "okButton", "cancelButton", "e", "item", "checkbox", "labelText", "checkboxes", "isChecked", "selectAllCheckbox", "enabledCheckboxes", "cb", "checkedCount", "textElement", "selectedLabels", "value", "event", "changeEvent", "countsMap", "count", "baseLabel", "labelSpan", "existingBadge", "badge", "optionIndex", "extractWorkAreas", "results", "workAreaSet", "result", "workAreas", "area", "trimmed", "a", "b", "calculateWorkAreaCounts", "counts", "workArea", "resultWorkAreas", "setStaticWorkAreas", "staticWorkAreas", "populateWorkAreaDropdown", "dropdown", "defaultOption", "option", "multiSelectInstance", "initMultiSelect", "populateSortDropdown", "container", "label", "newLabel", "wrapper", "inner", "opt", "addDropdownIcons", "workAreaDropdown", "icon", "sortDropdown", "initializeDropdowns", "workAreasFromFetch", "init_populate_dropdowns", "__esmMin", "init_multi_select_dropdown", "displayAppliedFilters", "filters", "section", "container", "clearAllBtn", "hasFilters", "pill", "createFilterPill", "isAllWorkAreasSelected", "workArea", "selectedWorkAreas", "dropdown", "totalOptions", "opt", "label", "value", "badgeClass", "filterType", "filterValue", "pillLabel", "pillValue", "removeButton", "icon", "e", "removeFilter", "searchInput", "loadInitialResults", "workAreaDropdown", "option", "changeEvent", "multiSelectContainer", "instance", "clearAllFilters", "initClearAllButton", "getCurrentFilters", "sortDropdown", "selectedOptions", "val", "init_applied_filters", "__esmMin", "storeResults", "results", "seenKeys", "deduplicatedResults", "result", "index", "uniqueKey", "allResults", "filterByWorkArea", "selectedWorkAreas", "filtered", "resultWorkAreas", "selectedArea", "sortResults", "sortBy", "sorted", "b", "dateA", "dateB", "titleA", "titleB", "sortCardsInDOM", "container", "cards", "relA", "dateC", "dateD", "titleC", "card", "applyFiltersAndSort", "isApplying", "workAreaDropdown", "sortDropdown", "opt", "val", "selectedSort", "renderResults", "currentFilters", "getCurrentFilters", "displayAppliedFilters", "initializeFiltersAndSort", "listenersInitialized", "multiSelectContainer", "init_search_filters", "__esmMin", "init_applied_filters", "load_initial_results_exports", "__export", "loadInitialResults", "fetchWorkAreasList", "workAreasSource", "getWorkAreasDataSource", "response", "data", "config", "getConfig", "primarySource", "getPrimaryDataSource", "fallbackSource", "getFallbackDataSource", "workAreas", "fetchedWorkAreas", "setStaticWorkAreas", "processAndRenderResults", "primaryError", "fallbackError", "displayErrorMessage", "container", "source", "mappedResults", "result", "dateTimestamp", "seenKeys", "deduplicatedResults", "index", "uniqueKey", "storeResults", "initializeDropdowns", "initializeFiltersAndSort", "renderResults", "init_load_initial_results", "__esmMin", "init_search_card_template", "init_populate_dropdowns", "init_search_filters", "init_config", "require_search_form_handler", "__commonJSMin", "init_offline_search", "init_load_initial_results", "init_search_card_template", "init_search_filters", "searchInput", "e", "query", "loadInitialResults", "cachedData", "getCachedData", "results", "searchLocalData", "storeResults", "applyFiltersAndSort", "$container", "require_cta_button_alias", "__commonJSMin", "CTA_SELECTOR", "applyCtaButtonAlias", "root", "anchor", "require_landing_page", "__commonJSMin", "init_config", "import_search_form_handler", "init_search_filters", "init_search_card_template", "init_populate_dropdowns", "init_offline_search", "init_multi_select_dropdown", "init_load_initial_results", "import_cta_button_alias", "init_pagination", "init_applied_filters", "initClearAllButton"]
}
