{
  "version": 3,
  "sources": ["../src/js/config.js", "../src/js/pagination.js", "../src/js/search-card-template.js", "../src/js/multi-select-dropdown.js", "../src/js/populate-dropdowns.js", "../src/js/applied-filters.js", "../src/js/search-filters.js", "../src/js/load-initial-results.js", "../src/js/offline-search.js", "../src/js/search-form-handler.js", "../src/js/cta-button-alias.js", "../src/js/landing-page.js"],
  "sourcesContent": ["/**\r\n * Configuration Module\r\n * Centralized environment detection and API endpoint configuration\r\n */\r\n\r\n/**\r\n * Detect if the application is running in production environment\r\n * @returns {boolean} True if running on ntgcentral.nt.gov.au\r\n */\r\nexport function isProduction() {\r\n  return window.location.hostname === \"ntgcentral.nt.gov.au\";\r\n}\r\n\r\n/**\r\n * Get the appropriate data source URL based on environment\r\n * @returns {Object} Configuration object with data source URLs\r\n */\r\nexport function getConfig() {\r\n  const config = {\r\n    isProduction: isProduction(),\r\n    liveApiUrl:\r\n      \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/articles/_nocache\",\r\n    fallbackJsonUrl: \"./dist/search.json\",\r\n    workAreasUrl: isProduction()\r\n      ? \"https://ntgcentral.nt.gov.au/services-and-support/ict-services-websites/artificial-intelligence/ai-knowledge-base/configuration/listing/work-areas/_nocache\"\r\n      : \"./src/data/work-areas.json\",\r\n  };\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get the primary data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The primary data source URL\r\n */\r\nexport function getPrimaryDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.liveApiUrl : config.fallbackJsonUrl;\r\n}\r\n\r\n/**\r\n * Get the fallback data source URL\r\n * Only used in production when live API fails\r\n * @returns {string|null} The fallback URL or null for dev environment\r\n */\r\nexport function getFallbackDataSource() {\r\n  const config = getConfig();\r\n  return config.isProduction ? config.fallbackJsonUrl : null;\r\n}\r\n\r\n/**\r\n * Get the work areas data source URL for the current environment\r\n * Production: Live API\r\n * Development: Local JSON file\r\n * @returns {string} The work areas data source URL\r\n */\r\nexport function getWorkAreasDataSource() {\r\n  const config = getConfig();\r\n  return config.workAreasUrl;\r\n}\r\n", "// Pagination component for search results\r\n\r\nlet currentPage = 1;\r\nlet itemsPerPage = 10;\r\nlet totalItems = 0;\r\nlet allResults = [];\r\nlet paginationContainer = null;\r\n\r\n/**\r\n * Initialize pagination\r\n * @param {Array} results - All search results\r\n * @param {number} perPage - Items per page (default: 10)\r\n */\r\nexport function initializePagination(results, perPage = 10) {\r\n  allResults = results;\r\n  itemsPerPage = perPage;\r\n  totalItems = results.length;\r\n  currentPage = 1;\r\n\r\n  // Find or create pagination container\r\n  ensurePaginationContainer();\r\n\r\n  // Render pagination controls\r\n  renderPaginationControls();\r\n}\r\n\r\n/**\r\n * Get current page of results\r\n * @returns {Array} - Results for current page\r\n */\r\nexport function getCurrentPageResults() {\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  return allResults.slice(startIndex, endIndex);\r\n}\r\n\r\n/**\r\n * Get current page number\r\n * @returns {number}\r\n */\r\nexport function getCurrentPage() {\r\n  return currentPage;\r\n}\r\n\r\n/**\r\n * Get total number of pages\r\n * @returns {number}\r\n */\r\nexport function getTotalPages() {\r\n  return Math.ceil(totalItems / itemsPerPage);\r\n}\r\n\r\n/**\r\n * Ensure pagination container exists in DOM\r\n */\r\nfunction ensurePaginationContainer() {\r\n  paginationContainer = document.getElementById(\"aikb-pagination\");\r\n\r\n  if (!paginationContainer) {\r\n    // Create pagination container after search results\r\n    const searchResultsContainer = document.getElementById(\r\n      \"search-results-list\"\r\n    );\r\n    if (searchResultsContainer && searchResultsContainer.parentNode) {\r\n      paginationContainer = document.createElement(\"div\");\r\n      paginationContainer.id = \"aikb-pagination\";\r\n      paginationContainer.className = \"aikb-pagination\";\r\n      searchResultsContainer.parentNode.insertBefore(\r\n        paginationContainer,\r\n        searchResultsContainer.nextSibling\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Render pagination controls\r\n */\r\nfunction renderPaginationControls() {\r\n  if (!paginationContainer) return;\r\n\r\n  const totalPages = getTotalPages();\r\n\r\n  // Hide pagination if only 1 page or no results\r\n  if (totalPages <= 1) {\r\n    paginationContainer.innerHTML = \"\";\r\n    paginationContainer.style.display = \"none\";\r\n    return;\r\n  }\r\n\r\n  paginationContainer.style.display = \"flex\";\r\n\r\n  // Create pagination wrapper\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.className = \"aikb-pagination__wrapper\";\r\n\r\n  // Previous button\r\n  const prevButton = createControlButton(\"Previous\", currentPage > 1, () => {\r\n    if (currentPage > 1) {\r\n      goToPage(currentPage - 1);\r\n    }\r\n  });\r\n  wrapper.appendChild(prevButton);\r\n\r\n  // Page numbers\r\n  const pageNumbers = createPageNumbers(totalPages);\r\n  wrapper.appendChild(pageNumbers);\r\n\r\n  // Next button\r\n  const nextButton = createControlButton(\r\n    \"Next\",\r\n    currentPage < totalPages,\r\n    () => {\r\n      if (currentPage < totalPages) {\r\n        goToPage(currentPage + 1);\r\n      }\r\n    }\r\n  );\r\n  wrapper.appendChild(nextButton);\r\n\r\n  // Clear and update\r\n  paginationContainer.innerHTML = \"\";\r\n  paginationContainer.appendChild(wrapper);\r\n}\r\n\r\n/**\r\n * Create Previous/Next control button\r\n * @param {string} label - Button label\r\n * @param {boolean} enabled - Whether button is enabled\r\n * @param {Function} onClick - Click handler\r\n * @returns {HTMLElement}\r\n */\r\nfunction createControlButton(label, enabled, onClick) {\r\n  const button = document.createElement(\"div\");\r\n  button.className = \"aikb-pagination__control\";\r\n  if (!enabled) {\r\n    button.classList.add(\"aikb-pagination__control--disabled\");\r\n  }\r\n\r\n  const iconLabel = document.createElement(\"div\");\r\n  iconLabel.className = \"aikb-pagination__icon-label\";\r\n\r\n  if (label === \"Previous\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-left\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  const text = document.createElement(\"span\");\r\n  text.className = \"aikb-pagination__text\";\r\n  text.textContent = label;\r\n  iconLabel.appendChild(text);\r\n\r\n  if (label === \"Next\") {\r\n    const icon = document.createElement(\"span\");\r\n    icon.className = \"fal fa-chevron-right\";\r\n    icon.setAttribute(\"aria-hidden\", \"true\");\r\n    iconLabel.appendChild(icon);\r\n  }\r\n\r\n  button.appendChild(iconLabel);\r\n\r\n  if (enabled) {\r\n    button.addEventListener(\"click\", onClick);\r\n    button.style.cursor = \"pointer\";\r\n  }\r\n\r\n  return button;\r\n}\r\n\r\n/**\r\n * Create page number buttons\r\n * @param {number} totalPages - Total number of pages\r\n * @returns {HTMLElement}\r\n */\r\nfunction createPageNumbers(totalPages) {\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"aikb-pagination__pages\";\r\n\r\n  const pages = calculatePageRange(currentPage, totalPages);\r\n\r\n  pages.forEach((page) => {\r\n    if (page === \"...\") {\r\n      const ellipsis = document.createElement(\"span\");\r\n      ellipsis.className = \"aikb-pagination__ellipsis\";\r\n      ellipsis.textContent = \"...\";\r\n      container.appendChild(ellipsis);\r\n    } else {\r\n      const pageButton = document.createElement(\"div\");\r\n      pageButton.className = \"aikb-pagination__page-number\";\r\n\r\n      if (page === currentPage) {\r\n        pageButton.classList.add(\"aikb-pagination__page-number--active\");\r\n      }\r\n\r\n      const pageText = document.createElement(\"span\");\r\n      pageText.textContent = page;\r\n      pageButton.appendChild(pageText);\r\n\r\n      pageButton.addEventListener(\"click\", () => goToPage(page));\r\n      pageButton.style.cursor = \"pointer\";\r\n\r\n      container.appendChild(pageButton);\r\n    }\r\n  });\r\n\r\n  return container;\r\n}\r\n\r\n/**\r\n * Calculate which page numbers to display\r\n * @param {number} current - Current page\r\n * @param {number} total - Total pages\r\n * @returns {Array} - Array of page numbers and ellipsis\r\n */\r\nfunction calculatePageRange(current, total) {\r\n  if (total <= 7) {\r\n    // Show all pages if 7 or fewer\r\n    return Array.from({ length: total }, (_, i) => i + 1);\r\n  }\r\n\r\n  const pages = [];\r\n\r\n  // Always show first page\r\n  pages.push(1);\r\n\r\n  if (current > 3) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Show pages around current\r\n  const start = Math.max(2, current - 1);\r\n  const end = Math.min(total - 1, current + 1);\r\n\r\n  for (let i = start; i <= end; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  if (current < total - 2) {\r\n    pages.push(\"...\");\r\n  }\r\n\r\n  // Always show last page\r\n  pages.push(total);\r\n\r\n  return pages;\r\n}\r\n\r\n/**\r\n * Navigate to specific page\r\n * @param {number} page - Page number to navigate to\r\n */\r\nfunction goToPage(page) {\r\n  const totalPages = getTotalPages();\r\n\r\n  if (page < 1 || page > totalPages || page === currentPage) {\r\n    return;\r\n  }\r\n\r\n  currentPage = page;\r\n\r\n  // Re-render pagination controls\r\n  renderPaginationControls();\r\n\r\n  // Trigger custom event for page change\r\n  const event = new CustomEvent(\"aikb-pagination-change\", {\r\n    detail: {\r\n      page: currentPage,\r\n      results: getCurrentPageResults(),\r\n    },\r\n  });\r\n  document.dispatchEvent(event);\r\n\r\n  // Scroll to top of results\r\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\r\n  if (searchResultsContainer) {\r\n    const offset = 100; // Offset for fixed header\r\n    const top =\r\n      searchResultsContainer.getBoundingClientRect().top +\r\n      window.pageYOffset -\r\n      offset;\r\n    window.scrollTo({ top, behavior: \"smooth\" });\r\n  }\r\n}\r\n\r\n/**\r\n * Update pagination with new results\r\n * @param {Array} results - New results array\r\n */\r\nexport function updatePagination(results) {\r\n  allResults = results;\r\n  totalItems = results.length;\r\n  currentPage = 1; // Reset to first page\r\n\r\n  renderPaginationControls();\r\n}\r\n", "// Search card template generator for AI Knowledge Base results\r\n\r\n/**\r\n * Parse date string and extract \"Month YYYY\" format\r\n * @param {string} dateStr - Raw date string (e.g., \"December 2025\")\r\n * @returns {string} Formatted date or original string if parsing fails\r\n */\r\nfunction formatDate(dateStr) {\r\n  if (!dateStr) return \"\";\r\n\r\n  // If already in \"Month YYYY\" format, return as-is\r\n  const monthYearPattern = /^[A-Z][a-z]+ \\d{4}$/;\r\n  if (monthYearPattern.test(dateStr)) {\r\n    return dateStr;\r\n  }\r\n\r\n  // Try to parse as Date object\r\n  try {\r\n    const date = new Date(dateStr);\r\n    if (!isNaN(date.getTime())) {\r\n      const months = [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\",\r\n      ];\r\n      return `${months[date.getMonth()]} ${date.getFullYear()}`;\r\n    }\r\n  } catch (e) {\r\n    // Fall through to return original\r\n  }\r\n\r\n  return dateStr;\r\n}\r\n\r\n/**\r\n * Create a search result card DOM element\r\n * @param {Object} result - Result data object\r\n * @param {string} result.title - Card title\r\n * @param {string} result.summary - Card summary/description\r\n * @param {Object} result.listMetadata - Metadata object\r\n * @param {Array<string>} result.listMetadata[\"Work area\"] - Array of work area tags\r\n * @param {Array<string>} result.listMetadata[\"Roles\"] - Array of roles for \"Good for\"\r\n * @param {string} result.date - Submission date\r\n * @param {string} result.liveUrl - URL for \"See more\" button\r\n * @param {string} result.submittedBy - Person who submitted\r\n * @returns {HTMLElement|null} Card element or null if required fields missing\r\n */\r\nfunction createSearchCard(result) {\r\n  // Validate required fields\r\n  if (!result.title || !result.summary || !result.liveUrl) {\r\n    console.warn(\"Skipping card with missing required fields:\", result);\r\n    return null;\r\n  }\r\n\r\n  // Create card container\r\n  const card = document.createElement(\"div\");\r\n  card.className = \"aikb-search-card\";\r\n\r\n  // Add data attributes for sorting\r\n  // Relevance: use rank (lower is better) or score (higher is better), default to 0\r\n  const relevance = result.rank ? -result.rank : result.score || 0;\r\n  card.setAttribute(\"data-sort-relevance\", relevance);\r\n\r\n  // Title: store for alphabetical sorting\r\n  card.setAttribute(\"data-sort-title\", result.title);\r\n\r\n  // Date: store timestamp for date sorting\r\n  const dateTimestamp = result.dateTimestamp || 0;\r\n  card.setAttribute(\"data-sort-date\", dateTimestamp);\r\n\r\n  // Create inner wrapper\r\n  const inner = document.createElement(\"div\");\r\n  inner.className = \"aikb-search-card__inner\";\r\n\r\n  // Create content section\r\n  const content = document.createElement(\"div\");\r\n  content.className = \"aikb-search-card__content\";\r\n\r\n  // Text section\r\n  const textSection = document.createElement(\"div\");\r\n  textSection.className = \"aikb-search-card__text\";\r\n\r\n  // Title\r\n  const title = document.createElement(\"h3\");\r\n  title.className = \"aikb-search-card__title\";\r\n  title.textContent = result.title;\r\n  textSection.appendChild(title);\r\n\r\n  // Summary\r\n  const summary = document.createElement(\"p\");\r\n  summary.className = \"aikb-search-card__summary\";\r\n  summary.textContent = result.summary;\r\n  textSection.appendChild(summary);\r\n\r\n  content.appendChild(textSection);\r\n\r\n  // Tags section (work areas from JSON payload)\r\n  const workAreas =\r\n    result.listMetadata && result.listMetadata[\"Work area\"]\r\n      ? result.listMetadata[\"Work area\"]\r\n      : [];\r\n  if (workAreas && workAreas.length > 0) {\r\n    const tagsContainer = document.createElement(\"div\");\r\n    tagsContainer.className = \"aikb-search-card__tags\";\r\n\r\n    // Create a tag for each work area\r\n    workAreas.forEach((workArea) => {\r\n      if (workArea && workArea.trim()) {\r\n        const tag = document.createElement(\"div\");\r\n        tag.className = \"aikb-search-card__tag\";\r\n        tag.textContent = workArea.trim();\r\n        tagsContainer.appendChild(tag);\r\n      }\r\n    });\r\n\r\n    if (tagsContainer.children.length > 0) {\r\n      content.appendChild(tagsContainer);\r\n    }\r\n  }\r\n\r\n  inner.appendChild(content);\r\n\r\n  // Actions section\r\n  const actions = document.createElement(\"div\");\r\n  actions.className = \"aikb-search-card__actions\";\r\n\r\n  // \"See more\" button\r\n  const button = document.createElement(\"a\");\r\n  button.href = result.liveUrl;\r\n  button.className = \"ntgc-btn ntgc-btn--secondary\";\r\n\r\n  const buttonText = document.createElement(\"span\");\r\n  buttonText.textContent = \"See more\";\r\n  button.appendChild(buttonText);\r\n\r\n  const icon = document.createElement(\"span\");\r\n  icon.className = \"fal fa-long-arrow-right\";\r\n  icon.setAttribute(\"aria-hidden\", \"true\");\r\n  button.appendChild(icon);\r\n\r\n  actions.appendChild(button);\r\n\r\n  // Metadata section\r\n  const metadata = document.createElement(\"div\");\r\n  metadata.className = \"aikb-search-card__metadata\";\r\n\r\n  // \"Good for\" row (roles from JSON payload)\r\n  const roles =\r\n    result.listMetadata && result.listMetadata[\"Roles\"]\r\n      ? result.listMetadata[\"Roles\"]\r\n      : [];\r\n  if (roles && roles.length > 0) {\r\n    const usefulRow = document.createElement(\"div\");\r\n    usefulRow.className = \"aikb-search-card__useful-for\";\r\n\r\n    const value = document.createElement(\"span\");\r\n    value.className = \"aikb-search-card__useful-value\";\r\n\r\n    const label = document.createElement(\"strong\");\r\n    label.textContent = \"Good for: \";\r\n    value.appendChild(label);\r\n\r\n    const text = document.createTextNode(roles.join(\", \"));\r\n    value.appendChild(text);\r\n\r\n    usefulRow.appendChild(value);\r\n\r\n    metadata.appendChild(usefulRow);\r\n  }\r\n\r\n  // Last updated date\r\n  if (result.date) {\r\n    const dateEl = document.createElement(\"div\");\r\n    dateEl.className = \"aikb-search-card__date\";\r\n    dateEl.textContent = `Last updated: ${formatDate(result.date)}`;\r\n    metadata.appendChild(dateEl);\r\n  }\r\n\r\n  actions.appendChild(metadata);\r\n  inner.appendChild(actions);\r\n\r\n  card.appendChild(inner);\r\n\r\n  return card;\r\n}\r\n\r\n/**\r\n * Render search results to the container\r\n * @param {Array<Object>} results - Array of result objects\r\n * @param {string} containerId - ID of the container element (default: \"search-results-list\")\r\n * @param {boolean} usePagination - Whether to use pagination (default: true)\r\n */\r\nexport function renderResults(\r\n  results,\r\n  containerId = \"search-results-list\",\r\n  usePagination = true,\r\n) {\r\n  console.log(\r\n    `renderResults called with ${results.length} results for container #${containerId}`,\r\n  );\r\n\r\n  // Try multiple selection methods\r\n  let container = document.getElementById(containerId);\r\n  console.log(`document.getElementById(\"${containerId}\"):`, container);\r\n\r\n  if (!container) {\r\n    // Try jQuery selector as fallback\r\n    const $container = window.$ ? window.$(`#${containerId}`) : null;\r\n    console.log(`jQuery selector $(\"#${containerId}\"):`, $container);\r\n    container = $container && $container.length > 0 ? $container[0] : null;\r\n  }\r\n\r\n  if (!container) {\r\n    console.error(`Container #${containerId} not found`);\r\n    console.log(\r\n      \"Available elements with id:\",\r\n      Array.from(document.querySelectorAll(\"[id]\")).map((el) => el.id),\r\n    );\r\n    return;\r\n  }\r\n\r\n  // Clear existing content\r\n  container.innerHTML = \"\";\r\n\r\n  if (results.length === 0) {\r\n    const noResults = document.createElement(\"p\");\r\n    noResults.textContent = \"No results found.\";\r\n    noResults.style.padding = \"24px 48px\";\r\n    container.appendChild(noResults);\r\n    return;\r\n  }\r\n\r\n  // Initialize or update pagination\r\n  if (usePagination) {\r\n    // Dynamic import to avoid circular dependencies\r\n    import(\"./pagination.js\").then(\r\n      ({ initializePagination, getCurrentPageResults }) => {\r\n        initializePagination(results, 10);\r\n        const pageResults = getCurrentPageResults();\r\n\r\n        // Render cards for current page\r\n        const cards = pageResults\r\n          .map((result) => createSearchCard(result))\r\n          .filter((card) => card !== null);\r\n\r\n        cards.forEach((card) => container.appendChild(card));\r\n        console.log(\r\n          `Rendered ${cards.length} of ${results.length} search result cards (page 1)`,\r\n        );\r\n      },\r\n    );\r\n  } else {\r\n    // Render all cards without pagination\r\n    const cards = results\r\n      .map((result) => createSearchCard(result))\r\n      .filter((card) => card !== null);\r\n\r\n    cards.forEach((card) => container.appendChild(card));\r\n    console.log(`Rendered ${cards.length} search result cards`);\r\n  }\r\n}\r\n\r\n// Expose globally for legacy usage\r\nwindow.aikbRenderResults = renderResults;\r\n\r\n// Track if pagination listener has been added to prevent duplicates\r\nlet paginationListenerAdded = false;\r\n\r\n// Listen for pagination page changes\r\nif (!paginationListenerAdded) {\r\n  document.addEventListener(\"aikb-pagination-change\", (event) => {\r\n    const { results } = event.detail;\r\n    const container = document.getElementById(\"search-results-list\");\r\n\r\n    if (container && results) {\r\n      container.innerHTML = \"\";\r\n\r\n      const cards = results\r\n        .map((result) => createSearchCard(result))\r\n        .filter((card) => card !== null);\r\n\r\n      cards.forEach((card) => container.appendChild(card));\r\n      console.log(\r\n        `Rendered ${cards.length} cards for page ${event.detail.page}`,\r\n      );\r\n    }\r\n  });\r\n  paginationListenerAdded = true;\r\n}\r\n", "/**\r\n * Custom Multi-Select Dropdown Component\r\n * Replaces the work area filter with a multi-select dropdown with OK/Cancel buttons\r\n *\r\n * Performance Optimization:\r\n * Uses event delegation for checkbox listeners to reduce memory footprint.\r\n * Instead of attaching O(N) individual listeners (2 per checkbox where N = number of options),\r\n * this implementation uses a single delegated listener on the dropdown panel.\r\n * For a typical dropdown with 10 options, this reduces 20+ listeners to just 5 total,\r\n * significantly improving performance and preventing memory leaks during dropdown recreation cycles.\r\n */\r\n\r\nexport class MultiSelectDropdown {\r\n  constructor(selectElement) {\r\n    this.selectElement = selectElement;\r\n    this.options = [];\r\n    this.selectedValues = new Set();\r\n    this.tempSelectedValues = new Set();\r\n    this.isOpen = false;\r\n\r\n    this.container = null;\r\n    this.displayButton = null;\r\n    this.dropdownPanel = null;\r\n\r\n    // Store bound event handlers for proper cleanup\r\n    this._boundHandlers = {};\r\n\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    // Hide original select element\r\n    this.selectElement.style.display = \"none\";\r\n\r\n    // Create custom dropdown structure\r\n    this.createDropdownStructure();\r\n\r\n    // Select all options by default\r\n    this.selectAllByDefault();\r\n\r\n    // Bind event listeners\r\n    this.bindEvents();\r\n\r\n    // Store instance reference on container for external access\r\n    this.container.__multiSelectInstance = this;\r\n  }\r\n\r\n  selectAllByDefault() {\r\n    // Add all enabled option values to selectedValues\r\n    this.options.forEach((option) => {\r\n      // Check if the corresponding native select option is enabled\r\n      const nativeOption = Array.from(this.selectElement.options).find(\r\n        (opt) => opt.value === option.value,\r\n      );\r\n      if (nativeOption && !nativeOption.disabled) {\r\n        this.selectedValues.add(option.value);\r\n      }\r\n    });\r\n\r\n    // Sync with native select\r\n    this.syncNativeSelect();\r\n\r\n    // Update display text\r\n    this.updateDisplayText();\r\n\r\n    // Update checkboxes\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n  }\r\n\r\n  createDropdownStructure() {\r\n    // Main container\r\n    this.container = document.createElement(\"div\");\r\n    this.container.className = \"aikb-multiselect-container\";\r\n\r\n    // Display button (shows selected items)\r\n    this.displayButton = document.createElement(\"button\");\r\n    this.displayButton.type = \"button\";\r\n    this.displayButton.className = \"aikb-multiselect-button\";\r\n    this.displayButton.innerHTML = `\r\n      <span class=\"aikb-multiselect-text\">Select Options</span>\r\n      <span class=\"aikb-multiselect-icon\"></span>\r\n    `;\r\n\r\n    // Dropdown panel\r\n    this.dropdownPanel = document.createElement(\"div\");\r\n    this.dropdownPanel.className = \"aikb-multiselect-panel\";\r\n    this.dropdownPanel.style.display = \"none\";\r\n\r\n    // Options list\r\n    const optionsList = document.createElement(\"div\");\r\n    optionsList.className = \"aikb-multiselect-options\";\r\n\r\n    // Add \"Select All\" option\r\n    const selectAllItem = this.createOptionItem({\r\n      value: \"_select_all\",\r\n      label: \"Select All\",\r\n      isSelectAll: true,\r\n    });\r\n    optionsList.appendChild(selectAllItem);\r\n\r\n    // Get options from original select element\r\n    Array.from(this.selectElement.options).forEach((option) => {\r\n      if (!option.disabled && option.value) {\r\n        this.options.push({\r\n          value: option.value,\r\n          label: option.textContent,\r\n        });\r\n\r\n        const optionItem = this.createOptionItem({\r\n          value: option.value,\r\n          label: option.textContent,\r\n        });\r\n        optionsList.appendChild(optionItem);\r\n      }\r\n    });\r\n\r\n    // Action buttons\r\n    const actionsContainer = document.createElement(\"div\");\r\n    actionsContainer.className = \"aikb-multiselect-actions\";\r\n\r\n    const okButton = document.createElement(\"button\");\r\n    okButton.type = \"button\";\r\n    okButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-ok\";\r\n    okButton.textContent = \"OK\";\r\n    this._boundHandlers.okClick = () => this.handleOk();\r\n    okButton.addEventListener(\"click\", this._boundHandlers.okClick);\r\n\r\n    const cancelButton = document.createElement(\"button\");\r\n    cancelButton.type = \"button\";\r\n    cancelButton.className = \"aikb-multiselect-btn aikb-multiselect-btn-cancel\";\r\n    cancelButton.textContent = \"Cancel\";\r\n    this._boundHandlers.cancelClick = () => this.handleCancel();\r\n    cancelButton.addEventListener(\"click\", this._boundHandlers.cancelClick);\r\n\r\n    actionsContainer.appendChild(okButton);\r\n    actionsContainer.appendChild(cancelButton);\r\n\r\n    // Assemble dropdown panel\r\n    this.dropdownPanel.appendChild(optionsList);\r\n    this.dropdownPanel.appendChild(actionsContainer);\r\n\r\n    // Setup event delegation for checkboxes\r\n    this._boundHandlers.checkboxChange = (e) => {\r\n      // Only process checkbox elements\r\n      if (!e.target.classList.contains(\"aikb-multiselect-checkbox\")) {\r\n        return;\r\n      }\r\n\r\n      if (e.target.value === \"_select_all\") {\r\n        this.handleSelectAll(e);\r\n      } else {\r\n        this.updateSelectAllState();\r\n      }\r\n    };\r\n    this.dropdownPanel.addEventListener(\r\n      \"change\",\r\n      this._boundHandlers.checkboxChange,\r\n    );\r\n\r\n    // Assemble container\r\n    this.container.appendChild(this.displayButton);\r\n    this.container.appendChild(this.dropdownPanel);\r\n\r\n    // Insert after original select\r\n    this.selectElement.parentNode.insertBefore(\r\n      this.container,\r\n      this.selectElement.nextSibling,\r\n    );\r\n  }\r\n\r\n  createOptionItem(option) {\r\n    const item = document.createElement(\"label\");\r\n    item.className = \"aikb-multiselect-option\";\r\n    if (option.isSelectAll) {\r\n      item.classList.add(\"aikb-multiselect-option-all\");\r\n    }\r\n\r\n    const checkbox = document.createElement(\"input\");\r\n    checkbox.type = \"checkbox\";\r\n    checkbox.className = \"aikb-multiselect-checkbox\";\r\n    checkbox.value = option.value;\r\n    checkbox.dataset.label = option.label;\r\n\r\n    // Event listeners handled by delegation in dropdownPanel\r\n\r\n    const labelText = document.createElement(\"span\");\r\n    labelText.className = \"aikb-multiselect-label\";\r\n    labelText.textContent = option.label;\r\n\r\n    item.appendChild(checkbox);\r\n    item.appendChild(labelText);\r\n\r\n    return item;\r\n  }\r\n\r\n  bindEvents() {\r\n    // Toggle dropdown on button click\r\n    this._boundHandlers.displayClick = (e) => {\r\n      e.stopPropagation();\r\n      this.toggle();\r\n    };\r\n    this.displayButton.addEventListener(\r\n      \"click\",\r\n      this._boundHandlers.displayClick,\r\n    );\r\n\r\n    // Close dropdown when clicking outside\r\n    this._boundHandlers.documentClick = (e) => {\r\n      if (this.container && !this.container.contains(e.target) && this.isOpen) {\r\n        this.handleCancel();\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", this._boundHandlers.documentClick);\r\n  }\r\n\r\n  toggle() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): toggle\");\r\n      return;\r\n    }\r\n    if (this.isOpen) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  }\r\n\r\n  open() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): open\");\r\n      return;\r\n    }\r\n    this.isOpen = true;\r\n    this.dropdownPanel.style.display = \"block\";\r\n    this.displayButton.classList.add(\"aikb-multiselect-open\");\r\n\r\n    // Copy current selections to temp\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n\r\n    // Update checkboxes to match temp selections\r\n    this.updateCheckboxes();\r\n  }\r\n\r\n  close() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): close\");\r\n      return;\r\n    }\r\n    this.isOpen = false;\r\n    this.dropdownPanel.style.display = \"none\";\r\n    this.displayButton.classList.remove(\"aikb-multiselect-open\");\r\n  }\r\n\r\n  handleOk() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): handleOk\");\r\n      return;\r\n    }\r\n    // Get checked values\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n    this.selectedValues.clear();\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      if (checkbox.checked) {\r\n        this.selectedValues.add(checkbox.value);\r\n      }\r\n    });\r\n\r\n    // Sync the hidden native select so downstream code sees selectedOptions\r\n    this.syncNativeSelect();\r\n\r\n    // Update display text\r\n    this.updateDisplayText();\r\n\r\n    // Trigger change event\r\n    this.triggerChange();\r\n\r\n    // Close dropdown\r\n    this.close();\r\n  }\r\n\r\n  handleCancel() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): handleCancel\");\r\n      return;\r\n    }\r\n    // Revert to previous selections\r\n    this.tempSelectedValues = new Set(this.selectedValues);\r\n    this.updateCheckboxes();\r\n\r\n    // Close dropdown\r\n    this.close();\r\n  }\r\n\r\n  handleSelectAll(e) {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\r\n        \"MultiSelect method called after destroy(): handleSelectAll\",\r\n      );\r\n      return;\r\n    }\r\n    const isChecked = e.target.checked;\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      // Skip disabled checkboxes\r\n      if (!checkbox.disabled) {\r\n        checkbox.checked = isChecked;\r\n      }\r\n    });\r\n  }\r\n\r\n  updateSelectAllState() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\r\n        \"MultiSelect method called after destroy(): updateSelectAllState\",\r\n      );\r\n      return;\r\n    }\r\n    const selectAllCheckbox = this.dropdownPanel.querySelector(\r\n      '.aikb-multiselect-checkbox[value=\"_select_all\"]',\r\n    );\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n    // Only count enabled checkboxes\r\n    const enabledCheckboxes = Array.from(checkboxes).filter(\r\n      (cb) => !cb.disabled,\r\n    );\r\n    const checkedCount = enabledCheckboxes.filter((cb) => cb.checked).length;\r\n\r\n    if (selectAllCheckbox) {\r\n      selectAllCheckbox.checked =\r\n        enabledCheckboxes.length > 0 &&\r\n        checkedCount === enabledCheckboxes.length;\r\n      selectAllCheckbox.indeterminate =\r\n        checkedCount > 0 && checkedCount < enabledCheckboxes.length;\r\n    }\r\n  }\r\n\r\n  updateCheckboxes() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\r\n        \"MultiSelect method called after destroy(): updateCheckboxes\",\r\n      );\r\n      return;\r\n    }\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      checkbox.checked = this.tempSelectedValues.has(checkbox.value);\r\n    });\r\n\r\n    this.updateSelectAllState();\r\n  }\r\n\r\n  updateDisplayText() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\r\n        \"MultiSelect method called after destroy(): updateDisplayText\",\r\n      );\r\n      return;\r\n    }\r\n    const textElement = this.displayButton.querySelector(\r\n      \".aikb-multiselect-text\",\r\n    );\r\n\r\n    if (this.selectedValues.size === 0) {\r\n      textElement.textContent = \"Select Options\";\r\n      textElement.classList.remove(\"aikb-multiselect-has-selection\");\r\n    } else if (this.selectedValues.size === this.options.length) {\r\n      textElement.textContent = \"All selected\";\r\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\r\n    } else if (this.selectedValues.size === 1) {\r\n      // Show the label when only 1 item is selected\r\n      const selectedLabels = Array.from(this.selectedValues).map((value) => {\r\n        const option = this.options.find((opt) => opt.value === value);\r\n        return option ? option.label : value;\r\n      });\r\n      textElement.textContent = selectedLabels[0];\r\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\r\n    } else {\r\n      // Show \"# selected\" when more than 1 item is selected\r\n      textElement.textContent = `${this.selectedValues.size} selected`;\r\n      textElement.classList.add(\"aikb-multiselect-has-selection\");\r\n    }\r\n  }\r\n\r\n  triggerChange() {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): triggerChange\");\r\n      return;\r\n    }\r\n    // Dispatch custom event\r\n    const event = new CustomEvent(\"multiselect-change\", {\r\n      detail: {\r\n        values: Array.from(this.selectedValues),\r\n      },\r\n    });\r\n    this.container.dispatchEvent(event);\r\n\r\n    // Also emit a native change event on the original select so listeners fire\r\n    if (this.selectElement) {\r\n      const changeEvent = new Event(\"change\", { bubbles: true });\r\n      this.selectElement.dispatchEvent(changeEvent);\r\n    }\r\n\r\n    console.log(\"Multi-select changed:\", Array.from(this.selectedValues));\r\n  }\r\n\r\n  syncNativeSelect() {\r\n    if (!this.selectElement) return;\r\n\r\n    // Clear existing selection\r\n    Array.from(this.selectElement.options).forEach((opt) => {\r\n      opt.selected = false;\r\n    });\r\n\r\n    // Apply new selections\r\n    Array.from(this.selectElement.options).forEach((opt) => {\r\n      if (this.selectedValues.has(opt.value)) {\r\n        opt.selected = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  getSelectedValues() {\r\n    return Array.from(this.selectedValues);\r\n  }\r\n\r\n  reset() {\r\n    this.selectedValues.clear();\r\n    this.tempSelectedValues.clear();\r\n    this.updateDisplayText();\r\n    this.updateCheckboxes();\r\n  }\r\n\r\n  /**\r\n   * Update option labels with counts\r\n   * @param {Map<string, number>} countsMap - Map of option values to counts\r\n   */\r\n  updateCounts(countsMap) {\r\n    if (!this.container || !this.dropdownPanel) {\r\n      console.warn(\"MultiSelect method called after destroy(): updateCounts\");\r\n      return;\r\n    }\r\n    // Update native select options\r\n    Array.from(this.selectElement.options).forEach((option) => {\r\n      if (option.value && countsMap.has(option.value)) {\r\n        const count = countsMap.get(option.value);\r\n        const baseLabel = option.textContent.replace(/\\s*\\(\\d+\\)\\s*$/, \"\"); // Remove existing count\r\n\r\n        if (count > 0) {\r\n          option.textContent = `${baseLabel} (${count})`;\r\n          option.disabled = false;\r\n        } else {\r\n          option.textContent = baseLabel;\r\n          option.disabled = true;\r\n          option.selected = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Update custom dropdown labels\r\n    const checkboxes = this.dropdownPanel.querySelectorAll(\r\n      '.aikb-multiselect-checkbox:not([value=\"_select_all\"])',\r\n    );\r\n\r\n    checkboxes.forEach((checkbox) => {\r\n      const value = checkbox.value;\r\n      if (countsMap.has(value)) {\r\n        const count = countsMap.get(value);\r\n        const optionItem = checkbox.parentElement;\r\n        const labelSpan = optionItem.querySelector(\".aikb-multiselect-label\");\r\n\r\n        if (labelSpan) {\r\n          // Remove existing badge or count text\r\n          const existingBadge = labelSpan.querySelector(\".aikb-count-badge\");\r\n          if (existingBadge) {\r\n            existingBadge.remove();\r\n          }\r\n\r\n          // Get base label text without count\r\n          let baseLabel = labelSpan.textContent\r\n            .replace(/\\s*\\(\\d+\\)\\s*$/, \"\")\r\n            .trim();\r\n\r\n          // Clear and rebuild label content\r\n          labelSpan.textContent = baseLabel;\r\n\r\n          // Add count badge (always show, even for 0)\r\n          const badge = document.createElement(\"span\");\r\n          badge.className = \"aikb-count-badge\";\r\n          badge.textContent = count.toString();\r\n          labelSpan.appendChild(badge);\r\n\r\n          // Disable checkbox and add disabled class if count is 0\r\n          if (count === 0) {\r\n            checkbox.disabled = true;\r\n            checkbox.checked = false;\r\n            optionItem.classList.add(\"aikb-multiselect-option-disabled\");\r\n\r\n            // Remove from selectedValues if it was selected\r\n            this.selectedValues.delete(value);\r\n            this.tempSelectedValues.delete(value);\r\n\r\n            // Update option in this.options array with count\r\n            const optionIndex = this.options.findIndex(\r\n              (opt) => opt.value === value,\r\n            );\r\n            if (optionIndex !== -1) {\r\n              this.options[optionIndex].label = `${baseLabel} (${count})`;\r\n            }\r\n          } else {\r\n            // Enable checkbox and remove disabled class if count > 0\r\n            checkbox.disabled = false;\r\n            optionItem.classList.remove(\"aikb-multiselect-option-disabled\");\r\n\r\n            // Update option in this.options array for display text calculation\r\n            const optionIndex = this.options.findIndex(\r\n              (opt) => opt.value === value,\r\n            );\r\n            if (optionIndex !== -1) {\r\n              this.options[optionIndex].label = `${baseLabel} (${count})`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // Sync native select to match selectedValues after removing 0-count options\r\n    this.syncNativeSelect();\r\n\r\n    // Update display text to reflect new labels\r\n    this.updateDisplayText();\r\n\r\n    console.log(\"Multi-select counts updated\");\r\n  }\r\n\r\n  destroy() {\r\n    // Remove all event listeners to prevent memory leaks\r\n    if (this._boundHandlers) {\r\n      // Remove document-level listener (critical to prevent null reference errors)\r\n      if (this._boundHandlers.documentClick) {\r\n        document.removeEventListener(\r\n          \"click\",\r\n          this._boundHandlers.documentClick,\r\n        );\r\n      }\r\n\r\n      // Remove display button listener\r\n      if (this.displayButton && this._boundHandlers.displayClick) {\r\n        this.displayButton.removeEventListener(\r\n          \"click\",\r\n          this._boundHandlers.displayClick,\r\n        );\r\n      }\r\n\r\n      // Remove delegated checkbox listener\r\n      if (this.dropdownPanel && this._boundHandlers.checkboxChange) {\r\n        this.dropdownPanel.removeEventListener(\r\n          \"change\",\r\n          this._boundHandlers.checkboxChange,\r\n        );\r\n      }\r\n\r\n      // OK/Cancel button listeners are removed when container is removed from DOM\r\n      // but we clear the references for completeness\r\n    }\r\n\r\n    // Close dropdown if open\r\n    this.isOpen = false;\r\n\r\n    // Remove the custom dropdown container from DOM\r\n    if (this.container && this.container.parentNode) {\r\n      this.container.parentNode.removeChild(this.container);\r\n    }\r\n\r\n    // Show the original select element\r\n    if (this.selectElement) {\r\n      this.selectElement.style.display = \"\";\r\n    }\r\n\r\n    // Clear all references\r\n    this.container = null;\r\n    this.displayButton = null;\r\n    this.dropdownPanel = null;\r\n    this._boundHandlers = null;\r\n\r\n    console.log(\"Multi-select instance destroyed\");\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize multi-select dropdown on a select element\r\n * @param {string|HTMLElement} selector - CSS selector or DOM element\r\n * @returns {MultiSelectDropdown} - MultiSelectDropdown instance\r\n */\r\nexport function initMultiSelect(selector) {\r\n  const element =\r\n    typeof selector === \"string\" ? document.querySelector(selector) : selector;\r\n\r\n  if (!element) {\r\n    console.warn(\"Multi-select element not found:\", selector);\r\n    return null;\r\n  }\r\n\r\n  return new MultiSelectDropdown(element);\r\n}\r\n", "/**\r\n * Dynamically create the search input and icon to match the attached design\r\n */\r\nexport function populateSearchInput() {\r\n  const container = document.getElementById(\"search-container\");\r\n  if (!container) return;\r\n  container.innerHTML = \"\";\r\n\r\n  // Outer wrapper\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.style.width = \"100%\";\r\n  wrapper.style.height = \"100%\";\r\n  wrapper.style.padding = \"24px\";\r\n  wrapper.style.background = \"var(--clr-surface-primary, white)\";\r\n  wrapper.style.overflow = \"hidden\";\r\n  wrapper.style.outline = \"1px var(--clr-stroke-default, #AFB5BF) solid\";\r\n  wrapper.style.outlineOffset = \"-1px\";\r\n  wrapper.style.justifyContent = \"flex-start\";\r\n  wrapper.style.alignItems = \"center\";\r\n  wrapper.style.gap = \"10px\";\r\n  wrapper.style.display = \"inline-flex\";\r\n\r\n  // Inner flex\r\n  const inner = document.createElement(\"div\");\r\n  inner.style.flex = \"1 1 0\";\r\n  inner.style.justifyContent = \"space-between\";\r\n  inner.style.alignItems = \"center\";\r\n  inner.style.display = \"flex\";\r\n\r\n  // Placeholder text\r\n  const placeholder = document.createElement(\"div\");\r\n  placeholder.textContent = \"Search for a AI prompt or use case...\";\r\n  placeholder.style.color = \"var(--clr-text-helper, #606A80)\";\r\n  placeholder.style.fontSize = \"16px\";\r\n  placeholder.style.fontFamily = \"Roboto\";\r\n  placeholder.style.fontWeight = \"400\";\r\n  placeholder.style.lineHeight = \"24px\";\r\n  placeholder.style.wordWrap = \"break-word\";\r\n\r\n  // Icon container\r\n  const iconContainer = document.createElement(\"div\");\r\n  iconContainer.setAttribute(\"data-colour\", \"NTGC blue\");\r\n  iconContainer.style.width = \"24px\";\r\n  iconContainer.style.height = \"24px\";\r\n  iconContainer.style.position = \"relative\";\r\n  iconContainer.style.overflow = \"hidden\";\r\n\r\n  // Icon (small colored div)\r\n  const icon = document.createElement(\"div\");\r\n  icon.style.width = \"20px\";\r\n  icon.style.height = \"20px\";\r\n  icon.style.left = \"2px\";\r\n  icon.style.top = \"2px\";\r\n  icon.style.position = \"absolute\";\r\n  icon.style.background = \"var(--clr-icon-subtle, #878F9F)\";\r\n\r\n  iconContainer.appendChild(icon);\r\n  inner.appendChild(placeholder);\r\n  inner.appendChild(iconContainer);\r\n  wrapper.appendChild(inner);\r\n  container.appendChild(wrapper);\r\n}\r\n// Dynamically populate work area and sort dropdowns from search data\r\nimport { initMultiSelect } from \"./multi-select-dropdown.js\";\r\n\r\nlet multiSelectInstance = null;\r\nlet staticWorkAreas = [];\r\n\r\n/**\r\n * Extract unique work areas from search results (used as fallback if static fetch fails)\r\n * @param {Array} results - Array of search result objects\r\n * @returns {Array<string>} - Sorted array of unique work area values\r\n */\r\nfunction extractWorkAreas(results) {\r\n  const workAreaSet = new Set();\r\n\r\n  results.forEach((result) => {\r\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\r\n      const workAreas = result.listMetadata[\"Work area\"];\r\n      // Work areas is already an array\r\n      if (Array.isArray(workAreas)) {\r\n        workAreas.forEach((area) => {\r\n          const trimmed = area.trim();\r\n          if (trimmed) {\r\n            workAreaSet.add(trimmed);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // Convert to array and sort alphabetically\r\n  return Array.from(workAreaSet).sort((a, b) => {\r\n    // Put \"All work areas\" first if it exists\r\n    if (a === \"All work areas\") return -1;\r\n    if (b === \"All work areas\") return 1;\r\n    return a.localeCompare(b);\r\n  });\r\n}\r\n\r\n/**\r\n * Calculate counts for each work area from search results\r\n * @param {Array<string>} workAreas - Array of work area names\r\n * @param {Array} results - Array of search result objects\r\n * @returns {Map<string, number>} Map of work area names to counts\r\n */\r\nexport function calculateWorkAreaCounts(workAreas, results) {\r\n  const counts = new Map();\r\n\r\n  // Initialize all work areas with 0 count\r\n  workAreas.forEach((workArea) => {\r\n    counts.set(workArea, 0);\r\n  });\r\n\r\n  // Count occurrences in results\r\n  results.forEach((result) => {\r\n    if (result.listMetadata && result.listMetadata[\"Work area\"]) {\r\n      const resultWorkAreas = result.listMetadata[\"Work area\"];\r\n      if (Array.isArray(resultWorkAreas)) {\r\n        resultWorkAreas.forEach((area) => {\r\n          const trimmed = area.trim();\r\n          if (trimmed && counts.has(trimmed)) {\r\n            counts.set(trimmed, counts.get(trimmed) + 1);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // Set count for \"All work areas\" to total results\r\n  if (counts.has(\"All work areas\")) {\r\n    counts.set(\"All work areas\", results.length);\r\n  }\r\n\r\n  return counts;\r\n}\r\n\r\n/**\r\n * Store static work areas list for later use\r\n * @param {Array<string>} workAreas - Array of work area names from static source\r\n */\r\nexport function setStaticWorkAreas(workAreas) {\r\n  staticWorkAreas = workAreas;\r\n  console.log(`Stored ${workAreas.length} static work areas`);\r\n}\r\n\r\n/**\r\n * Populate work area dropdown with dynamic options\r\n * @param {Array<string>} workAreas - Array of work area values\r\n */\r\nfunction populateWorkAreaDropdown(workAreas) {\r\n  const dropdown = document.getElementById(\"document_type\");\r\n  if (!dropdown) {\r\n    console.warn(\"Work area dropdown #document_type not found\");\r\n    return;\r\n  }\r\n\r\n  // Clear existing options\r\n  dropdown.innerHTML = \"\";\r\n\r\n  // Add default \"Select a work area\" option\r\n  const defaultOption = document.createElement(\"option\");\r\n  defaultOption.value = \"\";\r\n  defaultOption.textContent = \"Select a work area\";\r\n  defaultOption.disabled = true;\r\n  defaultOption.selected = true;\r\n  dropdown.appendChild(defaultOption);\r\n\r\n  // Add work area options\r\n  workAreas.forEach((workArea) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = workArea;\r\n    option.textContent = workArea;\r\n    dropdown.appendChild(option);\r\n  });\r\n\r\n  console.log(`Populated work area dropdown with ${workAreas.length} options`);\r\n\r\n  // Initialize multi-select after populating options\r\n  if (multiSelectInstance) {\r\n    // Destroy previous instance if exists\r\n    multiSelectInstance.destroy();\r\n    multiSelectInstance = null;\r\n  }\r\n\r\n  // Only initialize if not already initialized\r\n  if (\r\n    !dropdown.nextElementSibling ||\r\n    !dropdown.nextElementSibling.classList.contains(\r\n      \"aikb-multiselect-container\",\r\n    )\r\n  ) {\r\n    multiSelectInstance = initMultiSelect(dropdown);\r\n  }\r\n}\r\n\r\n/**\r\n * Populate sort dropdown with sort options\r\n */\r\nfunction populateSortDropdown() {\r\n  const container = document.getElementById(\"select-question-3\");\r\n  if (!container) {\r\n    console.warn(\"Sort dropdown container #select-question-3 not found\");\r\n    return;\r\n  }\r\n\r\n  // Check if dropdown already exists\r\n  let dropdown = document.getElementById(\"owner\");\r\n\r\n  // If dropdown doesn't exist, create the entire structure\r\n  if (!dropdown) {\r\n    // Clear container content (except label)\r\n    const label = container.querySelector(\"label\");\r\n    container.innerHTML = \"\";\r\n    if (label) {\r\n      container.appendChild(label);\r\n    } else {\r\n      // Create label if it doesn't exist\r\n      const newLabel = document.createElement(\"label\");\r\n      newLabel.className = \"ntgc-form-input--label\";\r\n      newLabel.setAttribute(\"for\", \"select-input-2\");\r\n      newLabel.textContent = \"Sort\";\r\n      container.appendChild(newLabel);\r\n    }\r\n\r\n    // Create dropdown wrapper\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.className = \"aikb-dropdown-wrapper\";\r\n\r\n    // Create inner wrapper\r\n    const inner = document.createElement(\"div\");\r\n    inner.className = \"aikb-dropdown-inner\";\r\n\r\n    // Create select element\r\n    dropdown = document.createElement(\"select\");\r\n    dropdown.name = \"sort\";\r\n    dropdown.className =\r\n      \"ntgc-select ntgc-select--block ntgc-select-input--filter\";\r\n    dropdown.id = \"owner\";\r\n\r\n    // Append elements\r\n    inner.appendChild(dropdown);\r\n    wrapper.appendChild(inner);\r\n    container.appendChild(wrapper);\r\n  } else {\r\n    // Clear existing options if dropdown exists\r\n    dropdown.innerHTML = \"\";\r\n  }\r\n\r\n  // Define sort options\r\n  const sortOptions = [\r\n    { value: \"relevance\", label: \"Relevance\", selected: true },\r\n    { value: \"date-newest\", label: \"Date (newest first)\" },\r\n    { value: \"date-oldest\", label: \"Date (oldest first)\" },\r\n    { value: \"title-az\", label: \"Title (A-Z)\" },\r\n    { value: \"title-za\", label: \"Title (Z-A)\" },\r\n  ];\r\n\r\n  // Add options to dropdown\r\n  sortOptions.forEach((opt) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = opt.value;\r\n    option.textContent = opt.label;\r\n    if (opt.selected) option.selected = true;\r\n    dropdown.appendChild(option);\r\n  });\r\n\r\n  console.log(`Populated sort dropdown with ${sortOptions.length} options`);\r\n}\r\n\r\n/**\r\n * Add chevron-down icons to dropdowns\r\n * Icons are displayed via CSS ::before pseudo-elements\r\n */\r\nfunction addDropdownIcons() {\r\n  // Add icon to work area dropdown\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  if (\r\n    workAreaDropdown &&\r\n    !workAreaDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\r\n  ) {\r\n    const icon = document.createElement(\"div\");\r\n    icon.className = \"aikb-dropdown-icon\";\r\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\r\n\r\n    const wrapper = workAreaDropdown.closest(\".aikb-dropdown-wrapper\");\r\n    if (wrapper) {\r\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\r\n      if (inner) {\r\n        inner.appendChild(icon);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add icon to sort dropdown\r\n  const sortDropdown = document.getElementById(\"owner\");\r\n  if (\r\n    sortDropdown &&\r\n    !sortDropdown.parentElement.querySelector(\".aikb-dropdown-icon\")\r\n  ) {\r\n    const icon = document.createElement(\"div\");\r\n    icon.className = \"aikb-dropdown-icon\";\r\n    icon.setAttribute(\"data-colour\", \"NTG Blue\");\r\n\r\n    const wrapper = sortDropdown.closest(\".aikb-dropdown-wrapper\");\r\n    if (wrapper) {\r\n      const inner = wrapper.querySelector(\".aikb-dropdown-inner\");\r\n      if (inner) {\r\n        inner.appendChild(icon);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize dropdowns with data from search results\r\n * @param {Array} results - Array of search result objects\r\n * @param {Array<string>} workAreasFromFetch - Optional pre-fetched work areas list\r\n */\r\nexport function initializeDropdowns(results, workAreasFromFetch = null) {\r\n  console.log(\"Initializing dropdowns with search data...\");\r\n\r\n  // Use static work areas if available, otherwise extract from results\r\n  let workAreas;\r\n  if (workAreasFromFetch && workAreasFromFetch.length > 0) {\r\n    workAreas = workAreasFromFetch;\r\n    console.log(\"Using pre-fetched static work areas list\");\r\n  } else if (staticWorkAreas.length > 0) {\r\n    workAreas = staticWorkAreas;\r\n    console.log(\"Using stored static work areas list\");\r\n  } else {\r\n    workAreas = extractWorkAreas(results);\r\n    console.log(\"Extracted work areas from results (fallback)\");\r\n  }\r\n\r\n  populateWorkAreaDropdown(workAreas);\r\n\r\n  // Calculate and apply counts\r\n  const counts = calculateWorkAreaCounts(workAreas, results);\r\n  if (multiSelectInstance) {\r\n    multiSelectInstance.updateCounts(counts);\r\n  }\r\n\r\n  // Populate sort options\r\n  populateSortDropdown();\r\n\r\n  // Add chevron icons\r\n  addDropdownIcons();\r\n\r\n  console.log(\"Dropdowns initialized successfully\");\r\n}\r\n\r\n/**\r\n * Get the current multi-select instance\r\n * @returns {object|null} The multi-select instance or null\r\n */\r\nexport function getMultiSelectInstance() {\r\n  return multiSelectInstance;\r\n}\r\n\r\n/**\r\n * Initialize on page load with empty state\r\n */\r\nexport function initializeEmptyDropdowns() {\r\n  console.log(\"Initializing dropdowns with default state...\");\r\n\r\n  // Dynamically create the search input and icon\r\n  populateSearchInput();\r\n\r\n  // Populate sort options (not data-dependent)\r\n  populateSortDropdown();\r\n\r\n  // Add default \"Select a work area\" to work area dropdown\r\n  populateWorkAreaDropdown([]);\r\n\r\n  // Add chevron icons\r\n  addDropdownIcons();\r\n\r\n  console.log(\"Empty dropdowns initialized\");\r\n}\r\n", "/**\r\n * Applied Filters Display Module\r\n * Manages the display and interaction of applied filter pills\r\n */\r\n\r\n/**\r\n * Display applied filters as pills\r\n * @param {Object} filters - Object containing active filters\r\n */\r\nexport function displayAppliedFilters(filters) {\r\n  const section = document.getElementById(\"appliedFiltersSection\");\r\n  const container = document.getElementById(\"appliedFilters\");\r\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\r\n\r\n  if (!section || !container) {\r\n    console.warn(\"Applied filters section not found\");\r\n    return;\r\n  }\r\n\r\n  // Clear existing pills\r\n  container.innerHTML = \"\";\r\n\r\n  let hasFilters = false;\r\n\r\n  // Add search query pill (green)\r\n  if (filters.searchQuery && filters.searchQuery.trim()) {\r\n    hasFilters = true;\r\n    const pill = createFilterPill(\r\n      \"Search\",\r\n      filters.searchQuery,\r\n      \"bg-success\",\r\n      \"search\"\r\n    );\r\n    container.appendChild(pill);\r\n  }\r\n\r\n  // Add work area pills (primary blue)\r\n  if (filters.workAreas && filters.workAreas.length > 0) {\r\n    // Don't show pills if all work areas are selected\r\n    const allWorkAreasSelected = isAllWorkAreasSelected(filters.workAreas);\r\n\r\n    if (!allWorkAreasSelected) {\r\n      hasFilters = true;\r\n      filters.workAreas.forEach((workArea) => {\r\n        const pill = createFilterPill(\r\n          \"Work area\",\r\n          workArea,\r\n          \"bg-primary\",\r\n          \"work-area\",\r\n          workArea\r\n        );\r\n        container.appendChild(pill);\r\n      });\r\n    }\r\n  }\r\n\r\n  // Do not add sort pill\r\n\r\n  // Always show Clear All button when any filter is active\r\n  if (clearAllBtn) {\r\n    clearAllBtn.style.display = hasFilters ? \"inline-flex\" : \"none\";\r\n    clearAllBtn.style.marginLeft = \"8px\";\r\n    clearAllBtn.style.verticalAlign = \"middle\";\r\n    clearAllBtn.style.alignItems = \"center\";\r\n    container.appendChild(clearAllBtn);\r\n  }\r\n\r\n  // Show/hide section based on whether filters are active\r\n  section.style.display = hasFilters ? \"block\" : \"none\";\r\n}\r\n\r\n/**\r\n * Check if all work areas are selected\r\n * @param {Array} selectedWorkAreas - Currently selected work areas\r\n * @returns {boolean}\r\n */\r\nfunction isAllWorkAreasSelected(selectedWorkAreas) {\r\n  const dropdown = document.getElementById(\"document_type\");\r\n  if (!dropdown) return false;\r\n\r\n  const totalOptions = Array.from(dropdown.options).filter(\r\n    (opt) => !opt.disabled && opt.value\r\n  ).length;\r\n\r\n  return selectedWorkAreas.length === totalOptions;\r\n}\r\n\r\n/**\r\n * Get user-friendly label for sort option\r\n * @param {string} sortValue - Sort value\r\n * @returns {string} - User-friendly label\r\n */\r\nfunction getSortLabel(sortValue) {\r\n  const sortLabels = {\r\n    relevance: \"Relevance\",\r\n    \"date-newest\": \"Date (newest first)\",\r\n    \"date-oldest\": \"Date (oldest first)\",\r\n    \"title-az\": \"Title (A-Z)\",\r\n    \"title-za\": \"Title (Z-A)\",\r\n  };\r\n  return sortLabels[sortValue] || sortValue;\r\n}\r\n\r\n/**\r\n * Create a filter pill element\r\n * @param {string} label - Filter category label\r\n * @param {string} value - Filter value\r\n * @param {string} badgeClass - Bootstrap badge class (bg-success, bg-primary, etc.)\r\n * @param {string} filterType - Type of filter for removal\r\n * @param {string} filterValue - Specific value to remove (for multi-value filters)\r\n * @returns {HTMLElement} - Filter pill element\r\n */\r\nfunction createFilterPill(label, value, badgeClass, filterType, filterValue) {\r\n  const pill = document.createElement(\"span\");\r\n  pill.className = `badge ${badgeClass} filter-pill d-inline-flex align-items-center`;\r\n\r\n  const pillLabel = document.createElement(\"span\");\r\n  pillLabel.className = \"pill-label\";\r\n  pillLabel.textContent = `${label}:`;\r\n\r\n  const pillValue = document.createElement(\"span\");\r\n  pillValue.className = \"pill-value\";\r\n  pillValue.textContent = value;\r\n\r\n  const removeButton = document.createElement(\"button\");\r\n  removeButton.type = \"button\";\r\n  removeButton.className = \"pill-remove\";\r\n  removeButton.title = `Remove ${label}: ${value}`;\r\n  removeButton.setAttribute(\"data-filter-type\", filterType);\r\n  if (filterValue) {\r\n    removeButton.setAttribute(\"data-filter-value\", filterValue);\r\n  }\r\n\r\n  const icon = document.createElement(\"span\");\r\n  icon.className = \"fas fa-times\";\r\n\r\n  removeButton.appendChild(icon);\r\n\r\n  // Add click handler\r\n  removeButton.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    removeFilter(filterType, filterValue);\r\n  });\r\n\r\n  pill.appendChild(pillLabel);\r\n  pill.appendChild(pillValue);\r\n  pill.appendChild(removeButton);\r\n\r\n  return pill;\r\n}\r\n\r\n/**\r\n * Remove a specific filter\r\n * @param {string} filterType - Type of filter to remove\r\n * @param {string} filterValue - Specific value to remove (optional)\r\n */\r\nasync function removeFilter(filterType, filterValue) {\r\n  console.log(`Removing filter: ${filterType}`, filterValue);\r\n\r\n  switch (filterType) {\r\n    case \"search\":\r\n      // Clear search input\r\n      const searchInput = document.getElementById(\"search\");\r\n      if (searchInput) {\r\n        searchInput.value = \"\";\r\n        // Trigger reload of initial results\r\n        const { loadInitialResults } = await import(\r\n          \"./load-initial-results.js\"\r\n        );\r\n        loadInitialResults();\r\n      }\r\n      break;\r\n\r\n    case \"work-area\":\r\n      // Unselect specific work area from multi-select\r\n      const workAreaDropdown = document.getElementById(\"document_type\");\r\n      if (workAreaDropdown && filterValue) {\r\n        const option = Array.from(workAreaDropdown.options).find(\r\n          (opt) => opt.value === filterValue\r\n        );\r\n        if (option) {\r\n          option.selected = false;\r\n        }\r\n\r\n        // Trigger change event to reapply filters\r\n        const changeEvent = new Event(\"change\", { bubbles: true });\r\n        workAreaDropdown.dispatchEvent(changeEvent);\r\n\r\n        // Also trigger for multi-select component if it exists\r\n        const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n        if (\r\n          multiSelectContainer &&\r\n          multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n        ) {\r\n          const instance = multiSelectContainer.__multiSelectInstance;\r\n          if (instance) {\r\n            instance.selectedValues.delete(filterValue);\r\n            instance.syncNativeSelect();\r\n            instance.updateDisplayText();\r\n            instance.triggerChange();\r\n          }\r\n        }\r\n      }\r\n      break;\r\n\r\n    // ...existing code...\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all filters\r\n */\r\nexport async function clearAllFilters() {\r\n  console.log(\"Clearing all filters\");\r\n\r\n  // Clear search input\r\n  const searchInput = document.getElementById(\"search\");\r\n  if (searchInput) {\r\n    searchInput.value = \"\";\r\n  }\r\n\r\n  // Reset work area dropdown to all selected\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  if (workAreaDropdown) {\r\n    Array.from(workAreaDropdown.options).forEach((opt) => {\r\n      if (!opt.disabled && opt.value) {\r\n        opt.selected = true;\r\n      }\r\n    });\r\n\r\n    // Update multi-select component if it exists\r\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n    if (\r\n      multiSelectContainer &&\r\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n    ) {\r\n      const instance = multiSelectContainer.__multiSelectInstance;\r\n      if (instance && typeof instance.selectAllByDefault === \"function\") {\r\n        instance.selectAllByDefault();\r\n        instance.triggerChange();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Hide applied filters section\r\n  const section = document.getElementById(\"appliedFiltersSection\");\r\n  if (section) {\r\n    section.style.display = \"none\";\r\n  }\r\n\r\n  // Reload initial results\r\n  const { loadInitialResults } = await import(\"./load-initial-results.js\");\r\n  loadInitialResults();\r\n}\r\n\r\n/**\r\n * Initialize \"Clear All\" button\r\n */\r\nexport function initClearAllButton() {\r\n  const clearAllBtn = document.getElementById(\"clearAllBtn\");\r\n  if (clearAllBtn) {\r\n    clearAllBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      clearAllFilters();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Get current filter state\r\n * @returns {Object} - Current filter state\r\n */\r\nexport function getCurrentFilters() {\r\n  const searchInput = document.getElementById(\"search\");\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  const sortDropdown =\r\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n  const filters = {\r\n    searchQuery: searchInput ? searchInput.value : \"\",\r\n    workAreas: [],\r\n    sort: sortDropdown ? sortDropdown.value : \"relevance\",\r\n  };\r\n\r\n  if (workAreaDropdown) {\r\n    const selectedOptions = Array.from(workAreaDropdown.selectedOptions || []);\r\n    filters.workAreas = selectedOptions\r\n      .map((opt) => opt.value)\r\n      .filter((val) => val && val.trim().length > 0);\r\n  }\r\n\r\n  return filters;\r\n}\r\n", "// Client-side filtering and sorting for search results\r\nimport { displayAppliedFilters, getCurrentFilters } from \"./applied-filters.js\";\r\n\r\nlet allResults = []; // Store all results for filtering/sorting\r\n\r\n/**\r\n * Store search results for filtering and sorting\r\n * Deduplicates results based on URL to prevent duplicate entries\r\n * @param {Array} results - Array of search result objects\r\n */\r\nexport function storeResults(results) {\r\n  // Deduplicate results based on URL before storing\r\n  const seenKeys = new Set();\r\n  const deduplicatedResults = [];\r\n\r\n  results.forEach((result, index) => {\r\n    // Create unique identifier - use URL, title, or JSON stringify as final fallback\r\n    const uniqueKey =\r\n      result.liveUrl ||\r\n      result.url ||\r\n      result.title ||\r\n      JSON.stringify(result) + index;\r\n\r\n    if (!seenKeys.has(uniqueKey)) {\r\n      seenKeys.add(uniqueKey);\r\n      deduplicatedResults.push(result);\r\n    }\r\n  });\r\n\r\n  allResults = deduplicatedResults;\r\n  console.log(\r\n    `Stored ${allResults.length} results for filtering/sorting (${results.length - allResults.length} duplicates removed)`,\r\n  );\r\n}\r\n\r\n/**\r\n * Filter results by work area\r\n * @param {Array} selectedWorkAreas - Selected work area values\r\n * @returns {Array} - Filtered results\r\n */\r\nfunction filterByWorkArea(selectedWorkAreas) {\r\n  if (!selectedWorkAreas || selectedWorkAreas.length === 0) {\r\n    return allResults; // Return all if no filter selected\r\n  }\r\n\r\n  // Filter results and track unique items to prevent duplicates\r\n  const seenKeys = new Set();\r\n  const filtered = [];\r\n\r\n  allResults.forEach((result, index) => {\r\n    if (!result.listMetadata || !result.listMetadata[\"Work area\"]) {\r\n      return;\r\n    }\r\n\r\n    const resultWorkAreas = result.listMetadata[\"Work area\"];\r\n\r\n    // Check if any selected work area matches\r\n    const matches = selectedWorkAreas.some((selectedArea) =>\r\n      resultWorkAreas.includes(selectedArea),\r\n    );\r\n\r\n    if (matches) {\r\n      // Create unique identifier - use URL, title, or JSON stringify as final fallback\r\n      const uniqueKey =\r\n        result.liveUrl ||\r\n        result.url ||\r\n        result.title ||\r\n        JSON.stringify(result) + index;\r\n\r\n      // Only add if not already seen (prevents duplicates)\r\n      if (!seenKeys.has(uniqueKey)) {\r\n        seenKeys.add(uniqueKey);\r\n        filtered.push(result);\r\n      }\r\n    }\r\n  });\r\n\r\n  return filtered;\r\n}\r\n\r\n/**\r\n * Sort results by selected criteria\r\n * @param {Array} results - Results to sort\r\n * @param {string} sortBy - Sort criteria (relevance, date-newest, date-oldest, title-az, title-za)\r\n * @returns {Array} - Sorted results\r\n */\r\nfunction sortResults(results, sortBy) {\r\n  const sorted = [...results]; // Create copy to avoid mutating original\r\n\r\n  switch (sortBy) {\r\n    case \"relevance\":\r\n      // Sort by rank (lower is better) or score (higher is better)\r\n      sorted.sort((a, b) => {\r\n        if (a.rank && b.rank) {\r\n          return a.rank - b.rank;\r\n        }\r\n        if (a.score && b.score) {\r\n          return b.score - a.score;\r\n        }\r\n        return 0;\r\n      });\r\n      break;\r\n\r\n    case \"date-newest\":\r\n      sorted.sort((a, b) => {\r\n        const dateA = a.dateTimestamp || 0;\r\n        const dateB = b.dateTimestamp || 0;\r\n        return dateB - dateA; // Newest first\r\n      });\r\n      break;\r\n\r\n    case \"date-oldest\":\r\n      sorted.sort((a, b) => {\r\n        const dateA = a.dateTimestamp || 0;\r\n        const dateB = b.dateTimestamp || 0;\r\n        return dateA - dateB; // Oldest first\r\n      });\r\n      break;\r\n\r\n    case \"title-az\":\r\n      sorted.sort((a, b) => {\r\n        const titleA = a.title || \"\";\r\n        const titleB = b.title || \"\";\r\n        return titleA.localeCompare(titleB);\r\n      });\r\n      break;\r\n\r\n    case \"title-za\":\r\n      sorted.sort((a, b) => {\r\n        const titleA = a.title || \"\";\r\n        const titleB = b.title || \"\";\r\n        return titleB.localeCompare(titleA);\r\n      });\r\n      break;\r\n\r\n    default:\r\n      // No sorting or unknown sort option\r\n      break;\r\n  }\r\n\r\n  return sorted;\r\n}\r\n\r\n/**\r\n * Sort cards in the DOM by data attributes\r\n * @param {string} sortBy - Sort criteria (relevance, date-newest, date-oldest, title-az, title-za)\r\n */\r\nfunction sortCardsInDOM(sortBy) {\r\n  const container = document.getElementById(\"search-results-list\");\r\n  if (!container) return;\r\n\r\n  const cards = Array.from(container.querySelectorAll(\".aikb-search-card\"));\r\n\r\n  console.log(`Sorting ${cards.length} cards by ${sortBy}`);\r\n\r\n  cards.sort((a, b) => {\r\n    switch (sortBy) {\r\n      case \"relevance\":\r\n        // Higher relevance first\r\n        const relA = parseFloat(a.getAttribute(\"data-sort-relevance\")) || 0;\r\n        const relB = parseFloat(b.getAttribute(\"data-sort-relevance\")) || 0;\r\n        return relB - relA;\r\n\r\n      case \"date-newest\":\r\n        // Newer dates first (higher timestamp)\r\n        const dateA = parseFloat(a.getAttribute(\"data-sort-date\")) || 0;\r\n        const dateB = parseFloat(b.getAttribute(\"data-sort-date\")) || 0;\r\n        console.log(`Comparing dates: ${dateA} vs ${dateB}`);\r\n        return dateB - dateA;\r\n\r\n      case \"date-oldest\":\r\n        // Older dates first (lower timestamp)\r\n        const dateC = parseFloat(a.getAttribute(\"data-sort-date\")) || 0;\r\n        const dateD = parseFloat(b.getAttribute(\"data-sort-date\")) || 0;\r\n        console.log(`Comparing dates: ${dateC} vs ${dateD}`);\r\n        return dateC - dateD;\r\n\r\n      case \"title-az\":\r\n        // A to Z\r\n        const titleA = a.getAttribute(\"data-sort-title\") || \"\";\r\n        const titleB = b.getAttribute(\"data-sort-title\") || \"\";\r\n        return titleA.localeCompare(titleB);\r\n\r\n      case \"title-za\":\r\n        // Z to A\r\n        const titleC = a.getAttribute(\"data-sort-title\") || \"\";\r\n        const titleD = b.getAttribute(\"data-sort-title\") || \"\";\r\n        return titleD.localeCompare(titleC);\r\n\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  // Re-append cards in sorted order\r\n  cards.forEach((card) => container.appendChild(card));\r\n\r\n  console.log(`Cards sorted by ${sortBy} in DOM using data attributes`);\r\n}\r\n\r\n// Track if filter/sort is currently being applied to prevent concurrent executions\r\nlet isApplying = false;\r\n\r\n/**\r\n * Apply filters and sorting, then render results\r\n */\r\nexport async function applyFiltersAndSort() {\r\n  // Prevent concurrent executions\r\n  if (isApplying) {\r\n    console.log(\"Filter/sort already in progress, skipping duplicate call\");\r\n    return;\r\n  }\r\n\r\n  isApplying = true;\r\n\r\n  try {\r\n    // Get work area dropdown (may be multi-select)\r\n    const workAreaDropdown = document.getElementById(\"document_type\");\r\n    // Support both legacy id=\"owner\" and current id=\"sort\"\r\n    const sortDropdown =\r\n      document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n    if (!workAreaDropdown || !sortDropdown) {\r\n      console.warn(\"Required dropdowns not found (document_type or sort)\");\r\n      return;\r\n    }\r\n\r\n    // Get selected work areas\r\n    let selectedWorkAreas = [];\r\n    if (workAreaDropdown) {\r\n      const selectedOptions = Array.from(\r\n        workAreaDropdown.selectedOptions || [],\r\n      );\r\n      // Remove empty/default values so an unselected state returns all results\r\n      selectedWorkAreas = selectedOptions\r\n        .map((opt) => opt.value)\r\n        .filter((val) => val && val.trim().length > 0);\r\n    }\r\n\r\n    const selectedSort = sortDropdown.value || \"relevance\";\r\n\r\n    console.log(\r\n      `Applying filters - Work Areas: [${selectedWorkAreas.join(\r\n        \", \",\r\n      )}], Sort: \"${selectedSort}\"`,\r\n    );\r\n\r\n    // Filter by work areas\r\n    let filtered = filterByWorkArea(selectedWorkAreas);\r\n    console.log(`After filtering: ${filtered.length} results`);\r\n\r\n    // Sort results (for pagination compatibility)\r\n    let sorted = sortResults(filtered, selectedSort);\r\n    console.log(`After sorting: ${sorted.length} results`);\r\n\r\n    // Render filtered and sorted results\r\n    const { renderResults } = await import(\"./search-card-template.js\");\r\n    renderResults(sorted, \"search-results-list\");\r\n\r\n    // Apply DOM-based sorting using data attributes\r\n    sortCardsInDOM(selectedSort);\r\n\r\n    // Display applied filters\r\n    const currentFilters = getCurrentFilters();\r\n    displayAppliedFilters(currentFilters);\r\n  } finally {\r\n    isApplying = false;\r\n  }\r\n}\r\n\r\n// Track if listeners have been initialized to prevent duplicate event handlers\r\nlet listenersInitialized = false;\r\n\r\n/**\r\n * Initialize filter and sort listeners\r\n */\r\nexport function initializeFiltersAndSort() {\r\n  // Prevent multiple initializations that would create duplicate event listeners\r\n  if (listenersInitialized) {\r\n    console.log(\"Filter and sort listeners already initialized, skipping\");\r\n    return;\r\n  }\r\n\r\n  const workAreaDropdown = document.getElementById(\"document_type\");\r\n  // Support both legacy id=\"owner\" and current id=\"sort\"\r\n  const sortDropdown =\r\n    document.getElementById(\"sort\") || document.getElementById(\"owner\");\r\n\r\n  if (workAreaDropdown) {\r\n    workAreaDropdown.addEventListener(\"change\", function () {\r\n      console.log(\"Work area filter changed\");\r\n      applyFiltersAndSort();\r\n    });\r\n\r\n    // Listen for custom multi-select events (our custom component) to reapply filters\r\n    const multiSelectContainer = workAreaDropdown.nextElementSibling;\r\n    if (\r\n      multiSelectContainer &&\r\n      multiSelectContainer.classList.contains(\"aikb-multiselect-container\")\r\n    ) {\r\n      multiSelectContainer.addEventListener(\"multiselect-change\", () => {\r\n        console.log(\"Work area filter applied via custom multi-select\");\r\n        applyFiltersAndSort();\r\n      });\r\n    }\r\n\r\n    // Legacy SumoSelect support: trigger filtering when the OK button is clicked/closed\r\n    if (typeof window.$ !== \"undefined\") {\r\n      window.$(workAreaDropdown).on(\"sumo:closed\", function () {\r\n        console.log(\"Work area filter applied via SumoSelect OK\");\r\n        applyFiltersAndSort();\r\n      });\r\n    }\r\n  }\r\n\r\n  if (sortDropdown) {\r\n    sortDropdown.addEventListener(\"change\", function () {\r\n      console.log(`Sort changed to: ${this.value}`);\r\n      applyFiltersAndSort();\r\n    });\r\n  }\r\n\r\n  listenersInitialized = true;\r\n  console.log(\"Filter and sort listeners initialized\");\r\n}\r\n", "// Load initial search results from local search or live API on page load\r\nimport { renderResults } from \"./search-card-template.js\";\r\nimport {\r\n  initializeDropdowns,\r\n  setStaticWorkAreas,\r\n} from \"./populate-dropdowns.js\";\r\nimport { storeResults, initializeFiltersAndSort } from \"./search-filters.js\";\r\nimport {\r\n  getPrimaryDataSource,\r\n  getFallbackDataSource,\r\n  getWorkAreasDataSource,\r\n  getConfig,\r\n} from \"./config.js\";\r\n\r\nlet fetchedWorkAreas = null;\r\n\r\n/**\r\n * Fetch work areas list from static source\r\n * @returns {Promise<Array<string>>} Promise that resolves to array of work areas\r\n */\r\nasync function fetchWorkAreasList() {\r\n  const workAreasSource = getWorkAreasDataSource();\r\n  console.log(`Fetching work areas from ${workAreasSource}...`);\r\n\r\n  try {\r\n    const response = await fetch(workAreasSource);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.log(`Work areas loaded successfully:`, data);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(`Error fetching work areas from ${workAreasSource}:`, error);\r\n    return null; // Will fall back to extracting from results\r\n  }\r\n}\r\n\r\n// Export for use in search-form-handler\r\nexport function loadInitialResults() {\r\n  // Check if we're on a page with search results container\r\n  const searchResultsContainer = document.getElementById(\"search-results-list\");\r\n  if (!searchResultsContainer) {\r\n    console.warn(\"search-results-list container not found on page\");\r\n    return; // Not on search results page\r\n  }\r\n\r\n  const config = getConfig();\r\n  const primarySource = getPrimaryDataSource();\r\n  const fallbackSource = getFallbackDataSource();\r\n\r\n  console.log(\r\n    `Loading initial results from ${\r\n      config.isProduction ? \"live API\" : \"local JSON\"\r\n    }...`,\r\n  );\r\n\r\n  // Fetch work areas list first (parallel with results loading)\r\n  fetchWorkAreasList().then((workAreas) => {\r\n    if (workAreas) {\r\n      fetchedWorkAreas = workAreas;\r\n      setStaticWorkAreas(workAreas);\r\n    }\r\n  });\r\n\r\n  // Fetch from primary data source\r\n  fetch(primarySource)\r\n    .then((response) => {\r\n      console.log(\r\n        `Primary source (${primarySource}) response status:`,\r\n        response.status,\r\n        response.ok,\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      console.log(\r\n        `Primary source data loaded successfully (${\r\n          config.isProduction ? \"live API\" : \"local JSON\"\r\n        }):`,\r\n        data,\r\n      );\r\n      processAndRenderResults(data, config.isProduction ? \"live-api\" : \"local\");\r\n    })\r\n    .catch((primaryError) => {\r\n      console.error(\r\n        `Error loading from primary source (${primarySource}):`,\r\n        primaryError,\r\n      );\r\n\r\n      // Only try fallback if in production\r\n      if (fallbackSource) {\r\n        console.log(\"Attempting fallback to local JSON...\");\r\n        fetch(fallbackSource)\r\n          .then((response) => {\r\n            console.log(\r\n              \"Fallback JSON response status:\",\r\n              response.status,\r\n              response.ok,\r\n            );\r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            console.log(\"Fallback JSON data loaded successfully:\", data);\r\n            processAndRenderResults(data, \"fallback\");\r\n          })\r\n          .catch((fallbackError) => {\r\n            console.error(\"Error loading fallback search.json:\", fallbackError);\r\n            displayErrorMessage();\r\n          });\r\n      } else {\r\n        // Local dev with no fallback - show error\r\n        displayErrorMessage();\r\n      }\r\n    });\r\n}\r\n\r\nfunction displayErrorMessage() {\r\n  const container = document.getElementById(\"search-results-list\");\r\n  if (container) {\r\n    container.innerHTML =\r\n      '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again later.</p>';\r\n  }\r\n}\r\n\r\nfunction processAndRenderResults(data, source = \"unknown\") {\r\n  // Handle array data directly (local JSON format)\r\n  const results = Array.isArray(data) ? data : [];\r\n\r\n  // Map to card template format\r\n  const mappedResults = results.map((result) => {\r\n    // Parse timestamp for sorting\r\n    const dateTimestamp = result[\"last-updated\"]\r\n      ? new Date(result[\"last-updated\"]).getTime()\r\n      : 0;\r\n\r\n    return {\r\n      title: result.title || \"\",\r\n      summary: result.description || result.summary || \"\",\r\n      listMetadata: {\r\n        \"Work area\": result[\"work-area\"] || [],\r\n        Roles: result.roles || [],\r\n        Benefits: result.benefits || [],\r\n      },\r\n      date: result[\"last-updated\"]\r\n        ? new Date(result[\"last-updated\"]).toLocaleDateString(\"en-AU\", {\r\n            year: \"numeric\",\r\n            month: \"long\",\r\n          })\r\n        : \"\",\r\n      dateTimestamp: dateTimestamp,\r\n      liveUrl: result.url || result.liveUrl || \"\",\r\n      submittedBy: result[\"submitted-by\"] || \"\",\r\n      rank: result.rank || 0,\r\n      score: result.score || 0,\r\n    };\r\n  });\r\n\r\n  console.log(`Rendering ${mappedResults.length} cards from ${source}`);\r\n\r\n  // Deduplicate results before storing/caching\r\n  const seenKeys = new Set();\r\n  const deduplicatedResults = [];\r\n\r\n  mappedResults.forEach((result, index) => {\r\n    // Create unique identifier - use URL, title, or JSON stringify as final fallback\r\n    const uniqueKey =\r\n      result.liveUrl ||\r\n      result.url ||\r\n      result.title ||\r\n      JSON.stringify(result) + index;\r\n\r\n    if (!seenKeys.has(uniqueKey)) {\r\n      seenKeys.add(uniqueKey);\r\n      deduplicatedResults.push(result);\r\n    }\r\n  });\r\n\r\n  if (mappedResults.length !== deduplicatedResults.length) {\r\n    console.log(\r\n      `Removed ${mappedResults.length - deduplicatedResults.length} duplicate items from source data`,\r\n    );\r\n  }\r\n\r\n  // Store results for filtering/sorting\r\n  storeResults(deduplicatedResults);\r\n\r\n  // Cache results for offline search\r\n  window.aikbSearchCache = deduplicatedResults;\r\n  console.log(\r\n    `Cached ${deduplicatedResults.length} results for offline search`,\r\n  );\r\n\r\n  // Initialize dropdowns with work area data\r\n  // Pass fetched work areas if available\r\n  initializeDropdowns(deduplicatedResults, fetchedWorkAreas);\r\n\r\n  // Initialize filter and sort listeners after each results update\r\n  initializeFiltersAndSort();\r\n\r\n  // Render cards using the template\r\n  renderResults(deduplicatedResults, \"search-results-list\");\r\n}\r\n\r\n// Wait for complete page load (not just DOM ready)\r\nwindow.addEventListener(\"load\", function () {\r\n  console.log(\"Page load event fired, loading initial results...\");\r\n  // Extra delay after full page load to ensure all scripts initialized\r\n  setTimeout(loadInitialResults, 200);\r\n});\r\n", "/**\r\n * Offline Search Module\r\n *\r\n * Provides client-side search functionality when Funnelback API is unavailable.\r\n * Uses cached search results stored in window.aikbSearchCache.\r\n */\r\n\r\n/**\r\n * Search through locally cached data using keywords\r\n *\r\n * Scoring algorithm:\r\n * - Title matches: 3 points per occurrence (prioritized)\r\n * - Summary matches: 1 point per occurrence\r\n * - Metadata matches: 2 points per keyword match\r\n *\r\n * @param {string} keywords - Search keywords entered by user\r\n * @param {Array} results - Cached search results to filter\r\n * @returns {Array} Filtered and scored results, sorted by relevance\r\n */\r\nexport function searchLocalData(keywords, results) {\r\n  if (!keywords || !results || results.length === 0) {\r\n    console.log(\"Offline search: No keywords or no cached results available\");\r\n    return [];\r\n  }\r\n\r\n  // Normalize keywords for matching\r\n  const normalizedKeywords = keywords\r\n    .toLowerCase()\r\n    .replace(/[^\\w\\s]/g, \"\") // Remove special characters\r\n    .trim();\r\n\r\n  if (!normalizedKeywords) {\r\n    console.log(\"Offline search: Keywords empty after normalization\");\r\n    return [];\r\n  }\r\n\r\n  console.log(\r\n    `Offline search: Searching for \"${keywords}\" in ${results.length} cached results`\r\n  );\r\n\r\n  // Create regex pattern for matching\r\n  const keywordPattern = new RegExp(normalizedKeywords, \"gi\");\r\n\r\n  // Score each result\r\n  const scoredResults = results.map((result) => {\r\n    let score = 0;\r\n    let titleMatches = 0;\r\n    let summaryMatches = 0;\r\n    let metadataMatches = 0;\r\n\r\n    // Score title matches (weight: 3)\r\n    if (result.title) {\r\n      const titleText = result.title.toLowerCase().replace(/[^\\w\\s]/g, \"\");\r\n      const matches = titleText.match(keywordPattern);\r\n      if (matches) {\r\n        titleMatches = matches.length;\r\n        score += titleMatches * 3;\r\n      }\r\n    }\r\n\r\n    // Score summary matches (weight: 1)\r\n    if (result.summary) {\r\n      const summaryText = result.summary.toLowerCase().replace(/[^\\w\\s]/g, \"\");\r\n      const matches = summaryText.match(keywordPattern);\r\n      if (matches) {\r\n        summaryMatches = matches.length;\r\n        score += summaryMatches * 1;\r\n      }\r\n    }\r\n\r\n    // Score metadata matches (weight: 2)\r\n    if (result.metadata) {\r\n      const metadataText = result.metadata\r\n        .toLowerCase()\r\n        .replace(/[^\\w\\s]/g, \"\");\r\n      const matches = metadataText.match(keywordPattern);\r\n      if (matches) {\r\n        metadataMatches = matches.length;\r\n        score += metadataMatches * 2;\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...result,\r\n      _offlineScore: score,\r\n      _offlineMatches: {\r\n        title: titleMatches,\r\n        summary: summaryMatches,\r\n        metadata: metadataMatches,\r\n      },\r\n    };\r\n  });\r\n\r\n  // Filter out results with no matches (score = 0)\r\n  const matchedResults = scoredResults.filter(\r\n    (result) => result._offlineScore > 0\r\n  );\r\n\r\n  // Sort by score descending (highest score first)\r\n  matchedResults.sort((a, b) => b._offlineScore - a._offlineScore);\r\n\r\n  console.log(\r\n    `Offline search: Found ${matchedResults.length} results matching \"${keywords}\"`\r\n  );\r\n\r\n  // Log top 3 results for debugging\r\n  if (matchedResults.length > 0) {\r\n    console.log(\"Offline search: Top results:\");\r\n    matchedResults.slice(0, 3).forEach((result, index) => {\r\n      console.log(\r\n        `  ${index + 1}. \"${result.title}\" (score: ${\r\n          result._offlineScore\r\n        }, title:${result._offlineMatches.title}, summary:${\r\n          result._offlineMatches.summary\r\n        }, metadata:${result._offlineMatches.metadata})`\r\n      );\r\n    });\r\n  }\r\n\r\n  return matchedResults;\r\n}\r\n\r\n/**\r\n * Get cached search data from global scope\r\n *\r\n * @returns {Array|null} Cached results or null if not available\r\n */\r\nexport function getCachedData() {\r\n  if (window.aikbSearchCache && Array.isArray(window.aikbSearchCache)) {\r\n    console.log(\r\n      `Offline search: Retrieved ${window.aikbSearchCache.length} cached results`\r\n    );\r\n    return window.aikbSearchCache;\r\n  }\r\n\r\n  console.log(\"Offline search: No cached data available\");\r\n  return null;\r\n}\r\n", "/**\r\n * Search Form Handler\r\n * Wires the #policy-search-form submission to trigger Funnelback API calls\r\n * and populate #search-results-list with results\r\n */\r\n\r\nimport { loadInitialResults } from \"./load-initial-results.js\";\r\nimport { renderResults } from \"./search-card-template.js\";\r\nimport { searchLocalData, getCachedData } from \"./offline-search.js\";\r\nimport {\r\n  storeResults,\r\n  initializeFiltersAndSort,\r\n  applyFiltersAndSort,\r\n} from \"./search-filters.js\";\r\nimport { initializeDropdowns } from \"./populate-dropdowns.js\";\r\nimport { displayAppliedFilters, getCurrentFilters } from \"./applied-filters.js\";\r\n\r\n// Initialize search form handler\r\n(function initSearchForm() {\r\n  // Only initialize if jQuery is available\r\n  if (typeof window.$ === \"undefined\") {\r\n    console.warn(\"jQuery not loaded; search form handler disabled\");\r\n    return;\r\n  }\r\n\r\n  const $form = window.$(\"#policy-search-form\");\r\n  const $searchInput = window.$(\"#search\");\r\n\r\n  if ($form.length === 0) {\r\n    console.error(\"Form #policy-search-form not found\");\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Extract search parameters from form\r\n   * @returns {Object} Search parameters {query, area, ...}\r\n   */\r\n  function getSearchParams() {\r\n    return {\r\n      query: $searchInput.val() || \"\",\r\n      area: window.$(\"#document_type\").val() || \"\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Prevent form submission (search is triggered by Enter key only)\r\n   */\r\n  function handleFormSubmit(event) {\r\n    event.preventDefault();\r\n    // Form submission prevented - search only happens on Enter key press\r\n  }\r\n\r\n  /**\r\n   * Handle clear input button click\r\n   * Clear the search field and restore filtered view of all results\r\n   */\r\n  function handleClearInput() {\r\n    $searchInput.val(\"\");\r\n    console.log(\"Search cleared - restoring filtered view of all results\");\r\n    const cachedData = getCachedData();\r\n    if (cachedData && cachedData.length > 0) {\r\n      storeResults(cachedData);\r\n      applyFiltersAndSort();\r\n    }\r\n  }\r\n\r\n  // Attach form submission handler\r\n  $form.on(\"submit\", handleFormSubmit);\r\n\r\n  // Attach clear input handler\r\n  window.$(\"#clear-input\").on(\"click\", handleClearInput);\r\n\r\n  // Show/hide clear button based on input state (but don't search yet)\r\n  $searchInput.on(\"input\", function () {\r\n    const $clearBtn = window.$(\"#clear-input\");\r\n    if (window.$(this).val().length > 0) {\r\n      $clearBtn.attr(\"hidden\", false);\r\n    } else {\r\n      $clearBtn.attr(\"hidden\", \"\");\r\n    }\r\n  });\r\n\r\n  // Trigger search when user presses Enter in the search input\r\n  $searchInput.on(\"keydown\", function (event) {\r\n    if (event.key === \"Enter\" || event.keyCode === 13) {\r\n      event.preventDefault();\r\n      const searchText = window.$(this).val();\r\n      if (searchText.trim()) {\r\n        triggerSearch(searchText);\r\n      } else {\r\n        console.log(\r\n          \"Empty search via Enter - restoring filtered view of all results\",\r\n        );\r\n        const cachedData = getCachedData();\r\n        if (cachedData && cachedData.length > 0) {\r\n          storeResults(cachedData);\r\n          applyFiltersAndSort();\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Trigger search with the given query text\r\n   * @param {string} queryText - The search query from the input field\r\n   */\r\n  function triggerSearch(queryText) {\r\n    if (!queryText.trim()) {\r\n      return; // Don't search for empty text\r\n    }\r\n\r\n    console.log(`Triggered search for: \"${queryText}\"`);\r\n\r\n    // Perform local/offline search\r\n    const cachedData = getCachedData();\r\n    if (cachedData && cachedData.length > 0) {\r\n      console.log(\"Performing local search\");\r\n      const localResults = searchLocalData(queryText, cachedData);\r\n\r\n      // Store search results and apply current filters\r\n      storeResults(localResults);\r\n      applyFiltersAndSort();\r\n\r\n      console.log(\r\n        `Local search: Found ${localResults.length} results, applying filters`,\r\n      );\r\n    } else {\r\n      // No cached data - show error\r\n      console.error(\"No cached data available for search\");\r\n      const $container = window.$(\"#search-results-list\");\r\n      if ($container.length > 0) {\r\n        $container.html(\r\n          '<p class=\"aikb-error\">Unable to load search results. Please check your connection and try again.</p>',\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(\"Search form handler initialized\");\r\n})();\r\n", "// Alias CTA anchors to reuse NTGC primary button styling\r\nconst CTA_SELECTOR = 'div[data-hydration-component=\"squiz-call-to-action\"] a';\r\n\r\nfunction applyCtaButtonAlias(root = document) {\r\n  const anchors = root.querySelectorAll(CTA_SELECTOR);\r\n  anchors.forEach((anchor) => {\r\n    anchor.classList.add(\"ntgc-btn\", \"ntgc-btn--primary\");\r\n  });\r\n}\r\n\r\nif (document.readyState === \"loading\") {\r\n  document.addEventListener(\"DOMContentLoaded\", () => applyCtaButtonAlias());\r\n} else {\r\n  applyCtaButtonAlias();\r\n}\r\n", "// Import all JS modules for landing page bundle (except content-page.js)\r\nimport \"./config.js\";\r\nimport \"./search-form-handler.js\";\r\nimport \"./search-filters.js\";\r\nimport \"./search-card-template.js\";\r\nimport \"./populate-dropdowns.js\";\r\nimport \"./offline-search.js\";\r\nimport \"./multi-select-dropdown.js\";\r\nimport \"./load-initial-results.js\";\r\nimport \"./cta-button-alias.js\";\r\nimport \"./pagination.js\";\r\nimport { initClearAllButton } from \"./applied-filters.js\";\r\n\r\n// Confirm bundle loaded successfully\r\nconsole.log(\"[aikb] Landing page bundle loaded successfully\");\r\nconsole.log(\"[aikb] jQuery available:\", typeof window.jQuery !== \"undefined\");\r\nconsole.log(\"[aikb] DOM ready state:\", document.readyState);\r\n\r\n// Initialize clear all button after page loads\r\nwindow.addEventListener(\"load\", function () {\r\n  initClearAllButton();\r\n  console.log(\"[aikb] Applied filters initialized\");\r\n});\r\n"],
  "mappings": "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",
  "names": ["initializePagination", "getCurrentPageResults", "loadInitialResults", "allResults", "renderResults"]
}
