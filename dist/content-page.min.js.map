{
  "version": 3,
  "sources": ["../src/js/copy-to-clipboard.js", "../src/js/wrap-pre-blocks.js", "../src/js/content-page.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  // For each <pre>, check if it is immediately preceded by a heading (h2-h6)\r\n  document.querySelectorAll(\"pre\").forEach((pre) => {\r\n    pre.classList.add(\"copyable\");\r\n    // Find preceding heading sibling\r\n    let heading = pre.previousElementSibling;\r\n    if (heading && /^H[2-6]$/.test(heading.tagName)) {\r\n      // Only wrap if not already wrapped\r\n      if (!heading.parentElement.classList.contains(\"copy-pre-btn-wrapper\")) {\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.className = \"copy-pre-btn-wrapper\";\r\n        wrapper.style.position = \"relative\";\r\n        wrapper.style.width = \"100%\";\r\n        heading.parentNode.insertBefore(wrapper, heading);\r\n        wrapper.appendChild(heading);\r\n        wrapper.appendChild(pre);\r\n        // Add button\r\n        addCopyButton(wrapper, pre);\r\n      }\r\n    } else if (!pre.parentElement.classList.contains(\"copy-pre-btn-wrapper\")) {\r\n      // No heading, just wrap pre\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"copy-pre-btn-wrapper\";\r\n      wrapper.style.position = \"relative\";\r\n      wrapper.style.width = \"100%\";\r\n      pre.parentNode.insertBefore(wrapper, pre);\r\n      wrapper.appendChild(pre);\r\n      addCopyButton(wrapper, pre);\r\n    }\r\n  });\r\n});\r\nfunction addCopyButton(wrapper, pre) {\r\n  // Only add button if not already present\r\n  if (wrapper.querySelector(\".copy-pre-btn\")) return;\r\n  const btn = document.createElement(\"button\");\r\n  btn.type = \"button\";\r\n  btn.className = \"copy-pre-btn\";\r\n  btn.textContent = \"Copy\";\r\n  btn.setAttribute(\"aria-label\", \"Copy code block to clipboard\");\r\n  btn.style.position = \"absolute\";\r\n  btn.style.top = \"8px\";\r\n  btn.style.right = \"8px\";\r\n  wrapper.appendChild(btn);\r\n  btn.addEventListener(\"click\", async (e) => {\r\n    e.preventDefault();\r\n    // Only copy the pre's text, not the button\r\n    const text = pre.textContent;\r\n    if (navigator.clipboard && window.isSecureContext) {\r\n      try {\r\n        await navigator.clipboard.writeText(text);\r\n        showCopiedState(btn);\r\n      } catch (err) {\r\n        console.error(\"Clipboard API failed:\", err);\r\n        showError();\r\n      }\r\n      return;\r\n    }\r\n    try {\r\n      fallbackCopy(text);\r\n      showCopiedState(btn);\r\n    } catch (err) {\r\n      console.error(\"Fallback copy failed:\", err);\r\n      showError();\r\n    }\r\n  });\r\n}\r\n// ...existing code...\r\n\r\n// Fallback copy using a temporary textarea\r\nfunction fallbackCopy(text) {\r\n  const ta = document.createElement(\"textarea\");\r\n  ta.value = text;\r\n  ta.setAttribute(\"readonly\", \"\");\r\n  ta.style.position = \"fixed\";\r\n  ta.style.top = \"-1000px\";\r\n  document.body.appendChild(ta);\r\n  ta.focus();\r\n  ta.select();\r\n  const ok = document.execCommand(\"copy\");\r\n  document.body.removeChild(ta);\r\n  if (!ok) throw new Error(\"execCommand copy failed\");\r\n}\r\n\r\n// Lightweight success toast inside the same <pre>\r\nfunction showCopiedState(btn) {\r\n  // Reset any existing timer to avoid race conditions\r\n  if (btn._copyResetTimer) {\r\n    clearTimeout(btn._copyResetTimer);\r\n  }\r\n  btn.textContent = \"Copied\";\r\n  btn.classList.add(\"is-copied\");\r\n  btn.setAttribute(\"aria-label\", \"Copied to clipboard\");\r\n  btn._copyResetTimer = setTimeout(() => {\r\n    btn.textContent = \"Copy\";\r\n    btn.classList.remove(\"is-copied\");\r\n    btn.setAttribute(\"aria-label\", \"Copy code block to clipboard\");\r\n  }, 1600);\r\n}\r\n\r\n// Optional: generic error notice\r\nfunction showError() {\r\n  alert(\"Failed to copy.\");\r\n}\r\n", "// Utility to wrap <h2>-<h6> + <pre> in .aikb-pre-block for unified styling\r\nexport function wrapPreBlocks(main) {\r\n  main = main || document.getElementById(\"aikb-main-content\") || document.body;\r\n  const headingSelector = \"h2, h3, h4, h5, h6\";\r\n  const headings = main.querySelectorAll(headingSelector);\r\n  headings.forEach((heading) => {\r\n    const next = heading.nextElementSibling;\r\n    if (\r\n      next &&\r\n      next.tagName === \"PRE\" &&\r\n      !heading.parentElement.classList.contains(\"aikb-pre-block\")\r\n    ) {\r\n      // Create wrapper\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"aikb-pre-block\";\r\n      heading.parentNode.insertBefore(wrapper, heading);\r\n      wrapper.appendChild(heading);\r\n      wrapper.appendChild(next);\r\n    }\r\n  });\r\n  // Also style any <pre> not already wrapped\r\n  main.querySelectorAll(\"pre\").forEach((pre) => {\r\n    if (!pre.parentElement.classList.contains(\"aikb-pre-block\")) {\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"aikb-pre-block\";\r\n      pre.parentNode.insertBefore(wrapper, pre);\r\n      wrapper.appendChild(pre);\r\n    }\r\n  });\r\n}\r\n", "// Content page specific scripts\r\nimport \"./copy-to-clipboard.js\";\r\nimport { wrapPreBlocks } from \"./wrap-pre-blocks.js\";\r\n\r\n// Wrap <h2>-<h6> + <pre> blocks for unified styling\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  wrapPreBlocks();\r\n});\r\n"],
  "mappings": "kjBAAA,IAAAA,EAAAC,EAAA,cAAS,iBAAiB,mBAAoB,IAAM,CAElD,SAAS,iBAAiB,KAAK,EAAE,QAASC,GAAQ,CAChDA,EAAI,UAAU,IAAI,UAAU,EAE5B,IAAIC,EAAUD,EAAI,uBAClB,GAAIC,GAAW,WAAW,KAAKA,EAAQ,OAAO,GAE5C,GAAI,CAACA,EAAQ,cAAc,UAAU,SAAS,sBAAsB,EAAG,CACrE,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,uBACpBA,EAAQ,MAAM,SAAW,WACzBA,EAAQ,MAAM,MAAQ,OACtBD,EAAQ,WAAW,aAAaC,EAASD,CAAO,EAChDC,EAAQ,YAAYD,CAAO,EAC3BC,EAAQ,YAAYF,CAAG,EAEvBG,EAAcD,EAASF,CAAG,CAC5B,UACS,CAACA,EAAI,cAAc,UAAU,SAAS,sBAAsB,EAAG,CAExE,IAAME,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,uBACpBA,EAAQ,MAAM,SAAW,WACzBA,EAAQ,MAAM,MAAQ,OACtBF,EAAI,WAAW,aAAaE,EAASF,CAAG,EACxCE,EAAQ,YAAYF,CAAG,EACvBG,EAAcD,EAASF,CAAG,CAC5B,CACF,CAAC,CACH,CAAC,EACD,SAASG,EAAcD,EAASF,EAAK,CAEnC,GAAIE,EAAQ,cAAc,eAAe,EAAG,OAC5C,IAAME,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,KAAO,SACXA,EAAI,UAAY,eAChBA,EAAI,YAAc,OAClBA,EAAI,aAAa,aAAc,8BAA8B,EAC7DA,EAAI,MAAM,SAAW,WACrBA,EAAI,MAAM,IAAM,MAChBA,EAAI,MAAM,MAAQ,MAClBF,EAAQ,YAAYE,CAAG,EACvBA,EAAI,iBAAiB,QAAS,MAAOC,GAAM,CACzCA,EAAE,eAAe,EAEjB,IAAMC,EAAON,EAAI,YACjB,GAAI,UAAU,WAAa,OAAO,gBAAiB,CACjD,GAAI,CACF,MAAM,UAAU,UAAU,UAAUM,CAAI,EACxCC,EAAgBH,CAAG,CACrB,OAASI,EAAK,CACZ,QAAQ,MAAM,wBAAyBA,CAAG,EAC1CC,EAAU,CACZ,CACA,MACF,CACA,GAAI,CACFC,EAAaJ,CAAI,EACjBC,EAAgBH,CAAG,CACrB,OAASI,EAAK,CACZ,QAAQ,MAAM,wBAAyBA,CAAG,EAC1CC,EAAU,CACZ,CACF,CAAC,CACH,CAIA,SAASC,EAAaJ,EAAM,CAC1B,IAAMK,EAAK,SAAS,cAAc,UAAU,EAC5CA,EAAG,MAAQL,EACXK,EAAG,aAAa,WAAY,EAAE,EAC9BA,EAAG,MAAM,SAAW,QACpBA,EAAG,MAAM,IAAM,UACf,SAAS,KAAK,YAAYA,CAAE,EAC5BA,EAAG,MAAM,EACTA,EAAG,OAAO,EACV,IAAMC,EAAK,SAAS,YAAY,MAAM,EAEtC,GADA,SAAS,KAAK,YAAYD,CAAE,EACxB,CAACC,EAAI,MAAM,IAAI,MAAM,yBAAyB,CACpD,CAGA,SAASL,EAAgBH,EAAK,CAExBA,EAAI,iBACN,aAAaA,EAAI,eAAe,EAElCA,EAAI,YAAc,SAClBA,EAAI,UAAU,IAAI,WAAW,EAC7BA,EAAI,aAAa,aAAc,qBAAqB,EACpDA,EAAI,gBAAkB,WAAW,IAAM,CACrCA,EAAI,YAAc,OAClBA,EAAI,UAAU,OAAO,WAAW,EAChCA,EAAI,aAAa,aAAc,8BAA8B,CAC/D,EAAG,IAAI,CACT,CAGA,SAASK,GAAY,CACnB,MAAM,iBAAiB,CACzB,ICrGO,SAASI,EAAcC,EAAM,CAClCA,EAAOA,GAAQ,SAAS,eAAe,mBAAmB,GAAK,SAAS,KAEvDA,EAAK,iBADE,oBAC8B,EAC7C,QAASC,GAAY,CAC5B,IAAMC,EAAOD,EAAQ,mBACrB,GACEC,GACAA,EAAK,UAAY,OACjB,CAACD,EAAQ,cAAc,UAAU,SAAS,gBAAgB,EAC1D,CAEA,IAAME,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,iBACpBF,EAAQ,WAAW,aAAaE,EAASF,CAAO,EAChDE,EAAQ,YAAYF,CAAO,EAC3BE,EAAQ,YAAYD,CAAI,CAC1B,CACF,CAAC,EAEDF,EAAK,iBAAiB,KAAK,EAAE,QAASI,GAAQ,CAC5C,GAAI,CAACA,EAAI,cAAc,UAAU,SAAS,gBAAgB,EAAG,CAC3D,IAAMD,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,iBACpBC,EAAI,WAAW,aAAaD,EAASC,CAAG,EACxCD,EAAQ,YAAYC,CAAG,CACzB,CACF,CAAC,CACH,CA7BA,IAAAC,EAAAC,EAAA,QCAA,IAAAC,EAAAC,EAAA,KACA,IAAAC,EAAO,OACPC,IAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,EAAc,CAChB,CAAC",
  "names": ["require_copy_to_clipboard", "__commonJSMin", "pre", "heading", "wrapper", "addCopyButton", "btn", "e", "text", "showCopiedState", "err", "showError", "fallbackCopy", "ta", "ok", "wrapPreBlocks", "main", "heading", "next", "wrapper", "pre", "init_wrap_pre_blocks", "__esmMin", "require_content_page", "__commonJSMin", "import_copy_to_clipboard", "init_wrap_pre_blocks", "wrapPreBlocks"]
}
