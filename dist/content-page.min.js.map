{
  "version": 3,
  "sources": ["../src/js/copy-to-clipboard.js", "../src/js/wrap-pre-blocks.js", "../src/js/content-page.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  // For each <pre>, check if it is immediately preceded by a heading (h2-h6)\r\n  document.querySelectorAll(\"pre\").forEach((pre) => {\r\n    pre.classList.add(\"copyable\");\r\n    // Find preceding heading sibling\r\n    let heading = pre.previousElementSibling;\r\n    if (heading && /^H[2-6]$/.test(heading.tagName)) {\r\n      // Only wrap if not already wrapped\r\n      if (!heading.parentElement.classList.contains(\"copy-pre-btn-wrapper\")) {\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.className = \"copy-pre-btn-wrapper\";\r\n        wrapper.style.position = \"relative\";\r\n        wrapper.style.width = \"100%\";\r\n        heading.parentNode.insertBefore(wrapper, heading);\r\n        wrapper.appendChild(heading);\r\n        wrapper.appendChild(pre);\r\n        // Add button\r\n        addCopyButton(wrapper, pre);\r\n      }\r\n    } else if (!pre.parentElement.classList.contains(\"copy-pre-btn-wrapper\")) {\r\n      // No heading, just wrap pre\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"copy-pre-btn-wrapper\";\r\n      wrapper.style.position = \"relative\";\r\n      wrapper.style.width = \"100%\";\r\n      pre.parentNode.insertBefore(wrapper, pre);\r\n      wrapper.appendChild(pre);\r\n      addCopyButton(wrapper, pre);\r\n    }\r\n  });\r\n});\r\nfunction addCopyButton(wrapper, pre) {\r\n  // Only add button if not already present\r\n  if (wrapper.querySelector(\".copy-pre-btn\")) return;\r\n  const btn = document.createElement(\"button\");\r\n  btn.type = \"button\";\r\n  btn.className = \"copy-pre-btn\";\r\n  btn.textContent = \"Copy\";\r\n  btn.setAttribute(\"aria-label\", \"Copy code block to clipboard\");\r\n  btn.style.position = \"absolute\";\r\n  btn.style.top = \"8px\";\r\n  btn.style.right = \"8px\";\r\n  wrapper.appendChild(btn);\r\n  btn.addEventListener(\"click\", async (e) => {\r\n    e.preventDefault();\r\n    // Only copy the pre's text, not the button\r\n    const text = pre.textContent;\r\n    if (navigator.clipboard && window.isSecureContext) {\r\n      try {\r\n        await navigator.clipboard.writeText(text);\r\n        showCopiedState(btn);\r\n      } catch (err) {\r\n        console.error(\"Clipboard API failed:\", err);\r\n        showError();\r\n      }\r\n      return;\r\n    }\r\n    try {\r\n      fallbackCopy(text);\r\n      showCopiedState(btn);\r\n    } catch (err) {\r\n      console.error(\"Fallback copy failed:\", err);\r\n      showError();\r\n    }\r\n  });\r\n}\r\n// ...existing code...\r\n\r\n// Fallback copy using a temporary textarea\r\nfunction fallbackCopy(text) {\r\n  const ta = document.createElement(\"textarea\");\r\n  ta.value = text;\r\n  ta.setAttribute(\"readonly\", \"\");\r\n  ta.style.position = \"fixed\";\r\n  ta.style.top = \"-1000px\";\r\n  document.body.appendChild(ta);\r\n  ta.focus();\r\n  ta.select();\r\n  const ok = document.execCommand(\"copy\");\r\n  document.body.removeChild(ta);\r\n  if (!ok) throw new Error(\"execCommand copy failed\");\r\n}\r\n\r\n// Lightweight success toast inside the same <pre>\r\nfunction showCopiedState(btn) {\r\n  // Reset any existing timer to avoid race conditions\r\n  if (btn._copyResetTimer) {\r\n    clearTimeout(btn._copyResetTimer);\r\n  }\r\n  btn.textContent = \"Copied\";\r\n  btn.classList.add(\"is-copied\");\r\n  btn.setAttribute(\"aria-label\", \"Copied to clipboard\");\r\n  btn._copyResetTimer = setTimeout(() => {\r\n    btn.textContent = \"Copy\";\r\n    btn.classList.remove(\"is-copied\");\r\n    btn.setAttribute(\"aria-label\", \"Copy code block to clipboard\");\r\n  }, 1600);\r\n}\r\n\r\n// Optional: generic error notice\r\nfunction showError() {\r\n  alert(\"Failed to copy.\");\r\n}\r\n", "// Utility to wrap <h2>-<h6> + <pre> in .aikb-pre-block for unified styling\r\nexport function wrapPreBlocks(main) {\r\n  main = main || document.getElementById(\"aikb-main-content\") || document.body;\r\n  const headingSelector = \"h2, h3, h4, h5, h6\";\r\n  const headings = main.querySelectorAll(headingSelector);\r\n  headings.forEach((heading) => {\r\n    const next = heading.nextElementSibling;\r\n    if (\r\n      next &&\r\n      next.tagName === \"PRE\" &&\r\n      !heading.parentElement.classList.contains(\"aikb-pre-block\")\r\n    ) {\r\n      // Create wrapper\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"aikb-pre-block\";\r\n      heading.parentNode.insertBefore(wrapper, heading);\r\n      wrapper.appendChild(heading);\r\n      wrapper.appendChild(next);\r\n    }\r\n  });\r\n  // Also style any <pre> not already wrapped\r\n  main.querySelectorAll(\"pre\").forEach((pre) => {\r\n    if (!pre.parentElement.classList.contains(\"aikb-pre-block\")) {\r\n      const wrapper = document.createElement(\"div\");\r\n      wrapper.className = \"aikb-pre-block\";\r\n      pre.parentNode.insertBefore(wrapper, pre);\r\n      wrapper.appendChild(pre);\r\n    }\r\n  });\r\n}\r\n", "// Content page specific scripts\r\nimport \"./copy-to-clipboard.js\";\r\nimport { wrapPreBlocks } from \"./wrap-pre-blocks.js\";\r\n\r\n// Wrap <h2>-<h6> + <pre> blocks for unified styling\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  wrapPreBlocks();\r\n});\r\n"],
  "mappings": "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",
  "names": []
}
